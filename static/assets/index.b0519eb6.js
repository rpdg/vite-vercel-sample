import{s as e,F as a,I as t,t as l,n,m as s,U as o,u as r,l as i}from"./ant-design-vue.b2a91f0d.js";import{p as u,a as c,g as m}from"./index.44b1b158.js";import{u as p}from"./vue-i18n.bbad715b.js";import{s as d}from"./index.module.8f1aa0e0.js";import{N as f}from"./@ant-design.a9421c3d.js";import{a2 as b,k as v,r as g,aq as h,aW as $,t as _,az as j,ax as y,aE as w,aw as S,V as x,W as k,D as C,$ as U,A as I,a0 as L,a$ as q,I as A,U as F,C as P}from"./@vue.5723de44.js";import"./@babel.288dabcc.js";import"./regenerator-runtime.8463e994.js";import"./omit.js.0925d6dc.js";import"./lodash-es.bcdd4346.js";import"./moment.29305b8e.js";import"./warning.4abaefa0.js";import"./resize-observer-polyfill.8deb1e21.js";import"./async-validator.1fa0d626.js";import"./scroll-into-view-if-needed.c68eec67.js";import"./compute-scroll-into-view.6058b3be.js";import"./vue-types.6e6d84ba.js";import"./dom-align.f1b5d360.js";import"./vue-router.0532eeed.js";import"./nprogress.3e43c680.js";import"./axios.a57df465.js";import"./@intlify.c2b61631.js";import"./source-map.3671d69c.js";import"./vue.3a1030aa.js";import"./@ctrl.2e36ce53.js";var z=b({components:{UploadOutlined:f},setup(){const{t:a,locale:t}=p(),l="planBooth.boothDesign";let n="en-US"===t.value?"en":"cn";const s=v(),o=v(!1),r=g({standno:"",exhibitor:"",company:"",email:"",contactperson:"",contacttel:"",designremark:"",designpic:"",icon:[]}),i=v([]);let f=g({results:[]});const b=v(""),j=v(""),y=v("");function w(e){if(r.standno=e.standno,r.exhibitor=e.exhibitor,r.company="",r.email=e.email,r.contactperson=e.contactperson,r.contacttel=e.contacttel,r.designremark=e.designremark,r.designpic=e.designpic,i.value.length=0,r.icon.length=0,e.designpic){e.designpic.split("|").forEach(((e,a)=>{i.value.push({uid:a,url:e,status:"done"}),r.icon.push(e)}))}}function S(){o.value=!0,u("/Operation/Getboothdesignlistbyuser",{currentlng:n,pageIndex:0,pageSize:10}).then((e=>{o.value=!1,f.results=e.results}))}h(S),$((()=>f.results),(()=>{if(f.results[0]){let e=f.results[0];switch(b.value=e.createtime?`${e.createtime}   ${a(`${l}.statustype[0]`)}`:"",j.value=e.approvaltime?`${e.approvaltime}   ${a(`${l}.statustype[${e.status}]`)}`:"",e.status){case"1":y.value="green";break;case"2":y.value="red";break;default:y.value=""}w(e)}else m("user/GetCurrentUserMoreInfo").then((e=>{var a={exhibitor:"",email:"",contacttel:""};a.exhibitor=e[0].firstname+" "+e[0].lastname,a.email=e[0].email,a.contacttel=e[0].mobile,w(a)}))}));const x=v(!1),k=v("");return{handlePreview:async e=>{e.url||e.preview||(e.preview=await async function(e){return new Promise(((a,t)=>{if(!e.type.match(/image.*/))return void t(new Error("Not an image"));const l=new FileReader;l.onload=()=>a(l.result),l.onerror=e=>t(e),l.readAsDataURL(e)}))}(e.originFileObj)),k.value=e.url||e.preview,x.value=!0},approvalStatusColor:y,previewVisible:x,fileList:i,formRef:s,rules:{exhibitor:[{required:!0,message:""}],email:[{required:!0,message:""}],contactperson:[{required:!0,message:""}],contacttel:[{required:!0,message:""}]},namespace:l,previewImage:k,data:f,handleCancel:()=>{x.value=!1},handleChange:e=>{o.value=!0;let{file:a}=e;if(a.response){o.value=!1;let e=a.response.data[0].downloadLink,t=i.value.find((e=>e.uid===a.uid));t&&(t.url=e)}else"removed"===a.status&&(o.value=!1)},styles:d,submitStatus:b,t:a,approvalStatus:j,formState:r,handleSubmit:()=>{o.value=!0,r.icon.length=0,i.value.forEach((e=>{r.icon.push(e.url)})),r.designpic=r.icon.join("|"),""===r.exhibitor||""===r.email||""===r.contactperson||""===r.contacttel?(e.info(a(`${l}.alertinfo`)),o.value=!1):u("Operation/Addboothdesign",_(r)).then((e=>{e&&S(),o.value=!1}))},loading:o,headers:{Authorization:c.token},resetForm:()=>{var e;w(null!=(e=f.results[0])?e:{})}}}});j("data-v-39720127");const E=k("img",{src:"/assets/booth.e4ab25be.jpg",alt:""},null,-1),O={class:"text_red"},R=k("br",null,null,-1),D={style:{"font-weight":"bold",color:"red"}},V=k("br",null,null,-1),G=k("br",null,null,-1),N=k("br",null,null,-1),W=k("br",null,null,-1),B=k("br",null,null,-1),M=k("br",null,null,-1),H=k("br",null,null,-1),J=k("br",null,null,-1),K={class:"bg_white pd_20"},Q={key:0},T={class:"ant-upload-text"},X=["src"],Y={class:"text_gray pd_b_20"},Z=k("br",null,null,-1),ee=k("br",null,null,-1),ae=k("br",null,null,-1),te=k("br",null,null,-1),le=k("br",null,null,-1),ne=k("br",null,null,-1),se=k("br",null,null,-1),oe=k("br",null,null,-1),re=k("br",null,null,-1),ie={class:"text_center",style:{width:"100%"}};y(),z.render=function(e,u,c,m,p,d){const f=t,b=l,v=n,g=s,h=w("upload-outlined"),$=o,_=r,j=i,y=a;return S(),x(A,null,[k("div",{class:I(e.styles.formInfoSection)},[E,k("div",null,[k("h2",O,C(e.t(`${e.namespace}.formtitle`)),1),k("div",null,[U(C(e.t(`${e.namespace}.formcontact1`))+" ",1),R,U(" "+C(e.t(`${e.namespace}.formcontact2`)),1),k("span",D,C(e.t(`${e.namespace}.formcontact3`)),1),V,U(" "+C(e.t(`${e.namespace}.formcontact4`))+" ",1),G,U(" "+C(e.t(`${e.namespace}.formcontact5`))+" ",1),N,U(" "+C(e.t(`${e.namespace}.formcontact6`))+" ",1),W,U(" "+C(e.t(`${e.namespace}.formcontact7`))+" ",1),B,U(" "+C(e.t(`${e.namespace}.formcontact8`))+" ",1),M,U(" "+C(e.t(`${e.namespace}.formcontact9`))+" ",1),H,U(" "+C(e.t(`${e.namespace}.formcontact10`))+" ",1),J])])],2),k("div",K,[L(y,{ref:"formRef",model:e.formState,rules:e.rules},{default:q((()=>[L(g,{gutter:20},{default:q((()=>[L(v,{span:12},{default:q((()=>[L(b,{name:"standno",label:e.t(`${e.namespace}.booth`)},{default:q((()=>[L(f,{value:e.formState.standno,"onUpdate:value":u[0]||(u[0]=a=>e.formState.standno=a)},null,8,["value"])])),_:1},8,["label"])])),_:1}),L(v,{span:12},{default:q((()=>[L(b,{name:"exhibitor",label:e.t(`${e.namespace}.exhibitor`)},{default:q((()=>[L(f,{value:e.formState.exhibitor,"onUpdate:value":u[1]||(u[1]=a=>e.formState.exhibitor=a)},null,8,["value"])])),_:1},8,["label"])])),_:1})])),_:1}),L(g,{gutter:20},{default:q((()=>[L(v,{span:12},{default:q((()=>[L(b,{name:"email",label:e.t(`${e.namespace}.email`)},{default:q((()=>[L(f,{value:e.formState.email,"onUpdate:value":u[2]||(u[2]=a=>e.formState.email=a)},null,8,["value"])])),_:1},8,["label"])])),_:1}),L(v,{span:12},{default:q((()=>[L(b,{name:"contactperson",label:e.t(`${e.namespace}.chargepeople`)},{default:q((()=>[L(f,{value:e.formState.contactperson,"onUpdate:value":u[3]||(u[3]=a=>e.formState.contactperson=a)},null,8,["value"])])),_:1},8,["label"])])),_:1})])),_:1}),L(g,{gutter:20},{default:q((()=>[L(v,{span:12},{default:q((()=>[L(b,{name:"contacttel",label:e.t(`${e.namespace}.chargetel`)},{default:q((()=>[L(f,{value:e.formState.contacttel,"onUpdate:value":u[4]||(u[4]=a=>e.formState.contacttel=a)},null,8,["value"])])),_:1},8,["label"])])),_:1}),L(v,{span:12},{default:q((()=>[L(b,{name:"designremark",label:e.t(`${e.namespace}.remark`)},{default:q((()=>[L(f,{value:e.formState.designremark,"onUpdate:value":u[5]||(u[5]=a=>e.formState.designremark=a)},null,8,["value"])])),_:1},8,["label"])])),_:1})])),_:1}),L(g,null,{default:q((()=>[L($,{action:"/api/upload/files",accept:"image/jpg, image/jpeg, image/png, image/tif, image/gif",multiple:"","list-type":"picture-card","file-list":e.fileList,"onUpdate:file-list":u[6]||(u[6]=a=>e.fileList=a),headers:e.headers,onPreview:e.handlePreview,onChange:e.handleChange},{default:q((()=>[e.fileList.length<8?(S(),x("div",Q,[L(h),k("div",T,C(e.t(`${e.namespace}.upload`))+" "+C(e.t(`${e.namespace}.pic${e.fileList.length+1}`)),1)])):F("",!0)])),_:1},8,["file-list","headers","onPreview","onChange"]),L(_,{visible:e.previewVisible,footer:null,onCancel:e.handleCancel},{default:q((()=>[k("img",{alt:"example",style:{width:"100%"},src:e.previewImage},null,8,X)])),_:1},8,["visible","onCancel"])])),_:1}),L(g,{gutter:20},{default:q((()=>[L(v,{span:12},{default:q((()=>[L(b,{label:e.t(`${e.namespace}.applyinfo`)},{default:q((()=>[U(C(e.submitStatus),1)])),_:1},8,["label"])])),_:1}),L(v,{span:12},{default:q((()=>[L(b,{label:e.t(`${e.namespace}.approvalinfo`)},{default:q((()=>[k("span",{style:P({color:e.approvalStatusColor})},C(e.approvalStatus),5)])),_:1},8,["label"])])),_:1})])),_:1}),L(g,null,{default:q((()=>[k("div",Y,[k("span",null,C(e.t(`${e.namespace}.info1`)),1),Z,k("span",null,C(e.t(`${e.namespace}.info2`)),1),ee,k("span",null,C(e.t(`${e.namespace}.info3`)),1),ae,k("span",null,C(e.t(`${e.namespace}.info4`,{email:"cherry.gong@syma.com.cn"})),1),te,k("span",null,C(e.t(`${e.namespace}.info5`)),1),le,k("span",null,C(e.t(`${e.namespace}.info6`)),1),ne,k("span",null,C(e.t(`${e.namespace}.info7`,{email:"crystal.jiang@syma.com.cn"})),1),se,k("span",null,C(e.t(`${e.namespace}.info8`)),1),oe,k("span",null,C(e.t(`${e.namespace}.info9`)),1),re])])),_:1}),L(g,{gutter:20},{default:q((()=>[k("p",ie,[L(j,{type:"primary",onClick:e.handleSubmit,loading:e.loading},{default:q((()=>[U(C(e.t("boothactivity.sendApply")),1)])),_:1},8,["onClick","loading"]),L(j,{style:{"margin-left":"1em"},onClick:e.resetForm,disabled:e.loading},{default:q((()=>[U(C(e.t("boothactivity.reset")),1)])),_:1},8,["onClick","disabled"])])])),_:1})])),_:1},8,["model","rules"])])],64)},z.__scopeId="data-v-39720127";export default z;
