import{m as q,F as A,I as E,w as M,h as G,R as Q,U as T,p as W,g as Y}from"./ant-design-vue.0721aa65.js";import{_ as Z,p as F,b as H,g as J}from"./index.e7c61ddf.js";import{u as K}from"./vue-i18n.0711e616.js";import{s as X}from"./index.module.c389607c.js";import{N as x}from"./@ant-design.8f5596ac.js";import{d as ee,l as g,c as R,o as ae,w as te,O as ne,S as V,U as t,Y as s,u as m,Z as oe,k as n,Q as l,F as le,B as se,V as ie,W as re,R as B,_ as ue,$ as pe}from"./@vue.fa05379c.js";import"./@babel.288dabcc.js";import"./regenerator-runtime.8463e994.js";import"./omit.js.0925d6dc.js";import"./lodash-es.e58a7599.js";import"./moment.29305b8e.js";import"./warning.ca82f8e0.js";import"./resize-observer-polyfill.8deb1e21.js";import"./async-validator.1fa0d626.js";import"./scroll-into-view-if-needed.c68eec67.js";import"./compute-scroll-into-view.6058b3be.js";import"./vue-types.6e6d84ba.js";import"./dom-align.f1b5d360.js";import"./vue-router.8ec3c3d8.js";import"./nprogress.35503c85.js";import"./axios.a57df465.js";import"./@intlify.0eca950e.js";import"./source-map.3671d69c.js";import"./vue.d22487d2.js";import"./@ctrl.2e36ce53.js";async function de(e){return new Promise((r,v)=>{if(!e.type.match(/image.*/)){v(new Error("Not an image"));return}const h=new FileReader;h.onload=()=>r(h.result),h.onerror=y=>v(y),h.readAsDataURL(e)})}var me="/assets/booth.e4ab25be.jpg";const ce=ee({components:{UploadOutlined:x},setup(){const{t:e,locale:r}=K(),v="planBooth.boothDesign";let h=r.value==="en-US"?"en":"cn",y=0;const U=g(),u=g(!1),o=R({standno:"",exhibitor:"",company:"",email:"",contactperson:"",contacttel:"",designremark:"",designpic:"",icon:[]}),c={exhibitor:[{required:!0,message:""}],email:[{required:!0,message:""}],contactperson:[{required:!0,message:""}],contacttel:[{required:!0,message:""}]},d=g([]);let b=R({results:[]});const w=g(""),S=g(""),$=g("");function _(a){o.standno=a.standno,o.exhibitor=a.exhibitor,o.company="",o.email=a.email,o.contactperson=a.contactperson,o.contacttel=a.contacttel,o.designremark=a.designremark,o.designpic=a.designpic,d.value.length=0,o.icon.length=0,a.designpic&&a.designpic.split("|").forEach((j,C)=>{d.value.push({uid:C,url:j,status:"done"}),o.icon.push(j)})}ae(p);function p(){u.value=!0,F("/Operation/Getboothdesignlistbyuser",{currentlng:h,pageIndex:y,pageSize:10}).then(a=>{u.value=!1,b.results=a.results})}te(()=>b.results,()=>{if(b.results[0]){let a=b.results[0];switch(w.value=a.createtime?`${a.createtime}   ${e(`${v}.statustype[0]`)}`:"",S.value=a.approvaltime?`${a.approvaltime}   ${e(`${v}.statustype[${a.status}]`)}`:"",a.status){case"1":$.value="green";break;case"2":$.value="red";break;default:$.value=""}_(a)}else J("user/GetCurrentUserMoreInfo").then(a=>{var f={exhibitor:"",email:"",contacttel:""};f.exhibitor=a[0].firstname+" "+a[0].lastname,f.email=a[0].email,f.contacttel=a[0].mobile,_(f)})});const k=g(!1),I=g(""),L=()=>{k.value=!1},N=async a=>{!a.url&&!a.preview&&(a.preview=await de(a.originFileObj)),I.value=a.url||a.preview,k.value=!0},z=a=>{u.value=!0;let{file:f}=a;if(f.response){u.value=!1;let j=f.response.data[0].downloadLink,C=d.value.find(P=>P.uid===f.uid);C&&(C.url=j)}else f.status==="removed"&&(u.value=!1)},D=()=>{u.value=!0,o.icon.length=0,d.value.forEach(a=>{o.icon.push(a.url)}),o.designpic=o.icon.join("|"),o.exhibitor===""||o.email===""||o.contactperson===""||o.contacttel===""?(q.info(e(`${v}.alertinfo`)),u.value=!1):F("Operation/Addboothdesign",se(o)).then(a=>{a&&p(),u.value=!1})},O=()=>{var a;_((a=b.results[0])!=null?a:{})};return{handlePreview:N,approvalStatusColor:$,previewVisible:k,fileList:d,formRef:U,rules:c,namespace:v,previewImage:I,data:b,handleCancel:L,handleChange:z,styles:X,submitStatus:w,t:e,approvalStatus:S,formState:o,handleSubmit:D,loading:u,headers:{Authorization:H.token},resetForm:O}}}),i=e=>(ie("data-v-2b58a55e"),e=e(),re(),e),fe=i(()=>t("img",{src:me},null,-1)),ve={class:"text_red"},be=i(()=>t("br",null,null,-1)),ge={style:{"font-weight":"bold",color:"red"}},he=i(()=>t("br",null,null,-1)),$e=i(()=>t("br",null,null,-1)),_e=i(()=>t("br",null,null,-1)),ye=i(()=>t("br",null,null,-1)),we=i(()=>t("br",null,null,-1)),Se=i(()=>t("br",null,null,-1)),je=i(()=>t("br",null,null,-1)),Ce=i(()=>t("br",null,null,-1)),ke={class:"bg_white pd_20"},Ue={key:0},Ie={class:"ant-upload-text"},Fe=["src"],Re={class:"text_gray pd_b_20"},Ve=i(()=>t("br",null,null,-1)),Be=i(()=>t("br",null,null,-1)),Le=i(()=>t("br",null,null,-1)),Ne=i(()=>t("br",null,null,-1)),ze=i(()=>t("br",null,null,-1)),De=i(()=>t("br",null,null,-1)),Oe=i(()=>t("br",null,null,-1)),Pe=i(()=>t("br",null,null,-1)),qe=i(()=>t("br",null,null,-1)),Ae={class:"text_center",style:{width:"100%"}};function Ee(e,r,v,h,y,U){const u=E,o=M,c=G,d=Q,b=ne("upload-outlined"),w=T,S=W,$=Y,_=A;return B(),V(le,null,[t("div",{class:oe(e.styles.formInfoSection)},[fe,t("div",null,[t("h2",ve,s(e.t(`${e.namespace}.formtitle`)),1),t("div",null,[m(s(e.t(`${e.namespace}.formcontact1`))+" ",1),be,m(" "+s(e.t(`${e.namespace}.formcontact2`)),1),t("span",ge,s(e.t(`${e.namespace}.formcontact3`)),1),he,m(" "+s(e.t(`${e.namespace}.formcontact4`))+" ",1),$e,m(" "+s(e.t(`${e.namespace}.formcontact5`))+" ",1),_e,m(" "+s(e.t(`${e.namespace}.formcontact6`))+" ",1),ye,m(" "+s(e.t(`${e.namespace}.formcontact7`))+" ",1),we,m(" "+s(e.t(`${e.namespace}.formcontact8`))+" ",1),Se,m(" "+s(e.t(`${e.namespace}.formcontact9`))+" ",1),je,m(" "+s(e.t(`${e.namespace}.formcontact10`))+" ",1),Ce])])],2),t("div",ke,[n(_,{ref:"formRef",model:e.formState,rules:e.rules},{default:l(()=>[n(d,{gutter:20},{default:l(()=>[n(c,{span:12},{default:l(()=>[n(o,{name:"standno",label:e.t(`${e.namespace}.booth`)},{default:l(()=>[n(u,{value:e.formState.standno,"onUpdate:value":r[0]||(r[0]=p=>e.formState.standno=p)},null,8,["value"])]),_:1},8,["label"])]),_:1}),n(c,{span:12},{default:l(()=>[n(o,{name:"exhibitor",label:e.t(`${e.namespace}.exhibitor`)},{default:l(()=>[n(u,{value:e.formState.exhibitor,"onUpdate:value":r[1]||(r[1]=p=>e.formState.exhibitor=p)},null,8,["value"])]),_:1},8,["label"])]),_:1})]),_:1}),n(d,{gutter:20},{default:l(()=>[n(c,{span:12},{default:l(()=>[n(o,{name:"email",label:e.t(`${e.namespace}.email`)},{default:l(()=>[n(u,{value:e.formState.email,"onUpdate:value":r[2]||(r[2]=p=>e.formState.email=p)},null,8,["value"])]),_:1},8,["label"])]),_:1}),n(c,{span:12},{default:l(()=>[n(o,{name:"contactperson",label:e.t(`${e.namespace}.chargepeople`)},{default:l(()=>[n(u,{value:e.formState.contactperson,"onUpdate:value":r[3]||(r[3]=p=>e.formState.contactperson=p)},null,8,["value"])]),_:1},8,["label"])]),_:1})]),_:1}),n(d,{gutter:20},{default:l(()=>[n(c,{span:12},{default:l(()=>[n(o,{name:"contacttel",label:e.t(`${e.namespace}.chargetel`)},{default:l(()=>[n(u,{value:e.formState.contacttel,"onUpdate:value":r[4]||(r[4]=p=>e.formState.contacttel=p)},null,8,["value"])]),_:1},8,["label"])]),_:1}),n(c,{span:12},{default:l(()=>[n(o,{name:"designremark",label:e.t(`${e.namespace}.remark`)},{default:l(()=>[n(u,{value:e.formState.designremark,"onUpdate:value":r[5]||(r[5]=p=>e.formState.designremark=p)},null,8,["value"])]),_:1},8,["label"])]),_:1})]),_:1}),n(d,null,{default:l(()=>[n(w,{action:"/api/upload/files",accept:"image/jpg, image/jpeg, image/png, image/tif, image/gif",multiple:"","list-type":"picture-card","file-list":e.fileList,"onUpdate:file-list":r[6]||(r[6]=p=>e.fileList=p),headers:e.headers,onPreview:e.handlePreview,onChange:e.handleChange},{default:l(()=>[e.fileList.length<8?(B(),V("div",Ue,[n(b),t("div",Ie,s(e.t(`${e.namespace}.upload`))+" "+s(e.t(`${e.namespace}.pic${e.fileList.length+1}`)),1)])):ue("",!0)]),_:1},8,["file-list","headers","onPreview","onChange"]),n(S,{visible:e.previewVisible,footer:null,onCancel:e.handleCancel},{default:l(()=>[t("img",{alt:"example",style:{width:"100%"},src:e.previewImage},null,8,Fe)]),_:1},8,["visible","onCancel"])]),_:1}),n(d,{gutter:20},{default:l(()=>[n(c,{span:12},{default:l(()=>[n(o,{label:e.t(`${e.namespace}.applyinfo`)},{default:l(()=>[m(s(e.submitStatus),1)]),_:1},8,["label"])]),_:1}),n(c,{span:12},{default:l(()=>[n(o,{label:e.t(`${e.namespace}.approvalinfo`)},{default:l(()=>[t("span",{style:pe({color:e.approvalStatusColor})},s(e.approvalStatus),5)]),_:1},8,["label"])]),_:1})]),_:1}),n(d,null,{default:l(()=>[t("div",Re,[t("span",null,s(e.t(`${e.namespace}.info1`)),1),Ve,t("span",null,s(e.t(`${e.namespace}.info2`)),1),Be,t("span",null,s(e.t(`${e.namespace}.info3`)),1),Le,t("span",null,s(e.t(`${e.namespace}.info4`,{email:"cherry.gong@syma.com.cn"})),1),Ne,t("span",null,s(e.t(`${e.namespace}.info5`)),1),ze,t("span",null,s(e.t(`${e.namespace}.info6`)),1),De,t("span",null,s(e.t(`${e.namespace}.info7`,{email:"crystal.jiang@syma.com.cn"})),1),Oe,t("span",null,s(e.t(`${e.namespace}.info8`)),1),Pe,t("span",null,s(e.t(`${e.namespace}.info9`)),1),qe])]),_:1}),n(d,{gutter:20},{default:l(()=>[t("p",Ae,[n($,{type:"primary",onClick:e.handleSubmit,loading:e.loading},{default:l(()=>[m(s(e.t("boothactivity.sendApply")),1)]),_:1},8,["onClick","loading"]),n($,{style:{"margin-left":"1em"},onClick:e.resetForm,disabled:e.loading},{default:l(()=>[m(s(e.t("boothactivity.reset")),1)]),_:1},8,["onClick","disabled"])])]),_:1})]),_:1},8,["model","rules"])])],64)}var ca=Z(ce,[["render",Ee],["__scopeId","data-v-2b58a55e"]]);export{ca as default};
