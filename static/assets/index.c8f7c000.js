import{s as e,L as a,a as r}from"./index.6f403c03.js";import{u as o}from"./vue-i18n.bbad715b.js";import{a as s,u as l,d as t}from"./vue-router.0532eeed.js";import{b as n}from"./index.6197f744.js";import{F as i,I as d,k as u,l as p}from"./ant-design-vue.7426a550.js";import{s as c,y as g,M as m}from"./@ant-design.eb6e5cf6.js";import{a2 as f,k as b,r as v,a0 as j,ag as h,t as w}from"./@vue.5723de44.js";import"./HomeStore.44d2fe93.js";import"./@intlify.c2b61631.js";import"./nprogress.3e43c680.js";import"./source-map.3671d69c.js";import"./vue.3a1030aa.js";import"./moment.29305b8e.js";import"./axios.a57df465.js";import"./@babel.dc475c8c.js";import"./regenerator-runtime.8463e994.js";import"./omit.js.0925d6dc.js";import"./lodash-es.60ec16aa.js";import"./warning.4abaefa0.js";import"./resize-observer-polyfill.8deb1e21.js";import"./async-validator.1fa0d626.js";import"./scroll-into-view-if-needed.c68eec67.js";import"./compute-scroll-into-view.6058b3be.js";import"./vue-types.6e6d84ba.js";import"./dom-align.f1b5d360.js";import"./@ctrl.2e36ce53.js";function y(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!h(e)}var k=f({name:"Login_PasswordForm",setup(){const{authenStore:e}=n(),a=s(),r=l(),{t:m}=o({useScope:"global"}),f=b(),h=v({username:"",password:"",agreed:!0}),k=v({username:[{required:!0,message:m("login.usernameTip"),trigger:"change"}],password:[{required:!0,message:m("login.passwordTip"),trigger:"change"}]});async function T(){var o,s;try{await f.value.validate(),await e.login(w(h)),r.push(null!=(s=null==(o=a.query)?void 0:o.redirect)?s:"/home")}catch(l){console.log("error",l)}}return()=>{let a,r;return j(i,{ref:f,model:h,rules:k},{default:()=>[j(i.Item,{name:"username"},{default:()=>[j(d,{value:h.username,"onUpdate:value":e=>h.username=e,placeholder:m("login.username")},{prefix:()=>j(c,{style:"color: rgba(0, 0, 0, 0.25)"},null)})]}),j(i.Item,{name:"password"},{default:()=>[j(d,{type:"password",value:h.password,"onUpdate:value":e=>h.password=e,placeholder:m("login.password")},{prefix:()=>j(g,{style:"color: rgba(0, 0, 0, 0.25)"},null)})]}),j(i.Item,{name:"agreed"},{default:()=>[j(u,{checked:h.agreed,"onUpdate:checked":e=>h.agreed=e},{default:()=>[j(t,{to:"/agreement"},y(a=m("login.agreeTip"))?a:{default:()=>[a]})]})]}),j(i.Item,null,{default:()=>[j(p,{type:"primary",block:!0,disabled:!h.agreed,loading:e.loading,onClick:T},y(r=m("login.login"))?r:{default:()=>[r]})]})]})}}});function T(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!h(e)}var I=f({name:"Login_PasswordForm",setup(){const{authenStore:e}=n(),a=s(),r=l(),{t:c}=o({useScope:"global"}),f=b(),h=v({username:"",password:"",agreed:!0}),y=v({username:[{required:!0,message:c("login.usernameTip"),trigger:"change"}],password:[{required:!0,message:c("login.passwordTip"),trigger:"change"}]});async function k(){var o,s;try{await f.value.validate(),await e.login(w(h)),r.push(null!=(s=null==(o=a.query)?void 0:o.redirect)?s:"/home")}catch(l){console.log("error",l)}}return()=>{let a,r;return j(i,{ref:f,model:h,rules:y},{default:()=>[j(i.Item,{name:"phone"},{default:()=>[j(d,{value:h.username,"onUpdate:value":e=>h.username=e,placeholder:c("login.mobile")},{prefix:()=>j(m,{style:"color: rgba(0, 0, 0, 0.25)"},null)})]}),j(i.Item,{name:"code"},{default:()=>[j(d,{value:h.password,"onUpdate:value":e=>h.password=e,placeholder:c("login.cmsCode")},{prefix:()=>j(g,{style:"color: rgba(0, 0, 0, 0.25)"},null)})]}),j(i.Item,{name:"agreed"},{default:()=>[j(u,{checked:h.agreed,"onUpdate:checked":e=>h.agreed=e},{default:()=>[j(t,{to:"/agreement"},T(a=c("login.agreeTip"))?a:{default:()=>[a]})]})]}),j(i.Item,null,{default:()=>[j(p,{type:"primary",block:!0,disabled:!h.agreed,loading:e.loading,onClick:k},T(r=c("login.login"))?r:{default:()=>[r]})]})]})}}});var S=f({name:"Login",setup(){const{t:s}=o({useScope:"global"}),l=v({loginWithPassword:!0});function n(e){l.loginWithPassword=e}return()=>{let o;return j(r,null,{default:()=>{return[j("div",{class:e.outer},[j("div",{class:e.padding},[j(a,null,null)]),j("div",{class:e.form},[j("h1",null,[s("login.loginForm")]),j("div",{class:e.tabs},[j("div",{class:l.loginWithPassword?e.curTab:"",onClick:()=>{n(!0)}},[j("span",null,[s("login.passwordLogin")])]),j("div",{class:l.loginWithPassword?"":e.curTab,onClick:()=>{n(!1)}},[j("span",null,[s("login.smsLogin")])])]),l.loginWithPassword?j(k,null,null):j(I,null,null)]),j("div",{class:e.padding},[j("p",{class:e.registTip},[j(t,{to:"/signUp"},(r=o=s("login.registTip"),"function"==typeof r||"[object Object]"===Object.prototype.toString.call(r)&&!h(r)?o:{default:()=>[o]}))])])])];var r}})}}});export default S;
