import{M as h}from"./MainSectionHead.8ce27b3b.js";import{u as C}from"./index.156122b3.js";import{C as u,u as _}from"./CalendarStore.ce244cd2.js";import{B as c,c as S,e as f,f as y}from"./ant-design-vue.45bb77f4.js";import{h as i}from"./moment.29305b8e.js";import{u as M}from"./vue-i18n.8989ea2a.js";import{u as O}from"./vue-router.65bc85cf.js";import{d as g,k as e,c as R,o as k,i as B,F as H}from"./@vue.f0f90a02.js";import{k as T,R as P}from"./@ant-design.b29a0759.js";import"./nprogress.8b9ed5b7.js";import"./axios.a57df465.js";import"./@babel.288dabcc.js";import"./regenerator-runtime.8463e994.js";import"./omit.js.0925d6dc.js";import"./lodash-es.e58a7599.js";import"./warning.ca82f8e0.js";import"./resize-observer-polyfill.8deb1e21.js";import"./async-validator.1fa0d626.js";import"./scroll-into-view-if-needed.c68eec67.js";import"./compute-scroll-into-view.6058b3be.js";import"./vue-types.6e6d84ba.js";import"./dom-align.f1b5d360.js";import"./@intlify.35d5f340.js";import"./source-map.3671d69c.js";import"./vue.8bc7d658.js";import"./@ctrl.2e36ce53.js";var x=g({name:"CalendarBadgeTips",props:{online:{type:Boolean,required:!0}},setup(s){const{t:l}=M();return()=>e("div",{class:"pd_20 gridCols2 text_left"},[e(c,{color:u.Red,text:l("calendar.tips.1")},null),e(c,{color:u.Blue,text:l("calendar.tips.7")},null),e(c,{color:u.Yellow,text:l("calendar.tips.3")},null),e(c,{color:u.Black,text:l("calendar.tips.2")},null),e(c,{color:u.Gray,text:l("calendar.tips.4")},null)])}});function v(s){return typeof s=="function"||Object.prototype.toString.call(s)==="[object Object]"&&!B(s)}var ie=g({setup(){const{t:s}=M(),{appStore:l}=C(),D=O(),{calendarStore:d}=_();let p=i("2021-11-01"),n=R({tip:"",virtualMoment:i(p),virtualMap:d.virtualMap,physicalMap:d.physicalMap});k(()=>{if(!d.inited){const r={beginDate:i(p).startOf("year").format("YYYY-MM-DD HH:mm:ss"),endDate:i(p).endOf("year").format("YYYY-MM-DD HH:mm:ss")};d.getVirtualCalendar(r),d.getPhysicalCalendar(r)}d.getTextTip(l.isEn).then(r=>{n.tip=r})});function b(r,{current:a}){var m;let o=a.format("YYYY-MM-DD"),t=r?n.virtualMap:n.physicalMap;if(t.has(o))return(m=t.get(o))==null?void 0:m.map(Y=>e(c,{color:`${u[Y]}`},null))}function j(r,a){let o=i(a).format("YYYY-MM-DD"),t=r?n.virtualMap:n.physicalMap;(!r||t.has(o))&&D.push(`/calendar/${r?"virtual":"physical"}/${o}`)}return()=>{let r;return e(H,null,[e(h,{redLead:!1},v(r=s("menu.calendar"))?r:{default:()=>[r]}),e(S,{message:n.tip,type:"error"},null),e(f,{expandIconPosition:"right",style:{margin:"20px 0"}},{default:()=>[e(f.Panel,{key:"1"},{default:()=>{var a,o;return[e(y,{fullscreen:!0,value:n.virtualMoment,"onUpdate:value":t=>n.virtualMoment=t,validRange:[i((a=l.exhibitionDate)==null?void 0:a.onlineBeginDateTime).startOf("day"),i((o=l.exhibitionDate)==null?void 0:o.onlineEndDateTime).endOf("day")],onSelect:t=>{j(!0,t)}},{headerRender:({value:t,onChange:m})=>e("h3",{class:"text_center"},[e(T,{class:"cursor_hand",style:{visibility:n.virtualMoment.month()===10?"hidden":"visible"},onClick:()=>{m(t.clone().month(10))}},null)," ",i.months()[n.virtualMoment.month()]," ",e(P,{class:"cursor_hand",style:{visibility:n.virtualMoment.month()===11?"hidden":"visible"},onClick:()=>{m(t.clone().month(11))}},null)]),dateCellRender:t=>b(!0,t)}),e(x,{online:!0},null)]},header:()=>{let a;return e(h,{redLead:!0,inner:!0},v(a=s("calendar.virtual_platform_calendar"))?a:{default:()=>[a]})}})]}),e(f,{expandIconPosition:"right"},{default:()=>[e(f.Panel,{key:"2"},{default:()=>{var a,o;return[e(y,{fullscreen:!0,value:p,"onUpdate:value":t=>p=t,validRange:[i((a=l.exhibitionDate)==null?void 0:a.beginDate).startOf("day"),i((o=l.exhibitionDate)==null?void 0:o.endDate).endOf("day")],onSelect:t=>{j(!1,t)}},{headerRender:()=>e("h3",{class:"text_center"},[i.months()[10]]),dateCellRender:t=>b(!1,t)}),e(x,{online:!1},null)]},header:()=>{let a;return e(h,{redLead:!0,inner:!0},v(a=s("calendar.physical_exhibition_calendar"))?a:{default:()=>[a]})}})]})])}}});export{ie as default};
