var t=Object.defineProperty,e=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,l=(e,a,n)=>a in e?t(e,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[a]=n,r=(t,e,a)=>(l(t,"symbol"!=typeof e?e+"":e,a),a);import{B as o,g as i,p as s,l as u}from"./index.ffebe535.js";import{u as p}from"./vue-i18n.bbad715b.js";import{s as d}from"./index.module.08f1abaa.js";import{T as c,s as m,F as h,m as y,n as f,q as v,I as g,l as b,t as x}from"./ant-design-vue.caf0e0b9.js";import{a2 as I,c as w,a0 as j,$ as S,aq as $,k as B,r as q,ag as A,I as O,t as _,al as L}from"./@vue.5723de44.js";import"./vue-router.0532eeed.js";import"./moment.29305b8e.js";import"./@ant-design.503097a2.js";import"./@ctrl.2e36ce53.js";import"./nprogress.3e43c680.js";import"./axios.a57df465.js";import"./@babel.dc475c8c.js";import"./regenerator-runtime.8463e994.js";import"./omit.js.0925d6dc.js";import"./lodash-es.60ec16aa.js";import"./warning.4abaefa0.js";import"./resize-observer-polyfill.8deb1e21.js";import"./async-validator.1fa0d626.js";import"./scroll-into-view-if-needed.c68eec67.js";import"./compute-scroll-into-view.6058b3be.js";import"./vue-types.6e6d84ba.js";import"./dom-align.f1b5d360.js";import"./@intlify.c2b61631.js";import"./source-map.3671d69c.js";import"./vue.3a1030aa.js";var P=Object.defineProperty,U=Object.getOwnPropertyDescriptor,R=(t,e,a,n)=>{for(var l,r=n>1?void 0:n?U(e,a):e,o=t.length-1;o>=0;o--)(l=t[o])&&(r=(n?l(e,a,r):l(r))||r);return n&&r&&P(e,a,r),r};class C extends o{constructor(){super(),r(this,"userInfo"),r(this,"currentLng"),r(this,"reserveType","translation"),r(this,"translateServices"),r(this,"sumApplyPrice",0),r(this,"appliedList"),r(this,"sumAppliedPrice",0),r(this,"pageIndex",0),r(this,"pageSize",10),r(this,"totalRecords",0)}async getUserMoreInfo(){let t=await i("user/GetCurrentUserMoreInfo");return this.userInfo=t[0],t[0]}async getAllTranslations(){let t=await s("/Operation/Getalltranslation",{reservetype:this.reserveType,currentlng:this.currentLng});t.forEach((t=>{t.quantity1=t.quantity2=0})),this.translateServices=t}caculateSum(){var t;let e=0;null==(t=this.translateServices)||t.forEach((t=>{e+=(t.quantity1+t.quantity2)*t.unitprice})),this.sumApplyPrice=e}async postResourceApply(t){var r,o;const i=null==(r=this.translateServices)?void 0:r.map((t=>t.itemno)).join("|"),u=null==(o=this.translateServices)?void 0:o.map((t=>`${t.quantity1},${t.quantity2}`)).join("|");await s("/Operation/AddResource",((t,r)=>{for(var o in r||(r={}))a.call(r,o)&&l(t,o,r[o]);if(e)for(var o of e(r))n.call(r,o)&&l(t,o,r[o]);return t})({reservetype:this.reserveType,currentlng:this.currentLng,itemno:i,itemqty:u},t))}async getAppliedList(t,e){let a=await s("Operation/Gettranslationlistbyuser",{reservetype:this.reserveType,currentlng:this.currentLng,pageIndex:t,pageSize:e||this.pageSize});this.appliedList=a.results,this.pageIndex=t,this.totalRecords=a.totalRecord}async getServiceSum(){var t;let e=await s("Operation/Getservicelisttotalsumbyuser",{pageIndex:0,reservetype:this.reserveType,currentlng:this.currentLng});return this.sumAppliedPrice=(null==(t=e[0])?void 0:t.totalsum)||0,this.sumAppliedPrice}}R([u],C.prototype,"getAllTranslations",1),R([u],C.prototype,"postResourceApply",1),R([u],C.prototype,"getAppliedList",1),R([u],C.prototype,"getServiceSum",1);const T=new C;var k=I({props:{t:{type:Function,required:!0},translateStore:{type:Object,required:!0}},setup(t){const{t:e,translateStore:a}=t;let n=w((()=>({current:a.pageIndex,total:a.totalRecords})));const l=[{title:e("planBooth.standno"),width:100,dataIndex:"standno"},{title:e("planBooth.company"),width:100,dataIndex:"company"},{title:e("planBooth.country"),width:100,dataIndex:"country"},{title:e("planBooth.translation.contactperson"),width:100,dataIndex:"contactperson"},{title:e("planBooth.translation.phonenum"),width:100,dataIndex:"phonenum"},{title:e("planBooth.translation.email"),width:100,dataIndex:"email"},{title:e("planBooth.translation.payment"),width:100,dataIndex:"payment"},{title:e("planBooth.translation.reserveitemno"),width:100,dataIndex:"reserveitemno"},{title:e("planBooth.translation.itemname"),width:100,dataIndex:"itemname"},{title:e("planBooth.translation.description"),width:100,dataIndex:"description"},{title:e("planBooth.translation.unitprice"),width:100,dataIndex:"unitprice"},{title:e("planBooth.translation.reserveqty1"),width:100,dataIndex:"oneday"},{title:e("planBooth.translation.reserveqty2"),width:100,dataIndex:"twoday"},{title:e("planBooth.translation.hostess"),width:100,dataIndex:"hostess"},{title:e("planBooth.translation.createtime"),width:100,dataIndex:"createtime"},{title:e("planBooth.translation.status"),width:100,fixed:"right",dataIndex:"status",customRender:function({record:t}){return j("b",null,[e(`planBooth.translation.statustype[${t.status}]`)])}}];return()=>j("div",{class:"pd_tb_20"},[j(c,{size:"small",bordered:!0,rowKey:"reserveid",columns:l,loading:a.loading,scroll:{x:1400,y:500},dataSource:a.appliedList,pagination:{current:n.value.current,total:n.value.total,onChange:t=>{a.getAppliedList(t)}}},{title:()=>j("h3",null,[e("planBooth.serviceApplylistFurniture")]),footer:()=>j("h3",{class:"text_red text_right"},[e("planBooth.resource.totalsum"),S(": "),a.sumAppliedPrice])})])}}),z=I({props:{t:{type:Function,required:!0},translateStore:{type:Object,required:!0}},setup(t){const{t:e,translateStore:a}=t,n="planBooth.resource",l=[{title:e(`${n}.itemno`),dataIndex:"itemno",width:150},{title:e(`${n}.itemname`),dataIndex:"itemname",width:150},{title:e(`${n}.description`),dataIndex:"description"},{title:e(`${n}.unitprice`),dataIndex:"unitprice",width:150},{title:e(`${n}.t_qty1`),dataIndex:"itemno",width:100,customRender:({record:t})=>j(m,{value:t.quantity1,"onUpdate:value":e=>t.quantity1=e,min:0,precision:0,size:"small",style:{width:"50px"},onChange:()=>{a.caculateSum()}},null)},{title:e(`${n}.t_qty2`),dataIndex:"itemno",width:100,customRender:({record:t})=>j(m,{value:t.quantity2,"onUpdate:value":e=>t.quantity2=e,min:0,precision:0,size:"small",style:{width:"50px"},onChange:()=>{a.caculateSum()}},null)}];return()=>j(c,{dataSource:a.translateServices,rowKey:"itemno",columns:l,scroll:{y:"60vh"},pagination:!1},null)}});function F(t){return"function"==typeof t||"[object Object]"===Object.prototype.toString.call(t)&&!A(t)}var D=I({props:{t:{type:Function,required:!0},translateStore:{type:Object,required:!0}},setup(t){var e,a,n,l,r,o,i,s;const{t:u,translateStore:p}=t,d="planBooth.translation";$((()=>{p.getAppliedList(0),p.getServiceSum()}));const c=B(!1),m=B(),I=q({payment:"CNY",country:null!=(a=null==(e=p.userInfo)?void 0:e.country)?a:"",contactperson:(null==(n=p.userInfo)?void 0:n.firstname)+" "+(null==(l=p.userInfo)?void 0:l.lastname),phonenum:null!=(o=null==(r=p.userInfo)?void 0:r.mobile)?o:"",email:null!=(s=null==(i=p.userInfo)?void 0:i.email)?s:"",hostess:"no"});let A=w((()=>{let t=!0;return t&&(t=I.payment.length>0),t&&(t=I.country.length>0),t&&(t=I.contactperson.length>0),t&&(t=I.phonenum.length>0),t&&(t=I.email.length>0),t}));const L=()=>{c.value=!1},P=async()=>{await p.getAllTranslations(),c.value=!0};function U(){p.sumApplyPrice>0&&x.confirm({content:j("div",null,[u("planBooth.translation.submitinfo"),j("br",null,null),u("planBooth.translation.submitinfo2")]),onOk:async()=>{await p.postResourceApply(_(I)),c.value=!1,p.getAppliedList(0),p.getServiceSum()},onCancel:()=>{}})}return()=>{let t,e,a,n;return j(O,null,[j(h,{ref:m},{default:()=>[j(y,{gutter:20},{default:()=>[j(f,{span:12},{default:()=>[j(h.Item,{label:u(`${d}.payment`)},{default:()=>[j(v,{value:I.payment,"onUpdate:value":t=>I.payment=t},{default:()=>[j(v.Option,{value:"CNY"},F(t=u(`${d}.paymenttypeD[0]`))?t:{default:()=>[t]}),j(v.Option,{value:"EUR"},F(e=u(`${d}.paymenttypeD[1]`))?e:{default:()=>[e]}),j(v.Option,{value:"USD"},F(a=u(`${d}.paymenttypeD[2]`))?a:{default:()=>[a]})]})]})]}),j(f,{span:12},{default:()=>[j(h.Item,{label:u(`${d}.country`)},{default:()=>[j(g,{type:"text",value:I.country,"onUpdate:value":t=>I.country=t},null)]})]})]}),j(y,{gutter:20},{default:()=>[j(f,{span:12},{default:()=>[j(h.Item,{label:u(`${d}.contactperson`)},{default:()=>[j(g,{type:"text",value:I.contactperson,"onUpdate:value":t=>I.contactperson=t},null)]})]}),j(f,{span:12},{default:()=>[j(h.Item,{label:u(`${d}.phonenum`)},{default:()=>[j(g,{type:"text",value:I.phonenum,"onUpdate:value":t=>I.phonenum=t},null)]})]})]}),j(y,{gutter:20},{default:()=>[j(f,{span:12},{default:()=>[j(h.Item,{label:u(`${d}.email`)},{default:()=>[j(g,{type:"text",value:I.email,"onUpdate:value":t=>I.email=t},null)]})]})]})]}),j("div",null,[j("span",{class:"text_red"},[u(`${d}.forminfo`)]),j("br",null,null),j("span",{class:"text_red"},[u(`${d}.forminfo2`)]),j("br",null,null),j("span",{class:"text_red"},[u(`${d}.forminfo3`)]),j("br",null,null),j("span",{class:"text_red"},[u(`${d}.forminfo4`)]),j("br",null,null),j("span",{class:"text_red"},[u(`${d}.forminfo5`)]),j("br",null,null),j("span",{class:"text_red"},[u(`${d}.forminfo6`)]),j("br",null,null),j("span",{class:"text_red"},[u(`${d}.forminfo7`)]),j("br",null,null),j("span",{class:"text_red"},[u(`${d}.forminfo8`)]),j("br",null,null),j("span",{class:"text_red"},[u(`${d}.forminfo9`)]),j("br",null,null),j("span",{class:"text_red"},[u(`${d}.forminfo10`)]),j("br",null,null),j("span",{class:"text_red"},[u(`${d}.forminfo11`)]),j("br",null,null),j("p",{class:"text_center"},[j(b,{type:"primary",onClick:P,disabled:!A.value,loading:p.loading},F(n=u(`${d}.serviceApply`))?n:{default:()=>[n]})])]),j(x,{visible:c.value,"onUpdate:visible":t=>c.value=t,width:1080,centered:!0,title:u(`${d}.serviceApplylist`)},{default:()=>[c.value&&j(z,{t:u,translateStore:p},null)],footer:()=>{let t,e;return j(O,null,[j("b",{class:"text_red",style:{marginRight:"3em"}},[u("planBooth.resource.totalsum"),S(": "),p.sumApplyPrice]),j(b,{key:"back",onClick:L},F(t=u("common.cancel"))?t:{default:()=>[t]}),j(b,{key:"submit",type:"primary",onClick:U},F(e=u("common.submit"))?e:{default:()=>[e]})])}})])}}}),E=I({setup(){const{t:t,locale:e}=p();let a="en-US"===e.value?"en":"cn";const{translateStore:n}=(l=a,T.currentLng=l,{translateStore:T});var l;return L((()=>{n.getUserMoreInfo()})),()=>j(O,null,[j("div",{class:d.formInfoSection},[j("img",{src:"//wapp.itb-china.com/Pages/pc/pages/logistics/translation/translate/translate.jpg?__=1616649706693"},null),j("div",null,[j("h2",{class:"text_red"},[t("planBooth.translation.formtitle")]),j("div",null,[t("planBooth.translation.info1")]),j("div",null,[t("planBooth.translation.info2")]),j("div",null,[t("planBooth.translation.info3",{email:"Frederic.raposo@aimresult.com"})])])]),n.userInfo&&j(D,{t:t,translateStore:n},null),j(k,{t:t,translateStore:n},null)])}});export default E;
