import{s as e,l as a,L as s}from"./index.module.b7b8e1b3.js";import{b as r}from"./index.2fbb3e55.js";import{F as o,I as t,j as l,k as i}from"./ant-design-vue.1886841a.js";import{u as n}from"./vue-i18n.4205327f.js";import{a as d,u as m,d as p}from"./vue-router.d53e7fc8.js";import{r as u,y as c}from"./@ant-design.5ba6d8e8.js";import{a7 as g,k as f,r as j,a5 as b,a4 as v,al as y,t as h}from"./@vue.545e4a02.js";import"./HomeStore.8609dba3.js";import"./moment.29305b8e.js";import"./axios.a57df465.js";import"./nprogress.3e43c680.js";import"./@babel.c1abb07f.js";import"./regenerator-runtime.df0ff768.js";import"./omit.js.0925d6dc.js";import"./lodash-es.4607ccff.js";import"./warning.ca82f8e0.js";import"./resize-observer-polyfill.8deb1e21.js";import"./async-validator.1fa0d626.js";import"./scroll-into-view-if-needed.c68eec67.js";import"./compute-scroll-into-view.6058b3be.js";import"./vue-types.6e6d84ba.js";import"./dom-align.f1b5d360.js";import"./@intlify.c2b61631.js";import"./source-map.3671d69c.js";import"./vue.e5ab7692.js";import"./@ctrl.2e36ce53.js";function w(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!y(e)}var k=g({name:"Login",setup(g,{slots:y}){const k=d(),x=m(),{t:I}=n({useScope:"global"}),T=f(),U=j({username:"",password:"",agreed:!0}),q=j({username:[{required:!0,message:I("login.usernameTip"),trigger:"change"}],password:[{required:!0,message:I("login.passwordTip"),trigger:"change"}]});async function S(){var e,a;try{await T.value.validate(),await r.login(h(U)),x.push(null!=(a=null==(e=k.query)?void 0:e.redirect)?a:"/home")}catch(s){console.log("error",s)}}return()=>{let n,d,m;return b(s,null,{default:()=>[b("div",{class:e.outer},[b("div",{class:e.padding},[b("h3",null,[b("img",{src:a,class:e.logo},null),v("ITB China 2021 plus")])]),b("div",{class:e.form},[b("h1",null,[I("login.loginForm")]),b(o,{ref:T,model:U,rules:q},{default:()=>[b(o.Item,{name:"username"},{default:()=>[b(t,{value:U.username,"onUpdate:value":e=>U.username=e,placeholder:I("login.username")},{prefix:()=>b(u,{style:"color: rgba(0, 0, 0, 0.25)"},null)})]}),b(o.Item,{name:"password"},{default:()=>[b(t,{type:"password",value:U.password,"onUpdate:value":e=>U.password=e,placeholder:I("login.password")},{prefix:()=>b(c,{style:"color: rgba(0, 0, 0, 0.25)"},null)})]}),b(o.Item,{name:"agreed"},{default:()=>[b(l,{checked:U.agreed,"onUpdate:checked":e=>U.agreed=e},{default:()=>[b(p,{to:"/agreement"},w(n=I("login.agreeTip"))?n:{default:()=>[n]})]})]}),b(o.Item,null,{default:()=>[b(i,{type:"primary",block:!0,disabled:!U.agreed,loading:r.loading,onClick:S},w(d=I("login.login"))?d:{default:()=>[d]})]})]}),b("p",{class:e.registTip},[b(p,{to:"/signUp"},w(m=I("login.registTip"))?m:{default:()=>[m]})])]),b("div",{class:e.padding},null)])]})}}});export{k as default};
