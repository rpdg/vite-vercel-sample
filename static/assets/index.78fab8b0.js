import{J as F,M as A,a as B,R as u,u as L}from"./index.a49591cc.js";import{M as h}from"./MainSectionHead.b9e7274a.js";import{u as V}from"./CalendarStore.94048e03.js";import{F as d,R as U,g as m,I as z,h as k,T as O,i as G}from"./ant-design-vue.b491a4ce.js";import{h as j}from"./moment.29305b8e.js";import{u as J}from"./vue-i18n.0711e616.js";import{d as P,c as q,w as K,k as e,i as Q,u as T,F as W}from"./@vue.fa05379c.js";import{m as X}from"./@ant-design.8f5596ac.js";import"./vue-router.8ec3c3d8.js";import"./nprogress.35503c85.js";import"./axios.a57df465.js";import"./@babel.288dabcc.js";import"./regenerator-runtime.8463e994.js";import"./omit.js.0925d6dc.js";import"./lodash-es.e58a7599.js";import"./warning.ca82f8e0.js";import"./resize-observer-polyfill.8deb1e21.js";import"./async-validator.1fa0d626.js";import"./scroll-into-view-if-needed.c68eec67.js";import"./compute-scroll-into-view.6058b3be.js";import"./vue-types.6e6d84ba.js";import"./dom-align.f1b5d360.js";import"./@intlify.0eca950e.js";import"./source-map.3671d69c.js";import"./vue.d22487d2.js";import"./@ctrl.2e36ce53.js";const Z="_label_1h9tg_1";var r={label:Z};function p(i){return typeof i=="function"||Object.prototype.toString.call(i)==="[object Object]"&&!Q(i)}var He=P({props:{isOnline:{type:Number,required:!0}},name:"Schedule",setup(i){var y;const{isOnline:v}=i,l=F.get(A);l||alert("error");const{t:n}=J(),{appStore:o}=L(),{authenStore:s}=B(),{calendarStore:R}=V(),a=(y=s.user)==null?void 0:y.timeZone[0];let t=q({topic:n("calendar.schedule_meeting.topic_text",{a:o.isEn?l.company:l.company_cn,b:o.isEn?l.company:l.company_cn}),startDate:j(),endDate:j(),warning:!1,showChooser:!1,destination:null,product:null});D();function D(){t.endDate=j(t.startDate).add(30,"minute")}K(()=>t.startDate,D);function $(){R.addSchedule({IsOnline:v,ToBarcode:l.employee_id,BeginDateTime:t.startDate.format("YYYY-MM-DD HH:mm:00"),EndDateTime:t.endDate.format("YYYY-MM-DD HH:mm:00")})}return()=>{var S,I,w,H,E,C,Y,M,x,N;let f,_,b,g;return e(W,null,[e(h,{redLead:!1},p(f=n("calendar.schedule_meeting.title"))?f:{default:()=>[f]}),e("div",{class:"pd_20 bg_white"},[e(d,null,{default:()=>[v===0&&e(U,{gutter:20},{default:()=>[e(m,{span:12},{default:()=>[e("span",{class:r.label},[n("calendar.schedule_meeting.topic")]),e(d.Item,null,{default:()=>[e(z,{type:"text",disabled:!0,value:t.topic},null)]})]}),e(m,{span:12},{default:()=>[e("span",{class:r.label},[n("calendar.schedule_meeting.my_time_zone")]),e(d.Item,null,{default:()=>[e(z,{disabled:!0,type:"text",value:`${a==null?void 0:a.utc} ${o.isEn?a==null?void 0:a.timezone_en:a==null?void 0:a.timezone_cn}`},null)]})]})]}),e(U,{gutter:20},{default:()=>[e(m,{span:12},{default:()=>[e("span",{class:r.label},[n("calendar.schedule_meeting.start")]),e(d.Item,{name:"startDatetime"},{default:()=>[e(k,{value:t.startDate,"onUpdate:value":c=>t.startDate=c,allowClear:!1},null),e(O,{format:"HH:mm",value:t.startDate,"onUpdate:value":c=>t.startDate=c,allowClear:!1},null)]})]}),e(m,{span:12},{default:()=>[e("span",{class:r.label},[n("calendar.schedule_meeting.end")]),e(d.Item,{name:"endDatetime"},{default:()=>[e(k,{value:t.endDate,"onUpdate:value":c=>t.endDate=c,disabled:!0},null),e(O,{value:t.endDate,"onUpdate:value":c=>t.endDate=c,format:"HH:mm",disabled:!0},null)]})]})]}),e("hr",null,null),e("p",null,[n("calendar.time_zone")," ",`(${a==null?void 0:a.utc}) ${o.isEn?a==null?void 0:a.timezone_en:a==null?void 0:a.timezone_cn}`]),e("p",null,[e(X,null,null),T(" "),t.startDate.format("YYYY-MM-DD HH:mm")])]})]),e(h,null,p(_=n("calendar.schedule_meeting.contactor"))?_:{default:()=>[_]}),e("div",{class:`pd_20 bg_white  ${r.contactListItem}`},[e("img",{src:((S=s.user)==null?void 0:S.roleName)===u.buyer?l.HeadImageUrl:(I=s.user)==null?void 0:I.headImageUrl,class:r.avatar},null),e("div",{class:r.profile},[((w=s.user)==null?void 0:w.roleName)===u.buyer?o.isEn?l.company:l.company_cn:o.isEn?(H=s.user)==null?void 0:H.company:(E=s.user)==null?void 0:E.companyCn])]),e(h,null,p(b=n("calendar.schedule_meeting.buyer"))?b:{default:()=>[b]}),e("div",{class:`pd_20 bg_white  ${r.contactListItem}`},[e("img",{src:((C=s.user)==null?void 0:C.roleName)===u.buyer?(Y=s.user)==null?void 0:Y.headImageUrl:l.HeadImageUrl,class:r.avatar},null),e("div",{class:r.profile},[((M=s.user)==null?void 0:M.roleName)===u.buyer?o.isEn?(x=s.user)==null?void 0:x.company:(N=s.user)==null?void 0:N.companyCn:o.isEn?l.company:l.company_cn])]),e("p",{class:"pd_t_20"},[e(G,{type:"primary",onClick:$,style:{width:"150px"}},p(g=n("calendar.schedule_meeting.schedule"))?g:{default:()=>[g]})])])}}});export{He as default};
