import{s as t,L as T,a as x}from"./index.c0617deb.js";import{F as u,b as g,x as L,g as P,M as _,S as O,y as R}from"./ant-design-vue.a99caae8.js";import{u as f}from"./vue-i18n.df730e9c.js";import{a as F,u as I,d as b}from"./vue-router.85e08d32.js";import{u as U,a as W}from"./index.e9b15ac0.js";import{A as C,O as q}from"./@ant-design.dd8d38e4.js";import{d as j,l as A,c as m,k as e,i as v,B as z}from"./@vue.f0a33739.js";import{S as B}from"./index.0e1c8fb3.js";import"./HomeStore.f53f572b.js";import"./@rpdg.e35df5be.js";import"./@babel.288dabcc.js";import"./regenerator-runtime.8463e994.js";import"./omit.js.0925d6dc.js";import"./lodash-es.647f38fa.js";import"./moment.29305b8e.js";import"./warning.ca82f8e0.js";import"./resize-observer-polyfill.8deb1e21.js";import"./async-validator.1fa0d626.js";import"./scroll-into-view-if-needed.c68eec67.js";import"./compute-scroll-into-view.6058b3be.js";import"./vue-types.6e6d84ba.js";import"./dom-align.f1b5d360.js";import"./@intlify.19fb0a11.js";import"./nprogress.35503c85.js";import"./source-map.e9534891.js";import"./vue.e0a06ef1.js";import"./axios.7aed06b8.js";import"./@ctrl.2e36ce53.js";function w(o){return typeof o=="function"||Object.prototype.toString.call(o)==="[object Object]"&&!v(o)}var E=j({name:"Login_PasswordForm",setup(){const{authenStore:o}=U(),{appStore:n}=W(),p=F(),a=I(),{t:s}=f({useScope:"global"}),c=A(),r=m({username:"",password:"",agreed:!0}),y=m({username:[{required:!0,message:s("login.usernameTip"),trigger:"change"}],password:[{required:!0,message:s("login.passwordTip"),trigger:"change"}]});async function S(){var l,d;try{await c.value.validate(),await o.loginWithPassword(z(r)),a.push((d=(l=p.query)==null?void 0:l.redirect)!=null?d:"/home")}catch(i){let k=i.message;_.error({content:s(k==="Username or password error"?"login.login_error1":"login.login_error2"),okText:s("login.okbtn")})}}return()=>{let l,d;return e(u,{ref:c,model:r,rules:y},{default:()=>[e(u.Item,{name:"username"},{default:()=>[e(g,{value:r.username,"onUpdate:value":i=>r.username=i,placeholder:s("login.username")},{prefix:()=>e(C,{style:"color: rgba(0, 0, 0, 0.25)"},null)})]}),e(u.Item,{name:"password"},{default:()=>[e(g,{type:"password",value:r.password,"onUpdate:value":i=>r.password=i,placeholder:s("login.password")},{prefix:()=>e(q,{style:"color: rgba(0, 0, 0, 0.25)"},null)})]}),e(u.Item,{name:"agreed"},{default:()=>[e(L,{checked:r.agreed,"onUpdate:checked":i=>r.agreed=i},{default:()=>[e(b,{to:n.isEn?"/agreementEn":"/agreement"},w(l=s("login.agreeTip"))?l:{default:()=>[l]})]})]}),e(u.Item,null,{default:()=>[e(P,{type:"primary",block:!0,disabled:!r.agreed,loading:o.loading,onClick:S},w(d=s("login.login"))?d:{default:()=>[d]})]})]})}}});function h(o){return typeof o=="function"||Object.prototype.toString.call(o)==="[object Object]"&&!v(o)}var fe=j({name:"Login",setup(){const{t:o}=f({useScope:"global"}),n=m({loginWithPassword:!0});function p(a){n.loginWithPassword=a}return()=>{let a,s;return e(x,null,{default:()=>[e("div",{class:t.outer},[e("div",{class:t.padding},[e(T,null,null)]),e("div",{class:t.form},[e("h1",null,[o("login.loginForm")]),e("div",{class:t.tabs},[e("div",{class:n.loginWithPassword?t.curTab:"",onClick:()=>{p(!0)}},[e("span",null,[o("login.passwordLogin")])]),e("div",{class:n.loginWithPassword?"":t.curTab,onClick:()=>{p(!1)}},[e("span",null,[o("login.smsLogin")])])]),n.loginWithPassword?e(E,null,null):e(B,null,null)]),e("div",{class:t.padding},[e(O,{size:10},{default:()=>[e("p",{class:t.registTip},[e(b,{to:"/signUp"},h(a=o("login.registTip"))?a:{default:()=>[a]})]),e("p",{class:t.registTip},[e(R,{title:o("login.forgotTips")},h(s=o("login.forgotPassword"))?s:{default:()=>[s]})])]})])])]})}}});export{fe as default};
