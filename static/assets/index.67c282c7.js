import{s as e,L as a}from"./index.module.5d8c2a1b.js";import{a as s}from"./index.02da94d8.js";import{f as l,p as r,u as o,g as n,V as t,r as d,e as i,i as u,a1 as g,I as p,U as c,a2 as m,a3 as f,H as v,q as h,a4 as b,a0 as w}from"./vendor.01f72b52.js";/* empty css              */function y(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!h(e)}var j=l({name:"Login",setup(l,{slots:h}){const j=r(),x=o(),{t:I}=n({useScope:"global"}),T=t(),U=d({username:"",password:"",agreed:!0}),k=d({username:[{required:!0,message:I("login.usernameTip"),trigger:"change"}],password:[{required:!0,message:I("login.passwordTip"),trigger:"change"}]});async function q(){var e,a;try{await T.value.validate(),await s.login(w(U)),x.push(null!=(a=null==(e=j.query)?void 0:e.redirect)?a:"/home")}catch(l){console.log("error",l)}}return()=>{let l,r,o;return i(a,null,{default:()=>[i("div",{class:e.outer},[i("div",{class:e.padding},[i("h3",null,[u("China 2021 plus")])]),i("div",{class:e.form},[i("h1",null,[I("login.loginForm")]),i(g,{ref:T,model:U,rules:k},{default:()=>[i(g.Item,{name:"username"},{default:()=>[i(p,{value:U.username,"onUpdate:value":e=>U.username=e,placeholder:I("login.username")},{prefix:()=>i(c,{style:"color: rgba(0, 0, 0, 0.25)"},null)})]}),i(g.Item,{name:"password"},{default:()=>[i(p,{type:"password",value:U.password,"onUpdate:value":e=>U.password=e,placeholder:I("login.password")},{prefix:()=>i(m,{style:"color: rgba(0, 0, 0, 0.25)"},null)})]}),i(g.Item,{name:"agreed"},{default:()=>[i(f,{checked:U.agreed,"onUpdate:checked":e=>U.agreed=e},{default:()=>[i(v,{to:"/agreement"},y(l=I("login.agreeTip"))?l:{default:()=>[l]})]})]}),i(g.Item,null,{default:()=>[i(b,{type:"primary",block:!0,disabled:!U.agreed,loading:s.loading,onClick:q},y(r=I("login.login"))?r:{default:()=>[r]})]})]}),i("p",{class:e.registTip},[i(v,{to:"/signUp"},y(o=I("login.registTip"))?o:{default:()=>[o]})])]),i("div",{class:e.padding},null)])]})}}});export{j as default};
