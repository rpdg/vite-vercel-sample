var t=Object.defineProperty,e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,l=(e,n,a)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,r=(t,e,n)=>(l(t,"symbol"!=typeof e?e+"":e,n),n);import{B as o,g as i,p as s,l as u}from"./index.d3889a42.js";import{u as p}from"./vue-i18n.bbad715b.js";import{s as d}from"./index.module.8f1aa0e0.js";import{T as c,r as m,F as y,m as h,n as v,q as f,I as g,l as b,u as x}from"./ant-design-vue.b2a91f0d.js";import{a2 as I,c as w,a0 as j,$ as S,aq as q,k as $,r as B,ag as A,I as O,t as U,al as L}from"./@vue.5723de44.js";import"./vue-router.0532eeed.js";import"./moment.29305b8e.js";import"./@ant-design.a9421c3d.js";import"./@ctrl.2e36ce53.js";import"./nprogress.3e43c680.js";import"./axios.a57df465.js";import"./@babel.288dabcc.js";import"./regenerator-runtime.8463e994.js";import"./omit.js.0925d6dc.js";import"./lodash-es.bcdd4346.js";import"./warning.4abaefa0.js";import"./resize-observer-polyfill.8deb1e21.js";import"./async-validator.1fa0d626.js";import"./scroll-into-view-if-needed.c68eec67.js";import"./compute-scroll-into-view.6058b3be.js";import"./vue-types.6e6d84ba.js";import"./dom-align.f1b5d360.js";import"./@intlify.c2b61631.js";import"./source-map.3671d69c.js";import"./vue.3a1030aa.js";var P=Object.defineProperty,R=Object.getOwnPropertyDescriptor,C=(t,e,n,a)=>{for(var l,r=a>1?void 0:a?R(e,n):e,o=t.length-1;o>=0;o--)(l=t[o])&&(r=(a?l(e,n,r):l(r))||r);return a&&r&&P(e,n,r),r};class T extends o{constructor(){super(),r(this,"userInfo"),r(this,"currentLng"),r(this,"reserveType","translation"),r(this,"translateServices"),r(this,"sumApplyPrice",0),r(this,"appliedList"),r(this,"sumAppliedPrice",0),r(this,"pageIndex",0),r(this,"pageSize",10),r(this,"totalRecords",0)}async getUserMoreInfo(){let t=await i("user/GetCurrentUserMoreInfo");return this.userInfo=t[0],t[0]}async getAllTranslations(){let t=await s("/Operation/Getalltranslation",{reservetype:this.reserveType,currentlng:this.currentLng});t.forEach((t=>{t.quantity1=t.quantity2=t.quantity3=0})),this.translateServices=t}caculateSum(){var t;let e=0;null==(t=this.translateServices)||t.forEach((t=>{e+=(t.quantity1+t.quantity2+t.quantity3)*t.unitprice})),this.sumApplyPrice=e}async postResourceApply(t){var r,o;const i=null==(r=this.translateServices)?void 0:r.map((t=>t.itemno)).join("|"),u=null==(o=this.translateServices)?void 0:o.map((t=>`${t.quantity1},${t.quantity2},${t.quantity3}`)).join("|");await s("/Operation/AddTranslation",((t,r)=>{for(var o in r||(r={}))n.call(r,o)&&l(t,o,r[o]);if(e)for(var o of e(r))a.call(r,o)&&l(t,o,r[o]);return t})({reservetype:this.reserveType,currentlng:this.currentLng,itemno:i,itemqty:u},t))}async getAppliedList(t,e){let n=await s("Operation/Gettranslationlistbyuser",{reservetype:this.reserveType,currentlng:this.currentLng,pageIndex:t,pageSize:e||this.pageSize});this.appliedList=n.results,this.pageIndex=t,this.totalRecords=n.totalRecord}async getServiceSum(){var t;let e=await s("Operation/Getservicelisttotalsumbyuser",{pageIndex:0,reservetype:this.reserveType,currentlng:this.currentLng});return this.sumAppliedPrice=(null==(t=e[0])?void 0:t.totalsum)||0,this.sumAppliedPrice}}C([u],T.prototype,"getAllTranslations",1),C([u],T.prototype,"postResourceApply",1),C([u],T.prototype,"getAppliedList",1),C([u],T.prototype,"getServiceSum",1);const k=new T;var z=I({props:{t:{type:Function,required:!0},translateStore:{type:Object,required:!0}},setup(t){const{t:e,translateStore:n}=t;let a=w((()=>({current:n.pageIndex,total:n.totalRecords})));const l=[{title:e("planBooth.translation.standno"),width:100,dataIndex:"standno"},{title:e("planBooth.translation.company"),width:100,dataIndex:"company"},{title:e("planBooth.translation.country"),width:100,dataIndex:"country"},{title:e("planBooth.translation.contactperson"),width:100,dataIndex:"contactperson"},{title:e("planBooth.translation.phonenum"),width:100,dataIndex:"phonenum"},{title:e("planBooth.translation.email"),width:100,dataIndex:"email"},{title:e("planBooth.translation.payment"),width:100,dataIndex:"payment"},{title:e("planBooth.translation.reserveitemno"),width:100,dataIndex:"reserveitemno"},{title:e("planBooth.translation.itemname"),width:100,dataIndex:"itemname"},{title:e("planBooth.translation.description"),width:100,dataIndex:"description"},{title:e("planBooth.translation.unitprice"),width:100,dataIndex:"unitprice"},{title:e("planBooth.translation.reserveqty1"),width:100,dataIndex:"oneday"},{title:e("planBooth.translation.reserveqty2"),width:100,dataIndex:"twoday"},{title:e("planBooth.translation.reserveqty3"),width:100,dataIndex:"threeday"},{title:e("planBooth.translation.hostess"),width:100,dataIndex:"hostess"},{title:e("planBooth.translation.createtime"),width:100,dataIndex:"createtime"},{title:e("planBooth.translation.status"),width:100,fixed:"right",dataIndex:"status",customRender:function({record:t}){return j("b",null,[e(`planBooth.translation.statustype[${t.status}]`)])}}];return()=>j("div",{class:"pd_tb_20"},[j(c,{size:"small",bordered:!0,rowKey:"reserveid",columns:l,loading:n.loading,scroll:{x:1400,y:500},dataSource:n.appliedList,pagination:{current:a.value.current,total:a.value.total,onChange:t=>{n.getAppliedList(t)}}},{title:()=>j("h3",null,[e("planBooth.translation.serviceApplylist")]),footer:()=>j("h3",{class:"text_red text_right"},[e("planBooth.resource.totalsum"),S(": "),n.sumAppliedPrice])})])}}),_=I({props:{t:{type:Function,required:!0},translateStore:{type:Object,required:!0}},setup(t){const{t:e,translateStore:n}=t,a="planBooth.translation",l=[{title:e(`${a}.reserveitemno`),dataIndex:"itemno",width:150},{title:e(`${a}.itemname`),dataIndex:"itemname",width:150},{title:e(`${a}.description`),dataIndex:"description"},{title:e(`${a}.unitprice`),dataIndex:"unitprice",width:150},{title:e(`${a}.reserveqty1`),dataIndex:"itemno",width:100,customRender:({record:t})=>j(m,{value:t.quantity1,"onUpdate:value":e=>t.quantity1=e,min:0,precision:0,size:"small",style:{width:"50px"},onChange:()=>{n.caculateSum()}},null)},{title:e(`${a}.reserveqty2`),dataIndex:"itemno",width:100,customRender:({record:t})=>j(m,{value:t.quantity2,"onUpdate:value":e=>t.quantity2=e,min:0,precision:0,size:"small",style:{width:"50px"},onChange:()=>{n.caculateSum()}},null)},{title:e(`${a}.reserveqty3`),dataIndex:"itemno",width:100,customRender:({record:t})=>j(m,{value:t.quantity3,"onUpdate:value":e=>t.quantity3=e,min:0,precision:0,size:"small",style:{width:"50px"},onChange:()=>{n.caculateSum()}},null)}];return()=>j(c,{dataSource:n.translateServices,rowKey:"itemno",columns:l,scroll:{y:"60vh"},pagination:!1},null)}});function D(t){return"function"==typeof t||"[object Object]"===Object.prototype.toString.call(t)&&!A(t)}var F=I({props:{t:{type:Function,required:!0},translateStore:{type:Object,required:!0}},setup(t){var e,n,a,l,r,o,i,s;const{t:u,translateStore:p}=t,d="planBooth.translation";q((()=>{p.getAppliedList(0),p.getServiceSum()}));const c=$(!1),m=$(),I=B({payment:"CNY",country:null!=(n=null==(e=p.userInfo)?void 0:e.country)?n:"",contactperson:(null==(a=p.userInfo)?void 0:a.firstname)+" "+(null==(l=p.userInfo)?void 0:l.lastname),phonenum:null!=(o=null==(r=p.userInfo)?void 0:r.mobile)?o:"",email:null!=(s=null==(i=p.userInfo)?void 0:i.email)?s:"",hostess:"no"});let A=w((()=>{let t=!0;return t&&(t=I.payment.length>0),t&&(t=I.country.length>0),t&&(t=I.contactperson.length>0),t&&(t=I.phonenum.length>0),t&&(t=I.email.length>0),t}));const L=()=>{c.value=!1},P=async()=>{await p.getAllTranslations(),c.value=!0};function R(){p.sumApplyPrice>0&&x.confirm({content:j("div",null,[u("planBooth.translation.submitinfo"),j("br",null,null),u("planBooth.translation.submitinfo2")]),onOk:async()=>{await p.postResourceApply(U(I)),c.value=!1,p.getAppliedList(0),p.getServiceSum()},onCancel:()=>{}})}return()=>{let t,e,n,a;return j(O,null,[j(y,{ref:m},{default:()=>[j(h,{gutter:20},{default:()=>[j(v,{span:12},{default:()=>[j(y.Item,{label:u(`${d}.payment`),rules:{required:!0,message:""}},{default:()=>[j(f,{value:I.payment,"onUpdate:value":t=>I.payment=t},{default:()=>[j(f.Option,{value:"CNY"},D(t=u(`${d}.paymenttypeD[0]`))?t:{default:()=>[t]}),j(f.Option,{value:"EUR"},D(e=u(`${d}.paymenttypeD[1]`))?e:{default:()=>[e]}),j(f.Option,{value:"USD"},D(n=u(`${d}.paymenttypeD[2]`))?n:{default:()=>[n]})]})]})]}),j(v,{span:12},{default:()=>[j(y.Item,{label:u(`${d}.country`),rules:{required:!0,message:""}},{default:()=>[j(g,{type:"text",value:I.country,"onUpdate:value":t=>I.country=t},null)]})]})]}),j(h,{gutter:20},{default:()=>[j(v,{span:12},{default:()=>[j(y.Item,{label:u(`${d}.contactperson`),rules:{required:!0,message:""}},{default:()=>[j(g,{type:"text",value:I.contactperson,"onUpdate:value":t=>I.contactperson=t},null)]})]}),j(v,{span:12},{default:()=>[j(y.Item,{label:u(`${d}.phonenum`),rules:{required:!0,message:""}},{default:()=>[j(g,{type:"text",value:I.phonenum,"onUpdate:value":t=>I.phonenum=t},null)]})]})]}),j(h,{gutter:20},{default:()=>[j(v,{span:12},{default:()=>[j(y.Item,{label:u(`${d}.email`),rules:{required:!0,message:""}},{default:()=>[j(g,{type:"text",value:I.email,"onUpdate:value":t=>I.email=t},null)]})]})]})]}),j("div",null,[j("span",{class:"text_red"},[j("b",null,[u(`${d}.forminfo`)])]),j("br",null,null),j("span",null,[u(`${d}.forminfo2`)]),j("br",null,null),j("span",null,[u(`${d}.forminfo3`)]),j("br",null,null),j("span",null,[u(`${d}.forminfo4`)]),j("br",null,null),j("span",null,[u(`${d}.forminfo5`)]),j("br",null,null),j("span",null,[u(`${d}.forminfo6`)]),j("br",null,null),j("span",null,[u(`${d}.forminfo7`)]),j("br",null,null),j("span",null,[u(`${d}.forminfo8`)]),j("br",null,null),j("span",null,[u(`${d}.forminfo9`)]),j("br",null,null),j("span",null,[u(`${d}.forminfo10`)]),j("br",null,null),j("span",null,[u(`${d}.forminfo11`)]),j("br",null,null),j("br",null,null),j("p",{class:"text_center"},[j(b,{type:"primary",onClick:P,disabled:!A.value,loading:p.loading},D(a=u(`${d}.serviceApply`))?a:{default:()=>[a]})])]),j(x,{visible:c.value,"onUpdate:visible":t=>c.value=t,width:1080,centered:!0,title:u(`${d}.serviceApplylist`)},{default:()=>[c.value&&j(_,{t:u,translateStore:p},null)],footer:()=>{let t,e;return j(O,null,[j("b",{class:"text_red",style:{marginRight:"3em"}},[u("planBooth.resource.totalsum"),S(": "),p.sumApplyPrice]),j(b,{key:"back",onClick:L},D(t=u("common.cancel"))?t:{default:()=>[t]}),j(b,{key:"submit",type:"primary",onClick:R},D(e=u("common.submit"))?e:{default:()=>[e]})])}})])}}}),E=I({setup(){const{t:t,locale:e}=p();let n="en-US"===e.value?"en":"cn";const{translateStore:a}=(l=n,k.currentLng=l,{translateStore:k});var l;return L((()=>{a.getUserMoreInfo()})),()=>j(O,null,[j("div",{class:d.formInfoSection},[j("img",{src:"/assets/translate.70bb2d53.jpg"},null),j("div",null,[j("h2",{class:"text_red"},[t("planBooth.translation.formtitle")]),j("div",null,[t("planBooth.translation.info1")]),j("div",null,[t("planBooth.translation.info2")]),j("div",null,[t("planBooth.translation.info3",{email:"Frederic.raposo@aimresult.com"})])])]),a.userInfo&&j(F,{t:t,translateStore:a},null),j(z,{t:t,translateStore:a},null)])}});export default E;
