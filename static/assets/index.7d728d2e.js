import{d as Q,c as W,k as e,i as X,t as Z,u as ee,F as ae,z as te}from"./@vue.ca0c2fb5.js";import{u as se,M as re,R as p,S as f,a as le,r as ne}from"./index.fb345625.js";import{M as S}from"./MainSectionHead.713b3d1f.js";import{u as oe}from"./CalendarStore.7b206b87.js";import{J as de}from"./@rpdg.9741c2f9.js";import{F as u,l as G,o as g,b as J,p as P,T as q,f as ie,m as _}from"./ant-design-vue.fcf1ac88.js";import{h as m}from"./moment.29305b8e.js";import{u as ce}from"./vue-i18n.1e3f796f.js";import{s as i}from"./index.module.6e348a91.js";import{s as b}from"./index.module.4e44b35d.js";import{d as h}from"./avator_red.2a3a1020.js";import{m as ue}from"./@ant-design.45c2fd2e.js";import"./nprogress.35503c85.js";import"./vue-router.b7316d96.js";import"./axios.7aed06b8.js";import"./@babel.a04268fa.js";import"./regenerator-runtime.8463e994.js";import"./omit.js.0925d6dc.js";import"./lodash-es.647f38fa.js";import"./warning.ca82f8e0.js";import"./resize-observer-polyfill.8deb1e21.js";import"./async-validator.1fa0d626.js";import"./scroll-into-view-if-needed.c68eec67.js";import"./compute-scroll-into-view.6058b3be.js";import"./vue-types.6e6d84ba.js";import"./dom-align.f1b5d360.js";import"./@intlify.19fb0a11.js";import"./source-map.e9534891.js";import"./vue.08638ec1.js";import"./@ctrl.2e36ce53.js";function v(c){return typeof c=="function"||Object.prototype.toString.call(c)==="[object Object]"&&!X(c)}var Le=Q({props:{isOnline:{type:Number,required:!0}},name:"Schedule",setup(c){var U,x,E;const{t:r}=ce(),{appStore:n}=le(),{authenStore:t}=se(),{calendarStore:T}=oe(),a=(U=t.user)==null?void 0:U.timeZone[0],{isOnline:H}=c,s=de.get(re),w={from:m((x=n.exhibitionDate)==null?void 0:x.onlineBeginDateTime).startOf("day"),to:m((E=n.exhibitionDate)==null?void 0:E.onlineEndDateTime).endOf("day")},j=m().startOf("day").add(1,"day");let l=W({topic:r("calendar.schedule_meeting.topic_text",{a:n.isEn?s.company:s.company_cn,b:n.isEn?s.company:s.company_cn}),startDate:j.diff(m(w.from),"day")>=0?j:m(w.from).add(1,"day"),endDate:j,warning:!1,showChooser:!1,destination:null,product:null});async function K(){try{await T.addSchedule({IsOnline:H,ToBarcode:s.employee_id,BeginDateTime:l.startDate.format("YYYY-MM-DD HH:mm:00"),EndDateTime:l.endDate.format("YYYY-MM-DD HH:mm:00")})?(_.success(r("common.success")),ne.push("/calendar")):_.error(r("common.failed"))}catch(o){switch(o.message){case"message_error_01":case"message_error_02":case"message_error_03":case"error_msg_001":case"error_msg_002":case"error_msg_003":_.error(r(`calendar.invite_errors.${o.message}`));break;default:_.error(o.message)}}}return()=>{var C,Y,M,N,O,z,$,k,A,R,B,F,L,V;let o,y,D,I;return e(ae,null,[e(S,{redLead:!1},v(o=r("calendar.schedule_meeting.title"))?o:{default:()=>[o]}),e("div",{class:"pd_20 bg_white"},[e(u,null,{default:()=>[H===1&&e(G,{gutter:20},{default:()=>[Z(e(g,{span:12},{default:()=>[e("span",{class:b.label},[r("calendar.schedule_meeting.topic")]),e(u.Item,null,{default:()=>[e(J,{type:"text",disabled:!0,value:l.topic},null)]})]}),[[te,!1]]),e(g,{span:12},{default:()=>[e("span",{class:b.label},[r("calendar.schedule_meeting.my_time_zone")]),e(u.Item,null,{default:()=>[e(J,{disabled:!0,type:"text",value:`${a==null?void 0:a.utc} ${n.isEn?a==null?void 0:a.timezone_en:a==null?void 0:a.timezone_cn}`},null)]})]})]}),e(G,{gutter:20},{default:()=>[e(g,{span:12},{default:()=>[e("span",{class:b.label},[r("calendar.schedule_meeting.start")]),e(u.Item,{name:"startDatetime"},{default:()=>[e(P,{value:l.startDate,"onUpdate:value":d=>l.startDate=d,allowClear:!1},null),e(q,{format:"HH:mm",value:l.startDate,"onUpdate:value":d=>l.startDate=d,minuteStep:30,allowClear:!1},null)]})]}),e(g,{span:12},{default:()=>[e("span",{class:b.label},[r("calendar.schedule_meeting.end")]),e(u.Item,{name:"endDatetime"},{default:()=>[e(P,{value:l.endDate,"onUpdate:value":d=>l.endDate=d,disabled:!0},null),e(q,{value:l.endDate,"onUpdate:value":d=>l.endDate=d,format:"HH:mm",disabled:!0},null)]})]})]}),e("hr",null,null),e("p",null,[r("calendar.time_zone")," ",`(${a==null?void 0:a.utc}) ${n.isEn?a==null?void 0:a.timezone_en:a==null?void 0:a.timezone_cn}`]),e("p",null,[e(ue,null,null),ee(" "),l.startDate.format("YYYY-MM-DD HH:mm")]),e("p",{style:"color:red;"},[r("calendar.schedule_meeting.goodtips")])]})]),e(S,null,v(y=r("calendar.schedule_meeting.contactor"))?y:{default:()=>[y]}),e("div",{class:`pd_20 bg_white  ${i.contactListItem}`},[e("img",{src:((C=t.user)==null?void 0:C.roleName)===p.buyer?s.HeadImageUrl!=null&&s.HeadImageUrl!=""?f+s.HeadImageUrl:h:((Y=t.user)==null?void 0:Y.headImageUrl)!=null&&((M=t.user)==null?void 0:M.headImageUrl)!=""?f+((N=t.user)==null?void 0:N.headImageUrl):h,class:i.avatar},null),e("div",{class:i.profile},[((O=t.user)==null?void 0:O.roleName)===p.buyer?n.isEn?s.company:s.company_cn:n.isEn?(z=t.user)==null?void 0:z.company:($=t.user)==null?void 0:$.companyCn])]),e(S,null,v(D=r("calendar.schedule_meeting.buyer"))?D:{default:()=>[D]}),e("div",{class:`pd_20 bg_white  ${i.contactListItem}`},[e("img",{src:((k=t.user)==null?void 0:k.roleName)===p.buyer?((A=t.user)==null?void 0:A.headImageUrl)!=null&&((R=t.user)==null?void 0:R.headImageUrl)!=""?f+((B=t.user)==null?void 0:B.headImageUrl):h:s.HeadImageUrl!=null&&s.HeadImageUrl!=""?f+s.HeadImageUrl:h,class:i.avatar},null),e("div",{class:i.profile},[((F=t.user)==null?void 0:F.roleName)===p.buyer?n.isEn?(L=t.user)==null?void 0:L.company:(V=t.user)==null?void 0:V.companyCn:n.isEn?s.company:s.company_cn])]),e("p",{class:"pd_t_20"},[e(ie,{type:"primary",onClick:K,style:{width:"150px"}},v(I=r("calendar.schedule_meeting.schedule"))?I:{default:()=>[I]})])])}}});export{Le as default};
