import{M}from"./MainSectionHead.b9e7274a.js";import{u as T,a as I}from"./index.0d78e88c.js";import{u as w}from"./CalendarStore.2f03bab1.js";import{R as k,h as _,F as D,i as h,T as u,e as O,m,j,k as z,l as H,n as A}from"./ant-design-vue.034afe85.js";import{h as d}from"./moment.29305b8e.js";import{u as S}from"./vue-i18n.0711e616.js";import{s as g}from"./index.module.e1039702.js";import{P as U,b as P}from"./@ant-design.8f5596ac.js";import{d as x,c as C,k as e,u as v,i as B,F as $}from"./@vue.fa05379c.js";import"./vue-router.8ec3c3d8.js";import"./nprogress.35503c85.js";import"./axios.a57df465.js";import"./@babel.288dabcc.js";import"./regenerator-runtime.8463e994.js";import"./omit.js.0925d6dc.js";import"./lodash-es.e58a7599.js";import"./warning.ca82f8e0.js";import"./resize-observer-polyfill.8deb1e21.js";import"./async-validator.1fa0d626.js";import"./scroll-into-view-if-needed.c68eec67.js";import"./compute-scroll-into-view.6058b3be.js";import"./vue-types.6e6d84ba.js";import"./dom-align.f1b5d360.js";import"./@intlify.0eca950e.js";import"./source-map.3671d69c.js";import"./vue.d22487d2.js";import"./@ctrl.2e36ce53.js";var V=x({setup(){var c,p;const{t:n}=S(),{appStore:s}=T(),{calendarStore:i}=w(),o={from:d((c=s.exhibitionDate)==null?void 0:c.beginDate).startOf("day"),to:d((p=s.exhibitionDate)==null?void 0:p.endDate).endOf("day")},y=l=>l<o.from||l>o.to;let a=C({startDate:d(o.from),endDate:d(o.from).add(30,"minute")});async function f(){let l={IsOnline:0,Type:0,BeginDateTime:a.startDate.format("YYYY-MM-DD HH:mm"),EndDateTime:a.endDate.format("YYYY-MM-DD HH:mm"),WeekValue:""};try{await i.addBlockTime(l)?(m.success(n("common.success")),i.getBlockTime(0)):m.error(n("common.failed"))}catch(r){switch(r.message){case"message_error_01":m.error(n(`calendar.blocktime_errors[${r.message}]`));break;default:m.error(r.message)}}}return()=>e(D,null,{default:()=>[e(k,{gutter:20},{default:()=>[e(_,{span:12},{default:()=>[e("span",{class:g.label},[n("calendar.schedule_meeting.start")]),e(D.Item,{name:"startDatetime"},{default:()=>[e(h,{disabledDate:y,value:a.startDate,"onUpdate:value":l=>a.startDate=l,allowClear:!1},null),e(u,{format:"HH:mm",value:a.startDate,"onUpdate:value":l=>a.startDate=l,allowClear:!1},null)]})]}),e(_,{span:12},{default:()=>[e("span",{class:g.label},[n("calendar.schedule_meeting.end")]),e(D.Item,{name:"endDatetime"},{default:()=>[e(h,{disabledDate:y,value:a.endDate,"onUpdate:value":l=>a.endDate=l,allowClear:!1},null),e(u,{value:a.endDate,"onUpdate:value":l=>a.endDate=l,format:"HH:mm",allowClear:!1},null)]})]})]}),e("hr",null,null),e(O,{type:"primary",onClick:f},{default:()=>[e(U,null,null),v(" "),n("calendar.btn_add_block_time")]})]})}});function Y(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!B(n)}var E=x({setup(){var c,p;const{t:n}=S(),{calendarStore:s}=w(),{appStore:i}=T(),o={from:d((c=i.exhibitionDate)==null?void 0:c.onlineBeginDateTime).startOf("day"),to:d((p=i.exhibitionDate)==null?void 0:p.onlineEndDateTime).endOf("day")},y=l=>l<o.from||l>o.to;let a=C({startDate:d(o.from),endDate:d(o.from),type:1,weekDay:1,weekDays:d.weekdays().map((l,r)=>({value:r,label:l}))});async function f(){let l={IsOnline:1,Type:a.type,BeginDateTime:a.startDate.format("YYYY-MM-DD HH:mm"),EndDateTime:a.endDate.format("YYYY-MM-DD HH:mm"),WeekValue:a.type===2?a.weekDay.toString():""};try{await s.addBlockTime(l)?(m.success(n("common.success")),s.getBlockTime(1)):m.error(n("common.failed"))}catch(r){switch(r.message){case"message_error_01":m.error(n(`calendar.schedule_meeting[${r.message}]`));break;default:m.error(r.message)}}}return()=>{let l,r,b;return e(D,null,{default:()=>[e(j.Group,{value:a.type,"onUpdate:value":t=>a.type=t,style:"width: 100%;"},{default:()=>[e(k,{gutter:20},{default:()=>[e(_,{span:12},{default:()=>[e("p",{class:g.label},[e(j,{value:1},Y(l=n("calendar.blockTime.every_day"))?l:{default:()=>[l]})]),e(D.Item,{name:"startDatetime"},{default:()=>[e(k,null,{default:()=>[e(u,{format:"HH:mm",value:a.startDate,"onUpdate:value":t=>a.startDate=t,allowClear:!1},null),v("\xA0 \xA0"),e(u,{format:"HH:mm",value:a.endDate,"onUpdate:value":t=>a.endDate=t,allowClear:!1},null)]})]})]}),e(_,{span:12},{default:()=>[e("p",{class:g.label},[e(j,{value:2,class:"mg_r_20"},Y(r=n("calendar.blockTime.every_week_repeat"))?r:{default:()=>[r]}),e(z,{size:"small",style:"width:100px",value:a.weekDay,"onUpdate:value":t=>a.weekDay=t,options:a.weekDays},null)]),e(D.Item,{name:"endDatetime"},{default:()=>[e(k,null,{default:()=>[e(u,{value:a.startDate,"onUpdate:value":t=>a.startDate=t,format:"HH:mm",allowClear:!1},null),v("\xA0 \xA0"),e(u,{value:a.endDate,"onUpdate:value":t=>a.endDate=t,format:"HH:mm",allowClear:!1},null)]})]})]})]}),e(k,{gutter:20},{default:()=>[e(_,{span:20},{default:()=>[e("p",{class:g.label},[e(j,{value:0},Y(b=n("calendar.blockTime.special_day"))?b:{default:()=>[b]})]),e(D.Item,{name:"startDatetime"},{default:()=>[e(k,null,{default:()=>[e(h,{disabledDate:y,value:a.startDate,"onUpdate:value":t=>a.startDate=t,allowClear:!1},null),e(u,{format:"HH:mm",value:a.startDate,"onUpdate:value":t=>a.startDate=t,allowClear:!1},null),v("\xA0 \xA0"),e(u,{format:"HH:mm",value:a.endDate,"onUpdate:value":t=>a.endDate=t,allowClear:!1},null)]})]})]})]})]}),e("hr",null,null),e(O,{type:"primary",onClick:f},{default:()=>[e(U,null,null),v(" "),n("calendar.btn_add_block_time")]})]})}}});function R(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!B(n)}var De=x({props:{isOnline:{type:Number,required:!0}},setup(n){var l;const{t:s}=S(),{calendarStore:i}=w(),{appStore:o}=T(),{authenStore:y}=I(),a=(l=y.user)==null?void 0:l.timeZone[0];let f=C({activeTab:n.isOnline});c();function c(){i.getBlockTime(f.activeTab)}async function p(r){A.confirm({content:e("div",null,[s("calendar.blockTime.comfirm_title")]),onOk:async()=>{await i.delBlockTime(r)&&c()},okText:s("calendar.blockTime.confirm_okbtn"),onCancel:()=>{},cancelText:s("calendar.blockTime.confirm_cancelbtn")})}return()=>{var b;let r;return e($,null,[e(M,{redLead:!1},R(r=s("calendar.blockTime.title"))?r:{default:()=>[r]}),e("p",null,[`${s("calendar.time_zone")}: ${a==null?void 0:a.utc} 
                ${o.isEn?a==null?void 0:a.timezone_en:a==null?void 0:a.timezone_cn}`]),e("p",{class:"text_red text_bold"},[s("calendar.blockTime.description")]),e("div",{class:"bg_white pd_20"},[e(H,{activeKey:f.activeTab,"onUpdate:activeKey":t=>f.activeTab=t,onChange:c},{default:()=>[e(H.TabPane,{key:0,tab:s("calendar.blockTime.tab_phy")},{default:()=>[e(V,null,null)]}),e(H.TabPane,{key:1,tab:s("calendar.blockTime.tab_vir")},{default:()=>[e(E,null,null)]})]})]),(b=i.blockTimeSlots)==null?void 0:b.map(t=>e("div",{class:"bg_white pd_20 mg_tb_20",key:t.id},[e("div",{class:"cursor_hand fl_right",onClick:()=>{p(t.id)}},[e(P,null,null)]),e("p",null,[s("calendar.schedule_meeting.my_time_zone")]),e("p",null,[o.isEn?t.timezone_en:t.timezone_cn]),e("p",null,[s(`calendar.blockTime.type[${t.type}]`)," ",t.type===2?d.weekdays()[~~t.week_value]:"",v(" "),t.begindate,v(" ~")," ",t.type===0?t.enddate.substr(11,5):t.enddate])]))])}}});export{De as default};
