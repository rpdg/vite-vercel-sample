import{n as V,m as E,F as G,b as T,J,l as Q,k as W,j as X,U as Y,M as Z,f as H}from"./ant-design-vue.5d68287d.js";import{_ as K,p as B,b as x,g as ee}from"./index.b3532ad9.js";import{f as ae}from"./@rpdg.2a67823e.js";import{u as te}from"./vue-i18n.97207468.js";import{s as ne}from"./index.module.c389607c.js";import{V as se}from"./@ant-design.f49dba90.js";import{d as le,l as v,c as R,o as oe,w as ie,O as re,S as L,U as t,Y as o,u as f,$ as ue,k as n,Q as l,F as pe,B as de,W as me,X as ce,R as q,Z as fe,a0 as be}from"./@vue.c3fad188.js";import"./@babel.288dabcc.js";import"./regenerator-runtime.8463e994.js";import"./omit.js.0925d6dc.js";import"./lodash-es.647f38fa.js";import"./moment.29305b8e.js";import"./warning.ca82f8e0.js";import"./resize-observer-polyfill.8deb1e21.js";import"./async-validator.1fa0d626.js";import"./scroll-into-view-if-needed.c68eec67.js";import"./compute-scroll-into-view.6058b3be.js";import"./vue-types.6e6d84ba.js";import"./dom-align.f1b5d360.js";import"./vue-router.c781243b.js";import"./nprogress.35503c85.js";import"./axios.7aed06b8.js";import"./@intlify.19fb0a11.js";import"./source-map.e9534891.js";import"./vue.f1721d35.js";import"./@ctrl.2e36ce53.js";var ve="/assets/booth.47c63527.jpg";const ge=le({components:{UploadOutlined:se},setup(){const{t:e,locale:r}=te(),h="planBooth.boothDesign";let C=r.value==="en-US"?"en":"cn",U=0;const I=v(),p=v(!1),s=R({standno:"",exhibitor:"",company:"",email:"",contactperson:"",contacttel:"",designremark:"",designpic:"",icon:[]}),b={exhibitor:[{required:!0,message:""}],email:[{required:!0,message:""}],contactperson:[{required:!0,message:""}],contacttel:[{required:!0,message:""}],icon:[{required:!0,message:""}]},d=v([]);let m=R({results:[]});const y=v(""),j=v(""),$=v("");function _(a){s.standno=a.standno,s.exhibitor=a.exhibitor,s.company="",s.email=a.email,s.contactperson=a.contactperson,s.contacttel=a.contacttel,s.designremark=a.designremark,s.designpic=a.designpic,d.value.length=0,s.icon.length=0,a.designpic&&a.designpic.split("|").forEach((g,S)=>{d.value.push({uid:S,url:g,status:"done"}),s.icon.push(g)})}const w=v(!1);oe(u);function u(){p.value=!0,B("/Operation/Getboothdesignlistbyuser",{currentlng:C,pageIndex:U,pageSize:10}).then(a=>{p.value=!1,m.results=a.results,z()})}function z(){if(m.results.length>1){let a=!1;const c=["contactperson","contacttel","designpic","designremark","email","standno"];for(const g of c)if(g!=="boothid"&&(a=m.results[0][g]!==m.results[1][g],a))break;a&&V.success({message:e(`${h}.submitSuccess`),placement:"topRight"})}else m.results.length===1&&V.success({message:e(`${h}.submitSuccess`),placement:"topRight"})}ie(()=>m.results,()=>{if(m.results[0]){let a=m.results[0];switch(y.value=a.createtime?`${a.createtime}   ${e(`${h}.statustype[0]`)}`:"",j.value=a.approvaltime?`${a.approvaltime}   ${e(`${h}.statustype[${a.status}]`)}`:"",a.status){case"1":$.value="green";break;case"2":$.value="red";break;default:$.value=""}_(a)}else ee("user/GetCurrentUserMoreInfo").then(a=>{var c={exhibitor:"",email:"",contacttel:""};c.exhibitor=a[0].firstname+" "+a[0].lastname,c.email=a[0].email,c.contacttel=a[0].mobile,_(c)})});const k=v(!1),F=v(""),N=()=>{k.value=!1},O=async a=>{!a.url&&!a.preview&&(a.preview=await ae(a.originFileObj)),F.value=a.url||a.preview,k.value=!0},A=a=>{p.value=!0;let{file:c}=a;if(c.response){p.value=!1;let g=c.response.data[0].downloadLink,S=d.value.find(P=>P.uid===c.uid);S&&(S.url=g)}else c.status==="removed"&&(p.value=!1)},D=()=>{p.value=!0,s.icon.length=0,d.value.forEach(a=>{s.icon.push(a.url)}),s.designpic=s.icon.join("|"),s.exhibitor===""||s.email===""||s.contactperson===""||s.contacttel===""||d.value.length===0?(E.info(e(`${h}.alertinfo`)),p.value=!1):B("Operation/Addboothdesign",de(s)).then(a=>{a&&u(),p.value=!1})},M=()=>{var a;_((a=m.results[0])!=null?a:{})};return{handlePreview:O,approvalStatusColor:$,previewVisible:k,fileList:d,formRef:I,rules:b,namespace:h,previewImage:F,data:m,handleCancel:N,handleChange:A,styles:ne,submitStatus:y,t:e,approvalStatus:j,formState:s,handleSubmit:D,loading:p,headers:{Authorization:x.token},resetForm:M,disabled:w}}}),i=e=>(me("data-v-394c41e6"),e=e(),ce(),e),he=i(()=>t("img",{src:ve},null,-1)),$e={class:"text_red"},_e=i(()=>t("br",null,null,-1)),ye={style:{"font-weight":"bold",color:"red"}},je=i(()=>t("br",null,null,-1)),Se=i(()=>t("br",null,null,-1)),we=i(()=>t("br",null,null,-1)),ke=i(()=>t("br",null,null,-1)),Ce=i(()=>t("br",null,null,-1)),Ue=i(()=>t("br",null,null,-1)),Ie=i(()=>t("br",null,null,-1)),Fe=i(()=>t("br",null,null,-1)),Ve={class:"bg_white pd_20"},Be={key:0},Re={class:"ant-upload-text"},Le=["src"],qe={class:"text_gray pd_b_20"},ze=i(()=>t("br",null,null,-1)),Ne=i(()=>t("br",null,null,-1)),Oe=i(()=>t("br",null,null,-1)),Ae=i(()=>t("br",null,null,-1)),De=i(()=>t("br",null,null,-1)),Me=i(()=>t("br",null,null,-1)),Pe=i(()=>t("br",null,null,-1)),Ee=i(()=>t("br",null,null,-1)),Ge=i(()=>t("br",null,null,-1)),Te={class:"text_center",style:{width:"100%"}};function Je(e,r,h,C,U,I){const p=T,s=J,b=Q,d=W,m=X,y=re("upload-outlined"),j=Y,$=Z,_=H,w=G;return q(),L(pe,null,[t("div",{class:ue(e.styles.formInfoSection)},[he,t("div",null,[t("h2",$e,o(e.t(`${e.namespace}.formtitle`)),1),t("div",null,[f(o(e.t(`${e.namespace}.formcontact1`))+" ",1),_e,f(" "+o(e.t(`${e.namespace}.formcontact2`)),1),t("span",ye,o(e.t(`${e.namespace}.formcontact3`)),1),je,f(" "+o(e.t(`${e.namespace}.formcontact4`))+" ",1),Se,f(" "+o(e.t(`${e.namespace}.formcontact5`))+" ",1),we,f(" "+o(e.t(`${e.namespace}.formcontact6`))+" ",1),ke,f(" "+o(e.t(`${e.namespace}.formcontact7`))+" ",1),Ce,f(" "+o(e.t(`${e.namespace}.formcontact8`))+" ",1),Ue,f(" "+o(e.t(`${e.namespace}.formcontact9`))+" ",1),Ie,f(" "+o(e.t(`${e.namespace}.formcontact10`))+" ",1),Fe])])],2),t("div",Ve,[n(w,{ref:"formRef",model:e.formState,rules:e.rules},{default:l(()=>[n(d,{gutter:20},{default:l(()=>[n(b,{span:12},{default:l(()=>[n(s,{name:"standno",label:e.t(`${e.namespace}.booth`)},{default:l(()=>[n(p,{value:e.formState.standno,"onUpdate:value":r[0]||(r[0]=u=>e.formState.standno=u)},null,8,["value"])]),_:1},8,["label"])]),_:1}),n(b,{span:12},{default:l(()=>[n(s,{name:"exhibitor",label:e.t(`${e.namespace}.exhibitor`)},{default:l(()=>[n(p,{value:e.formState.exhibitor,"onUpdate:value":r[1]||(r[1]=u=>e.formState.exhibitor=u)},null,8,["value"])]),_:1},8,["label"])]),_:1})]),_:1}),n(d,{gutter:20},{default:l(()=>[n(b,{span:12},{default:l(()=>[n(s,{name:"email",label:e.t(`${e.namespace}.email`)},{default:l(()=>[n(p,{value:e.formState.email,"onUpdate:value":r[2]||(r[2]=u=>e.formState.email=u)},null,8,["value"])]),_:1},8,["label"])]),_:1}),n(b,{span:12},{default:l(()=>[n(s,{name:"contactperson",label:e.t(`${e.namespace}.chargepeople`)},{default:l(()=>[n(p,{value:e.formState.contactperson,"onUpdate:value":r[3]||(r[3]=u=>e.formState.contactperson=u)},null,8,["value"])]),_:1},8,["label"])]),_:1})]),_:1}),n(d,{gutter:20},{default:l(()=>[n(b,{span:12},{default:l(()=>[n(s,{name:"contacttel",label:e.t(`${e.namespace}.chargetel`)},{default:l(()=>[n(p,{value:e.formState.contacttel,"onUpdate:value":r[4]||(r[4]=u=>e.formState.contacttel=u)},null,8,["value"])]),_:1},8,["label"])]),_:1}),n(b,{span:12},{default:l(()=>[n(s,{name:"designremark",label:e.t(`${e.namespace}.remark`)},{default:l(()=>[n(m,{value:e.formState.designremark,"onUpdate:value":r[5]||(r[5]=u=>e.formState.designremark=u),rows:2},null,8,["value"])]),_:1},8,["label"])]),_:1})]),_:1}),n(d,null,{default:l(()=>[n(s,{name:"icon",label:" "},{default:l(()=>[n(j,{action:"/api/upload/files",accept:"image/jpg, image/jpeg, image/png, image/tif, image/gif",multiple:"","list-type":"picture-card","file-list":e.fileList,"onUpdate:file-list":r[6]||(r[6]=u=>e.fileList=u),headers:e.headers,onPreview:e.handlePreview,onChange:e.handleChange},{default:l(()=>[e.fileList.length<8?(q(),L("div",Be,[n(y),t("div",Re,o(e.t(`${e.namespace}.upload`))+" "+o(e.t(`${e.namespace}.pic${e.fileList.length+1}`)),1)])):fe("",!0)]),_:1},8,["file-list","headers","onPreview","onChange"]),n($,{visible:e.previewVisible,footer:null,onCancel:e.handleCancel},{default:l(()=>[t("img",{alt:"example",style:{width:"100%"},src:e.previewImage},null,8,Le)]),_:1},8,["visible","onCancel"])]),_:1})]),_:1}),n(d,{gutter:20},{default:l(()=>[n(b,{span:12},{default:l(()=>[n(s,{label:e.t(`${e.namespace}.applyinfo`)},{default:l(()=>[f(o(e.submitStatus),1)]),_:1},8,["label"])]),_:1}),n(b,{span:12},{default:l(()=>[n(s,{label:e.t(`${e.namespace}.approvalinfo`)},{default:l(()=>[t("span",{style:be({color:e.approvalStatusColor})},o(e.approvalStatus),5)]),_:1},8,["label"])]),_:1})]),_:1}),n(d,null,{default:l(()=>[t("div",qe,[t("span",null,o(e.t(`${e.namespace}.info1`)),1),ze,t("span",null,o(e.t(`${e.namespace}.info2`)),1),Ne,t("span",null,o(e.t(`${e.namespace}.info3`)),1),Oe,t("span",null,o(e.t(`${e.namespace}.info4`,{email:"cherry.gong@syma.com.cn"})),1),Ae,t("span",null,o(e.t(`${e.namespace}.info5`)),1),De,t("span",null,o(e.t(`${e.namespace}.info6`)),1),Me,t("span",null,o(e.t(`${e.namespace}.info7`,{email:"crystal.jiang@syma.com.cn"})),1),Pe,t("span",null,o(e.t(`${e.namespace}.info8`)),1),Ee,t("span",null,o(e.t(`${e.namespace}.info9`)),1),Ge])]),_:1}),n(d,{gutter:20},{default:l(()=>[t("p",Te,[n(_,{type:"primary",onClick:e.handleSubmit,loading:e.loading,disabled:e.disabled},{default:l(()=>[f(o(e.t("boothactivity.sendApply")),1)]),_:1},8,["onClick","loading","disabled"]),n(_,{style:{"margin-left":"1em"},onClick:e.resetForm,disabled:e.loading},{default:l(()=>[f(o(e.t("boothactivity.reset")),1)]),_:1},8,["onClick","disabled"])])]),_:1})]),_:1},8,["model","rules"])])],64)}var ha=K(ge,[["render",Je],["__scopeId","data-v-394c41e6"]]);export{ha as default};
