var q=Object.defineProperty;var z=(n,t,i)=>t in n?q(n,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[t]=i;var v=(n,t,i)=>(z(n,typeof t!="symbol"?t+"":t,i),i);import{p as h}from"./index.701896b1.js";import{B as D,l as j}from"./@rpdg.bcb9de75.js";import{F as l,j as u,k as s,b,E as Y,p as R,l as _,W as A,x as B,g as x,n as G,G as N}from"./ant-design-vue.3fff3ad8.js";import{u as S}from"./vue-i18n.28a5a3dd.js";import{s as V}from"./index.module.c8493ae7.js";import{d as I,l as W,c as k,k as e,i as F,u as U,F as O,o as E,j as K}from"./@vue.92a87908.js";import"./vue-router.2704beb0.js";import"./moment.29305b8e.js";import"./@ant-design.754a3742.js";import"./@ctrl.2e36ce53.js";import"./nprogress.35503c85.js";import"./axios.7aed06b8.js";import"./@babel.288dabcc.js";import"./regenerator-runtime.8463e994.js";import"./omit.js.0925d6dc.js";import"./lodash-es.647f38fa.js";import"./warning.ca82f8e0.js";import"./resize-observer-polyfill.8deb1e21.js";import"./async-validator.1fa0d626.js";import"./scroll-into-view-if-needed.c68eec67.js";import"./compute-scroll-into-view.6058b3be.js";import"./vue-types.6e6d84ba.js";import"./dom-align.f1b5d360.js";import"./@intlify.19fb0a11.js";import"./source-map.e9534891.js";import"./vue.18c06692.js";var H=Object.defineProperty,J=Object.getOwnPropertyDescriptor,P=(n,t,i,o)=>{for(var a=o>1?void 0:o?J(t,i):t,p=n.length-1,c;p>=0;p--)(c=n[p])&&(a=(o?c(t,i,a):c(a))||a);return o&&a&&H(t,i,a),a};class M extends D{constructor(){super();v(this,"currentRecord");v(this,"list");v(this,"pageIndex");v(this,"pageSize");v(this,"totalRecords");this.pageIndex=0,this.totalRecords=0,this.pageSize=10}async fetchList(t,i){let o=await h("/operation/Getletterlistbyuser",{pageIndex:t,pageSize:i||this.pageSize});this.list=o.results,this.pageIndex=t,this.totalRecords=o.totalRecord}async addLetter(t){return await h("Operation/AddLetter",t)}async downloadPdf(t){let i=await h("Operation/CreatePDF",{letterid:t});window.open(i.filename,"_blank")}}P([j],M.prototype,"fetchList",1);P([j],M.prototype,"addLetter",1);P([j],M.prototype,"downloadPdf",1);const Q=new M,C=function(){return{invitationStore:Q}};var X="/assets/pic.ff892424.jpg";function T(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!F(n)}const Z=l.useForm;var ee=I({name:"InvitationForm",setup(){const n="YYYY-MM-DD",{t}=S(),{invitationStore:i}=C(),o=W(),a=k({countryname:"",username:"",position:"",gender:"Male",dateofbirth:"",nationality:"",passportnumber:"",passportvalidity:"",employer:"",starttime:"",stoptime:"",iknow:!1,residence:[],dateofbirthP:void 0,passportvalidityP:void 0});let p=async(m,d)=>!d||d.length<2?Promise.reject(t("planMyTrip.errortimeinfo")):Promise.resolve();const c=k({countryname:[{required:!0,message:t("planMyTrip.countrynameTip")}],username:[{required:!0,message:t("planMyTrip.usernameTip")}],nationality:[{required:!0,message:t("planMyTrip.nationalityTip")}],passportnumber:[{required:!0,message:t("planMyTrip.passportnumberTip")}],dateofbirthP:[{required:!0,message:t("planMyTrip.dateofbirthTip")}],passportvalidityP:[{required:!0,message:t("planMyTrip.passportvalidityTip")}],residence:[{validator:p}]}),{resetFields:w}=Z(a,c);async function $(){var m,d,f,y;try{await o.value.validate(),a.dateofbirth=(m=a.dateofbirthP)==null?void 0:m.format(n),a.passportvalidity=(d=a.passportvalidityP)==null?void 0:d.format(n),a.starttime=(f=a.residence[0])==null?void 0:f.format(n),a.stoptime=(y=a.residence[1])==null?void 0:y.format(n),await i.addLetter(a)&&(G.success({message:t("planMyTrip.submitinfo"),placement:"topRight"}),w(),i.fetchList(0))}catch(g){}}return()=>{let m,d,f,y,g;return e(O,null,[e("div",{class:V.formInfoSection},[e("img",{src:X},null),e("div",null,[e("h3",{class:"text_red"},[t("planMyTrip.formtitle")]),e("span",null,[t("planMyTrip.topinfo1")]),e("span",null,[t("planMyTrip.topinfo2",{email:"contact@itb-china.com"})]),e("br",null,null)])]),e(l,{ref:o,model:a,rules:c},{default:()=>[e(u,{gutter:20},{default:()=>[e(s,{span:12},{default:()=>[e(l.Item,{name:"countryname",label:t("planMyTrip.countryname")},{default:()=>[e(b,{type:"text",value:a.countryname,"onUpdate:value":r=>a.countryname=r},null)]})]}),e(s,{span:12},{default:()=>[e(l.Item,{name:"username",label:t("planMyTrip.username")},{default:()=>[e(b,{type:"text",value:a.username,"onUpdate:value":r=>a.username=r},null)]})]})]}),e(u,{gutter:20},{default:()=>[e(s,{span:12},{default:()=>[e(l.Item,{name:"position",label:t("planMyTrip.position")},{default:()=>[e(b,{type:"text",value:a.position,"onUpdate:value":r=>a.position=r},null)]})]}),e(s,{span:12},{default:()=>[e(l.Item,{name:"gender",label:t("planMyTrip.gender")},{default:()=>[e(Y,{value:a.gender,"onUpdate:value":r=>a.gender=r},{default:()=>[e(R,{value:"Male"},T(m=t("planMyTrip.gendercontent[0]"))?m:{default:()=>[m]}),e(R,{value:"Female"},T(d=t("planMyTrip.gendercontent[1]"))?d:{default:()=>[d]})]})]})]})]}),e(u,{gutter:20},{default:()=>[e(s,{span:12},{default:()=>[e(l.Item,{name:"dateofbirthP",label:t("planMyTrip.dateofbirth")},{default:()=>[e(_,{style:{width:"100%"},value:a.dateofbirthP,"onUpdate:value":r=>a.dateofbirthP=r},null)]})]}),e(s,{span:12},{default:()=>[e(l.Item,{name:"nationality",label:t("planMyTrip.nationality")},{default:()=>[e(b,{type:"text",value:a.nationality,"onUpdate:value":r=>a.nationality=r},null)]})]})]}),e(u,{gutter:20},{default:()=>[e(s,{span:12},{default:()=>[e(l.Item,{name:"passportnumber",label:t("planMyTrip.passportnumber")},{default:()=>[e(b,{type:"text",value:a.passportnumber,"onUpdate:value":r=>a.passportnumber=r},null)]})]}),e(s,{span:12},{default:()=>[e(l.Item,{name:"passportvalidityP",label:t("planMyTrip.passportvalidity")},{default:()=>[e(_,{style:{width:"100%"},value:a.passportvalidityP,"onUpdate:value":r=>a.passportvalidityP=r},null)]})]})]}),e(u,{gutter:20},{default:()=>[e(s,{span:12},{default:()=>[e(l.Item,{name:"employer",label:t("planMyTrip.employer")},{default:()=>[e(b,{type:"text",value:a.employer,"onUpdate:value":r=>a.employer=r},null)]})]}),e(s,{span:12},{default:()=>[e(l.Item,{name:"residence",label:t("planMyTrip.residence")},{default:()=>[e(A,{style:{width:"100%"},value:a.residence,"onUpdate:value":r=>a.residence=r},null)]})]})]}),e(u,null,{default:()=>[e(l.Item,{name:"iknow"},{default:()=>[e(B,{checked:a.iknow,"onUpdate:checked":r=>a.iknow=r},T(f=t("planMyTrip.formatattention"))?f:{default:()=>[f]})]})]}),e(u,null,{default:()=>[e("p",{class:"text_red"},[t("planMyTrip.formatattention2"),U(" "),e("br",null,null),U(" "),t("planMyTrip.formatattention3")])]}),e(u,{type:"flex",gutter:20},{default:()=>[e(s,{flex:1,style:{textAlign:"right"}},{default:()=>[e(x,{type:"primary",disabled:!a.iknow,loading:i.loading,onClick:$},T(y=t("planMyTrip.sendApply"))?y:{default:()=>[y]})]}),e(s,{flex:1},{default:()=>[e(x,{onClick:w},T(g=t("planMyTrip.reset"))?g:{default:()=>[g]})]})]})]})])}}});function te(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!F(n)}var ae=I({name:"InvitationTable",setup(){const{t:n}=S(),{invitationStore:t}=C();E(()=>{t.fetchList(0)});let i=K(()=>({current:t.pageIndex,total:t.totalRecords}));const o=[{title:n("planMyTrip.countryname"),dataIndex:"countryname"},{title:n("planMyTrip.username"),dataIndex:"username"},{title:n("planMyTrip.gender"),dataIndex:"gender"},{title:n("planMyTrip.dateofbirth"),dataIndex:"dateofbirth",customRender:({record:a})=>`${a.dateofbirth.split(" ")[0]}`},{title:n("planMyTrip.position"),dataIndex:"position"},{title:n("planMyTrip.nationality"),dataIndex:"nationality"},{title:n("planMyTrip.passportnumber"),dataIndex:"passportnumber"},{title:n("planMyTrip.passportvalidity"),dataIndex:"passportvalidity",customRender:({record:a})=>`${a.passportvalidity.split(" ")[0]}`},{title:n("planMyTrip.employer"),dataIndex:"employer"},{title:n("planMyTrip.residence"),dataIndex:"strattime",customRender:({record:a})=>`${a.starttime.split(" ")[0]} -- ${a.stoptime.split(" ")[0]}`},{title:n("planMyTrip.createtime"),dataIndex:"createtime"},{title:n("planMyTrip.status"),dataIndex:"status",customRender:({record:a})=>n(`planMyTrip.statustype[${a.status}]`)},{title:n("planMyTrip.operation"),dataIndex:"invitationid",align:"center",fixed:"right",customRender({record:a}){if(a.status==="1"){let p;return e(x,{type:"link",onClick:()=>{t.downloadPdf(a.invitationid)}},te(p=n("planMyTrip.operationbutton"))?p:{default:()=>[p]})}}}];return()=>e("div",{class:"pd_tb_20"},[e(N,{size:"small",bordered:!0,rowKey:"invitationid",dataSource:t.list,columns:o,loading:t.loading,scroll:{x:1400,y:500},pagination:{current:i.value.current,total:i.value.total,onChange:a=>{t.fetchList(a)}}},{title:()=>e("h3",null,[n("planMyTrip.list")])})])}});const L={Table:ae,Form:ee};var ke=I({name:"PlanMyInvitation",setup(){return()=>e(O,null,[e(L.Form,null,null),e(L.Table,null,null)])}});export{ke as default};
