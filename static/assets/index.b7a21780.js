import{M as B}from"./MainSectionHead.8ce27b3b.js";import{u as h,a as I}from"./index.e3c7c0e3.js";import{u as j}from"./CalendarStore.57ce01d9.js";import{R as y,h as _,F as b,i as w,T as m,e as Y,m as f,j as T,k as P,l as H,n as A}from"./ant-design-vue.84b208bc.js";import{h as d}from"./moment.29305b8e.js";import{u as C}from"./vue-i18n.8989ea2a.js";import{s as g}from"./index.module.e1039702.js";import{P as O,b as $}from"./@ant-design.b29a0759.js";import{d as S,c as x,k as e,u as D,i as M,F as z}from"./@vue.f0f90a02.js";import"./vue-router.65bc85cf.js";import"./nprogress.8b9ed5b7.js";import"./axios.a57df465.js";import"./@babel.288dabcc.js";import"./regenerator-runtime.8463e994.js";import"./omit.js.0925d6dc.js";import"./lodash-es.e58a7599.js";import"./warning.ca82f8e0.js";import"./resize-observer-polyfill.8deb1e21.js";import"./async-validator.1fa0d626.js";import"./scroll-into-view-if-needed.c68eec67.js";import"./compute-scroll-into-view.6058b3be.js";import"./vue-types.6e6d84ba.js";import"./dom-align.f1b5d360.js";import"./@intlify.35d5f340.js";import"./source-map.3671d69c.js";import"./vue.8bc7d658.js";import"./@ctrl.2e36ce53.js";var V=S({setup(){var s,r;const{t:l}=C(),{appStore:o}=h(),{calendarStore:u}=j(),i={from:d((s=o.exhibitionDate)==null?void 0:s.beginDate).startOf("day"),to:d((r=o.exhibitionDate)==null?void 0:r.endDate).endOf("day")},v=n=>n<i.from||n>i.to;let a=x({startDate:d(i.from).add(9,"hour"),endDate:d(i.from).add(9,"hour")});function p(){a.endDate=d(a.startDate)}function c(){a.endDate=d(a.startDate).add(2,"hour")}async function k(){let n={IsOnline:0,Type:0,BeginDateTime:a.startDate.format("YYYY-MM-DD HH:mm"),EndDateTime:a.endDate.format("YYYY-MM-DD HH:mm"),WeekValue:""};try{await u.addBlockTime(n)?(f.success(l("common.success")),u.getBlockTime(0)):f.error(l("common.failed"))}catch(t){switch(t.message){case"message_error_01":f.error(l(`calendar.blocktime_errors[${t.message}]`));break;default:f.error(t.message)}}}return()=>e(b,null,{default:()=>[e(y,{gutter:20},{default:()=>[e(_,{span:12},{default:()=>[e("span",{class:g.label},[l("calendar.schedule_meeting.start")]),e(b.Item,{name:"startDatetime"},{default:()=>[e(w,{disabledDate:v,value:a.startDate,"onUpdate:value":n=>a.startDate=n,allowClear:!1,onChange:p},null),e(m,{format:"HH:mm","minute-Step":"60",value:a.startDate,"onUpdate:value":n=>a.startDate=n,allowClear:!1,onChange:c},null)]})]}),e(_,{span:12},{default:()=>[e("span",{class:g.label},[l("calendar.schedule_meeting.end")]),e(b.Item,{name:"endDatetime"},{default:()=>[e(w,{disabled:!0,disabledDate:v,value:a.endDate,"onUpdate:value":n=>a.endDate=n,allowClear:!1},null),e(m,{disabled:!0,value:a.endDate,"onUpdate:value":n=>a.endDate=n,format:"HH:mm",allowClear:!1},null)]})]})]}),e("hr",null,null),e(Y,{type:"primary",onClick:k},{default:()=>[e(O,null,null),D(" "),l("calendar.btn_add_block_time")]})]})}});function U(l){return typeof l=="function"||Object.prototype.toString.call(l)==="[object Object]"&&!M(l)}var R=S({setup(){var c,k;const{t:l}=C(),{calendarStore:o}=j(),{appStore:u}=h(),i={from:d((c=u.exhibitionDate)==null?void 0:c.onlineBeginDateTime).startOf("day"),to:d((k=u.exhibitionDate)==null?void 0:k.onlineEndDateTime).endOf("day")},v=s=>s<i.from||s>i.to;let a=x({startDate:d(i.from),endDate:d(i.from),type:1,weekDay:1,weekDays:d.weekdays().map((s,r)=>({value:r,label:s}))});async function p(){let s={IsOnline:1,Type:a.type,BeginDateTime:a.startDate.format("YYYY-MM-DD HH:mm"),EndDateTime:a.endDate.format("YYYY-MM-DD HH:mm"),WeekValue:a.type===2?a.weekDay.toString():""};try{await o.addBlockTime(s)?(f.success(l("common.success")),o.getBlockTime(1)):f.error(l("common.failed"))}catch(r){switch(r.message){case"message_error_01":f.error(l(`calendar.schedule_meeting[${r.message}]`));break;default:f.error(r.message)}}}return()=>{let s,r,n;return e(b,null,{default:()=>[e(T.Group,{value:a.type,"onUpdate:value":t=>a.type=t,style:"width: 100%;"},{default:()=>[e(y,{gutter:20},{default:()=>[e(_,{span:12},{default:()=>[e("p",{class:g.label},[e(T,{value:1},U(s=l("calendar.blockTime.every_day"))?s:{default:()=>[s]})]),e(b.Item,{name:"startDatetime"},{default:()=>[e(y,null,{default:()=>[e(m,{format:"HH:mm",value:a.startDate,"onUpdate:value":t=>a.startDate=t,allowClear:!1},null),D("\xA0 \xA0"),e(m,{format:"HH:mm",value:a.endDate,"onUpdate:value":t=>a.endDate=t,allowClear:!1},null)]})]})]}),e(_,{span:12},{default:()=>[e("p",{class:g.label},[e(T,{value:2,class:"mg_r_20"},U(r=l("calendar.blockTime.every_week_repeat"))?r:{default:()=>[r]}),e(P,{size:"small",style:"width:100px",value:a.weekDay,"onUpdate:value":t=>a.weekDay=t,options:a.weekDays},null)]),e(b.Item,{name:"endDatetime"},{default:()=>[e(y,null,{default:()=>[e(m,{value:a.startDate,"onUpdate:value":t=>a.startDate=t,format:"HH:mm",allowClear:!1},null),D("\xA0 \xA0"),e(m,{value:a.endDate,"onUpdate:value":t=>a.endDate=t,format:"HH:mm",allowClear:!1},null)]})]})]})]}),e(y,{gutter:20},{default:()=>[e(_,{span:20},{default:()=>[e("p",{class:g.label},[e(T,{value:0},U(n=l("calendar.blockTime.special_day"))?n:{default:()=>[n]})]),e(b.Item,{name:"startDatetime"},{default:()=>[e(y,null,{default:()=>[e(w,{disabledDate:v,value:a.startDate,"onUpdate:value":t=>a.startDate=t,allowClear:!1},null),e(m,{format:"HH:mm",value:a.startDate,"onUpdate:value":t=>a.startDate=t,allowClear:!1},null),D("\xA0 \xA0"),e(m,{format:"HH:mm",value:a.endDate,"onUpdate:value":t=>a.endDate=t,allowClear:!1},null)]})]})]})]})]}),e("hr",null,null),e(Y,{type:"primary",onClick:p},{default:()=>[e(O,null,null),D(" "),l("calendar.btn_add_block_time")]})]})}}});function E(l){return typeof l=="function"||Object.prototype.toString.call(l)==="[object Object]"&&!M(l)}var De=S({props:{isOnline:{type:Number,required:!0}},setup(l){var s;const{t:o}=C(),{calendarStore:u}=j(),{appStore:i}=h(),{authenStore:v}=I(),a=(s=v.user)==null?void 0:s.timeZone[0];let p=x({activeTab:1});c();function c(){u.getBlockTime(p.activeTab)}async function k(r){A.confirm({content:e("div",null,[o("calendar.blockTime.comfirm_title")]),onOk:async()=>{await u.delBlockTime(r)&&c()},okText:o("calendar.blockTime.confirm_okbtn"),onCancel:()=>{},cancelText:o("calendar.blockTime.confirm_cancelbtn")})}return()=>{var n;let r;return e(z,null,[e(B,{redLead:!1},E(r=o("calendar.blockTime.title"))?r:{default:()=>[r]}),e("p",null,[`${o("calendar.time_zone")}: ${a==null?void 0:a.utc} 
                ${i.isEn?a==null?void 0:a.timezone_en:a==null?void 0:a.timezone_cn}`]),e("div",{class:"text_red text_bold",innerHTML:o("calendar.blockTime.description")},null),e("br",null,null),e("div",{class:"bg_white pd_20"},[e(H,{activeKey:p.activeTab,"onUpdate:activeKey":t=>p.activeTab=t,onChange:c},{default:()=>[e(H.TabPane,{key:1,tab:o("calendar.blockTime.tab_vir")},{default:()=>[e(R,null,null)]}),e(H.TabPane,{key:0,tab:o("calendar.blockTime.tab_phy")},{default:()=>[e(V,null,null)]})]})]),(n=u.blockTimeSlots)==null?void 0:n.map(t=>e("div",{class:"bg_white pd_20 mg_tb_20",key:t.id},[e("div",{class:"cursor_hand fl_right",onClick:()=>{k(t.id)}},[e($,null,null)]),e("p",null,[o("calendar.schedule_meeting.my_time_zone")]),e("p",null,[o(`calendar.blockTime.type[${t.type}]`)," ",t.type===2?d.weekdays()[~~t.week_value]:"",D(" "),t.begindate,D(" ~")," ",t.type===0?t.enddate.substr(11,5):t.enddate])]))])}}});export{De as default};
