import{s as e,l as a,L as s}from"./index.module.8a04565e.js";import{c as r}from"./index.c2af8966.js";import{F as o,I as t,k as l,l as i}from"./ant-design-vue.a82685c5.js";import{u as n}from"./vue-i18n.f94f7590.js";import{a as d,u as m,d as p}from"./vue-router.f87f9226.js";import{s as u,y as c}from"./@ant-design.c79ca412.js";import{a2 as g,k as f,r as j,a0 as v,$ as b,ag as y,t as h}from"./@vue.40aa8880.js";import"./HomeStore.a9cf5d9f.js";import"./nprogress.3e43c680.js";import"./moment.fe945fe1.js";import"./@babel.dc475c8c.js";import"./regenerator-runtime.8463e994.js";import"./omit.js.0925d6dc.js";import"./lodash-es.60ec16aa.js";import"./warning.4abaefa0.js";import"./resize-observer-polyfill.8deb1e21.js";import"./async-validator.1fa0d626.js";import"./scroll-into-view-if-needed.c68eec67.js";import"./compute-scroll-into-view.6058b3be.js";import"./vue-types.6e6d84ba.js";import"./dom-align.f1b5d360.js";import"./@intlify.c2b61631.js";import"./source-map.3671d69c.js";import"./vue.23a295e8.js";import"./@ctrl.2e36ce53.js";function w(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!y(e)}var k=g({name:"Login",setup(g,{slots:y}){const k=d(),I=m(),{t:T}=n({useScope:"global"}),x=f(),U=j({username:"",password:"",agreed:!0}),q=j({username:[{required:!0,message:T("login.usernameTip"),trigger:"change"}],password:[{required:!0,message:T("login.passwordTip"),trigger:"change"}]});async function S(){var e,a;try{await x.value.validate(),await r.login(h(U)),I.push(null!=(a=null==(e=k.query)?void 0:e.redirect)?a:"/home")}catch(s){console.log("error",s)}}return()=>{let n,d,m;return v(s,null,{default:()=>[v("div",{class:e.outer},[v("div",{class:e.padding},[v("h3",null,[v("img",{src:a,class:e.logo},null),b("ITB China 2021 plus")])]),v("div",{class:e.form},[v("h1",null,[T("login.loginForm")]),v(o,{ref:x,model:U,rules:q},{default:()=>[v(o.Item,{name:"username"},{default:()=>[v(t,{value:U.username,"onUpdate:value":e=>U.username=e,placeholder:T("login.username")},{prefix:()=>v(u,{style:"color: rgba(0, 0, 0, 0.25)"},null)})]}),v(o.Item,{name:"password"},{default:()=>[v(t,{type:"password",value:U.password,"onUpdate:value":e=>U.password=e,placeholder:T("login.password")},{prefix:()=>v(c,{style:"color: rgba(0, 0, 0, 0.25)"},null)})]}),v(o.Item,{name:"agreed"},{default:()=>[v(l,{checked:U.agreed,"onUpdate:checked":e=>U.agreed=e},{default:()=>[v(p,{to:"/agreement"},w(n=T("login.agreeTip"))?n:{default:()=>[n]})]})]}),v(o.Item,null,{default:()=>[v(i,{type:"primary",block:!0,disabled:!U.agreed,loading:r.loading,onClick:S},w(d=T("login.login"))?d:{default:()=>[d]})]})]}),v("p",{class:e.registTip},[v(p,{to:"/signUp"},w(m=T("login.registTip"))?m:{default:()=>[m]})])]),v("div",{class:e.padding},null)])]})}}});export default k;
