var t=Object.defineProperty,e=(e,a,n)=>(((e,a,n)=>{a in e?t(e,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[a]=n})(e,"symbol"!=typeof a?a+"":a,n),n);import{B as a,p as n,l}from"./index.dcbec5b6.js";import{a1 as i,f as r,g as o,V as p,r as s,e as d,a6 as u,a7 as c,I as y,a8 as m,Z as f,q as v,a9 as b,aa as M,a3 as T,i as g,a4 as h,F as x,ab as I,W as P,ac as w,ad as j}from"./vendor.fa50ff7c.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */var k=Object.defineProperty,O=Object.getOwnPropertyDescriptor,R=(t,e,a,n)=>{for(var l,i=n>1?void 0:n?O(e,a):e,r=t.length-1;r>=0;r--)(l=t[r])&&(i=(n?l(e,a,i):l(i))||i);return n&&i&&k(e,a,i),i};class U extends a{constructor(){super(),e(this,"currentRecord"),e(this,"list"),e(this,"pageIndex"),e(this,"pageSize"),e(this,"totalRecords"),this.pageIndex=0,this.totalRecords=0,this.pageSize=10}async fetchList(t,e=10){let a=await n("/operation/Getletterlistbyuser",{pageIndex:t,pageSize:e});this.list=a.results,this.pageIndex=t,this.totalRecords=a.totalRecord}async addLetter(t){return await n("Operation/AddLetter",t)}async downloadPdf(t){let e=await n("Operation/CreatePDF",{letterid:t});window.open(e.filename,"_blank")}}R([l],U.prototype,"fetchList",1),R([l],U.prototype,"addLetter",1),R([l],U.prototype,"downloadPdf",1);const S=new U,L=function(){return{invitationStore:S}};var F="_formInfoSection_oi42b_1";function _(t){return"function"==typeof t||"[object Object]"===Object.prototype.toString.call(t)&&!v(t)}const C=i.useForm;var D=r({name:"InvitationForm",setup(){const t="YYYY-MM-DD",{t:e}=o(),{invitationStore:a}=L(),n=p(),l=s({countryname:"",username:"",position:"",gender:"Male",dateofbirth:"",nationality:"",passportnumber:"",passportvalidity:"",employer:"",starttime:"",stoptime:"",iknow:!1,residence:[],dateofbirthP:void 0,passportvalidityP:void 0});const r=s({dateofbirthP:[{required:!0,message:e("planMyTrip.dateofbirthTip")}],passportvalidityP:[{required:!0,message:e("planMyTrip.passportvalidityTip")}],residence:[{validator:async(t,a)=>a?a.length<2?Promise.reject(e("planMyTrip.errortimeinfo")):Promise.resolve():Promise.reject(e("planMyTrip.errortimeinfo"))}]}),{resetFields:v}=C(l,r);async function P(){var i,r,o,p;try{await n.value.validate(),l.dateofbirth=null==(i=l.dateofbirthP)?void 0:i.format(t),l.passportvalidity=null==(r=l.passportvalidityP)?void 0:r.format(t),l.starttime=null==(o=l.residence[0])?void 0:o.format(t),l.stoptime=null==(p=l.residence[1])?void 0:p.format(t),await a.addLetter(l)&&(I.success({message:e("planMyTrip.submitinfo"),placement:"topRight"}),v(),a.fetchList(0))}catch(s){}}return()=>{let t,o,p,s,I;return d(x,null,[d("div",{class:F},[d("img",{src:"/assets/pic.1ad2cc7c.jpg"},null),d("div",null,[d("h3",{class:"text_red"},[e("planMyTrip.formtitle")]),d("p",null,[e("planMyTrip.topinfo1")]),d("p",null,[e("planMyTrip.topinfo2",{email:"contact@itb-china.com"})]),d("p",null,[e("planMyTrip.topinfo3")])])]),d(i,{ref:n,model:l,rules:r},{default:()=>[d(u,{gutter:20},{default:()=>[d(c,{span:12},{default:()=>[d(i.Item,{name:"countryname",label:e("planMyTrip.countryname")},{default:()=>[d(y,{type:"text",value:l.countryname,"onUpdate:value":t=>l.countryname=t},null)]})]}),d(c,{span:12},{default:()=>[d(i.Item,{name:"username",label:e("planMyTrip.username")},{default:()=>[d(y,{type:"text",value:l.username,"onUpdate:value":t=>l.username=t},null)]})]})]}),d(u,{gutter:20},{default:()=>[d(c,{span:12},{default:()=>[d(i.Item,{name:"position",label:e("planMyTrip.position")},{default:()=>[d(y,{type:"text",value:l.position,"onUpdate:value":t=>l.position=t},null)]})]}),d(c,{span:12},{default:()=>[d(i.Item,{name:"gender",label:e("planMyTrip.gender")},{default:()=>[d(m,{value:l.gender,"onUpdate:value":t=>l.gender=t},{default:()=>[d(f,{value:"Male"},_(t=e("planMyTrip.gendercontent[0]"))?t:{default:()=>[t]}),d(f,{value:"Female"},_(o=e("planMyTrip.gendercontent[1]"))?o:{default:()=>[o]})]})]})]})]}),d(u,{gutter:20},{default:()=>[d(c,{span:12},{default:()=>[d(i.Item,{name:"dateofbirthP",label:e("planMyTrip.dateofbirth")},{default:()=>[d(b,{style:{width:"100%"},value:l.dateofbirthP,"onUpdate:value":t=>l.dateofbirthP=t},null)]})]}),d(c,{span:12},{default:()=>[d(i.Item,{name:"nationality",label:e("planMyTrip.nationality")},{default:()=>[d(y,{type:"text",value:l.nationality,"onUpdate:value":t=>l.nationality=t},null)]})]})]}),d(u,{gutter:20},{default:()=>[d(c,{span:12},{default:()=>[d(i.Item,{name:"passportnumber",label:e("planMyTrip.passportnumber")},{default:()=>[d(y,{type:"text",value:l.passportnumber,"onUpdate:value":t=>l.passportnumber=t},null)]})]}),d(c,{span:12},{default:()=>[d(i.Item,{name:"passportvalidityP",label:e("planMyTrip.passportvalidity")},{default:()=>[d(b,{style:{width:"100%"},value:l.passportvalidityP,"onUpdate:value":t=>l.passportvalidityP=t},null)]})]})]}),d(u,{gutter:20},{default:()=>[d(c,{span:12},{default:()=>[d(i.Item,{name:"employer",label:e("planMyTrip.employer")},{default:()=>[d(y,{type:"text",value:l.employer,"onUpdate:value":t=>l.employer=t},null)]})]}),d(c,{span:12},{default:()=>[d(i.Item,{name:"residence",label:e("planMyTrip.residence")},{default:()=>[d(M,{style:{width:"100%"},value:l.residence,"onUpdate:value":t=>l.residence=t,disabledDate:t=>t<moment("2021-05-03").startOf("day")||t>moment("2021-05-10").endOf("day")},null)]})]})]}),d(u,null,{default:()=>[d(i.Item,{name:"iknow"},{default:()=>[d(T,{checked:l.iknow,"onUpdate:checked":t=>l.iknow=t},_(p=e("planMyTrip.formatattention"))?p:{default:()=>[p]})]})]}),d(u,null,{default:()=>[d("p",{class:"text_red"},[e("planMyTrip.formatattention2"),g(" "),d("br",null,null),g(" "),e("planMyTrip.formatattention3")])]}),d(u,{type:"flex",gutter:20},{default:()=>[d(c,{flex:1,style:{textAlign:"right"}},{default:()=>[d(h,{type:"primary",disabled:!l.iknow,loading:a.loading,onClick:P},_(s=e("planMyTrip.sendApply"))?s:{default:()=>[s]})]}),d(c,{flex:1},{default:()=>[d(h,{onClick:v},_(I=e("planMyTrip.reset"))?I:{default:()=>[I]})]})]})]})])}}});const $={Table:r({name:"InvitationTable",setup(){const{t:t}=o(),{invitationStore:e}=L();P((()=>{e.fetchList(0)}));let a=w((()=>({current:e.pageIndex,total:e.totalRecords})));const n=[{title:t("planMyTrip.countryname"),dataIndex:"countryname"},{title:t("planMyTrip.username"),dataIndex:"username"},{title:t("planMyTrip.gender"),dataIndex:"gender"},{title:t("planMyTrip.dateofbirth"),dataIndex:"dateofbirth",customRender:({record:t})=>`${t.dateofbirth.split(" ")[0]}`},{title:t("planMyTrip.position"),dataIndex:"position"},{title:t("planMyTrip.nationality"),dataIndex:"nationality"},{title:t("planMyTrip.passportnumber"),dataIndex:"passportnumber"},{title:t("planMyTrip.passportvalidity"),dataIndex:"passportvalidity",customRender:({record:t})=>`${t.passportvalidity.split(" ")[0]}`},{title:t("planMyTrip.employer"),dataIndex:"employer"},{title:t("planMyTrip.residence"),dataIndex:"strattime",customRender:({record:t})=>`${t.starttime.split(" ")[0]} -- ${t.stoptime.split(" ")[0]}`},{title:t("planMyTrip.createtime"),dataIndex:"createtime"},{title:t("planMyTrip.status"),dataIndex:"status",customRender:({record:e})=>t(`planMyTrip.statustype[${e.status}]`)},{title:t("planMyTrip.operation"),dataIndex:"invitationid",align:"center",fixed:"right",customRender({record:a}){if("1"===a.status){let l;return d(h,{type:"link",onClick:()=>{e.downloadPdf(a.invitationid)}},"function"==typeof(n=l=t("planMyTrip.operationbutton"))||"[object Object]"===Object.prototype.toString.call(n)&&!v(n)?l:{default:()=>[l]})}var n}}];return()=>d("div",{class:"pd_tb_20"},[d(j,{size:"small",bordered:!0,rowKey:"invitationid",dataSource:e.list,columns:n,loading:e.loading,scroll:{x:1400,y:500},pagination:{current:a.value.current,total:a.value.total,onChange:t=>{e.fetchList(t)}}},{title:()=>d("h3",null,[t("planMyTrip.list")])})])}}),Form:D};var z=r({name:"PlanMyInvitation",setup:()=>()=>d(x,null,[d($.Form,null,null),d($.Table,null,null)])});export{z as default};
