import{S as f,a as b,I as _,L as B}from"./index.9bd4e1af.js";import{s as w,u as C}from"./index.module.38351331.js";import{m as T}from"./@rpdg.e35df5be.js";import{S as I,p as g,o as h,H as E}from"./ant-design-vue.f8ac2ba9.js";import{d as U}from"./vue-router.85e08d32.js";import{d as k}from"./itb_logo_gray.5050f3d7.js";import{d as y,l as F,k as e,o as A,w as R,i as L,F as v,c as O}from"./@vue.f0a33739.js";import{M as $}from"./MainSectionHead.99c217de.js";import{u as H}from"./vue-i18n.df730e9c.js";import"./moment.29305b8e.js";import"./@ant-design.a109b705.js";import"./@ctrl.2e36ce53.js";import"./nprogress.35503c85.js";import"./axios.7aed06b8.js";import"./@babel.288dabcc.js";import"./regenerator-runtime.8463e994.js";import"./omit.js.0925d6dc.js";import"./lodash-es.647f38fa.js";import"./warning.ca82f8e0.js";import"./resize-observer-polyfill.8deb1e21.js";import"./async-validator.1fa0d626.js";import"./scroll-into-view-if-needed.c68eec67.js";import"./compute-scroll-into-view.6058b3be.js";import"./vue-types.6e6d84ba.js";import"./dom-align.f1b5d360.js";import"./@intlify.19fb0a11.js";import"./source-map.e9534891.js";import"./vue.e0a06ef1.js";var x=y({props:{exhibitor:{type:Object,required:!0},onClick:{type:Function,required:!1}},name:"ShowfloorIndex_Card",setup(o){var n;let{appStore:i}=b();F((n=o.exhibitor.company_logo)!=null?n:"");let a="";return i.isEn?o.exhibitor.company_logo_en!=null&&o.exhibitor.company_logo_en!=""?a=f+o.exhibitor.company_logo_en:o.exhibitor.company_logo!=null&&o.exhibitor.company_logo!=""?a=f+o.exhibitor.company_logo:a=k:o.exhibitor.company_logo!=null&&o.exhibitor.company_logo!=""?a=f+o.exhibitor.company_logo:o.exhibitor.company_logo_en!=null&&o.exhibitor.company_logo_en!=""?a=f+o.exhibitor.company_logo_en:a=k,()=>e("div",{class:w.card,onClick:o.onClick},[e("div",{class:"squareItem2"},[e("img",{src:a},null)]),e("div",{class:w.title},[i.isEn?o.exhibitor.companyname_en:o.exhibitor.companyname_cn])])}});function M(o){return typeof o=="function"||Object.prototype.toString.call(o)==="[object Object]"&&!L(o)}var V=y({name:"Showfloor_SearchBar",setup(){const{t:o}=H();let{showfloorStore:i}=C(),{appStore:a}=b(),n=i.state;A(()=>{i.doSearchShowFloor({region:"",product:"",companyType:""})}),R([n],m);function m(){var d,u,r,l;n.iconIndex===0?i.doSearchShowFloor({region:(d=n.destination)!=null?d:"",product:(u=n.product)!=null?u:"",companyType:""}):n.iconIndex===1?i.doSearchShowFloor({region:(r=n.destination)!=null?r:"",product:"",companyType:(l=n.company)!=null?l:""}):n.iconIndex===2&&i.getExhibitor()}return()=>{let d;return e(v,null,[e($,{redLead:!1},M(d=o("menu.showFloor"))?d:{default:()=>[d]}),e("div",{class:"bg_white pd_10"},[e(I,{size:15},{default:()=>{var u,r,l;return[n.iconIndex!=2&&e(g,{allowClear:!0,placeholder:o("showFloor.destination"),style:"width: 150px",value:n.destination,"onUpdate:value":t=>n.destination=t,options:(u=i.continentList)==null?void 0:u.map(t=>({value:a.isEn?t.chau_en:t.chau_cn}))},null),n.iconIndex===0&&e(g,{allowClear:!0,placeholder:o("showFloor.product"),style:{width:"300px"},value:n.product,"onUpdate:value":t=>n.product=t,options:(r=i.productTypes)==null?void 0:r.map(t=>({value:t.id,label:a.isEn?t.group_en:t.group_cn}))},null),n.iconIndex===1&&e(g,{allowClear:!0,placeholder:o("showFloor.company"),style:{width:"300px"},value:n.company,"onUpdate:value":t=>n.company=t,options:(l=i.companyTypes)==null?void 0:l.map(t=>({value:t.id,label:a.isEn?t.companytype_en:t.companytype_cn}))},null),e(h.Group,{value:n.iconIndex,"onUpdate:value":t=>n.iconIndex=t,class:"iconGroup"},{default:()=>[e(h.Button,{value:1},{default:()=>[e(_,{type:"icon-category"},null)]}),e(h.Button,{value:0},{default:()=>[e(_,{type:"icon-all"},null)]}),e(h.Button,{value:2},{default:()=>[e(_,{type:"icon-connections"},null)]})]})]}})])])}}});function q(o){return typeof o=="function"||Object.prototype.toString.call(o)==="[object Object]"&&!L(o)}var z=y({name:"ShowfloorIndex_Results",setup(){let{appStore:o}=b(),{showfloorStore:i}=C();const a=F(),n="ABCDEFGHIJKLMNOPQRSTUVWXYZ#".split("");let m=O({});function d(r){var l;return(l=r.children)==null?void 0:l.map(t=>e("div",{class:"gridCols4"},[e("div",null,null),e(x,{exhibitor:t},null)]))}function u(r=!1){var p;let l={};(p=i.results)==null||p.forEach(c=>{var S,j;let s=o.isEn?(S=c.companyname_en)==null?void 0:S.substr(0,1).toLocaleUpperCase():c.companyname_cn?T((j=c.companyname_cn)==null?void 0:j.substr(0,1))[0].toLocaleUpperCase():"#";l[s]||(n.indexOf(s)===-1&&(s="#"),l[s]=[]),l[s].push(c)});let t=[];return n.forEach(c=>{l[c]&&(t.push(e(v,null,[e("p",{id:`#${c}`},[c]),e("hr",null,null)])),r?l[c].forEach(s=>t.push(e("div",{class:"bg_white mg_tb_20 pd_20"},[e("div",{class:"gridCols4"},[e(x,{exhibitor:s,onClick:()=>i.getExhibitorChildren(s)},null)]),d(s)]))):t.push(e("div",{class:"gridCols4 bg_white mg_t_20 pd_20"},[l[c].map(s=>e(U,{to:`/exhibitors/${s.barcode}`,target:"_blank"},{default:()=>[e(x,{exhibitor:s},null)]}))])))}),m=O(l),t}return()=>{let r;return e("div",{style:{display:"flex",flexDirection:"column",height:"100%"}},[e("div",{style:{height:""}},[e(V,null,null),e("div",{class:"mg_t_20 bg_white",style:{height:"30px"}},[e(E,{bounds:0,affix:!1,getContainer:()=>a.value,onClick:(l,t)=>{if(l.preventDefault(),t.href){let p=document.getElementById(t.href);p&&p.scrollIntoView({block:"start"})}}},{default:()=>[e(I,{size:1},q(r=Object.keys(m).sort().map((l,t)=>e(E.Link,{key:`${l}-${t}`,title:l,href:`#${l}`},null)))?r:{default:()=>[r]})]})])]),e("div",{style:{flex:1,overflow:"auto"}},[e("div",{ref:"divScroll",class:"bg_white pd_20"},[i.loading?e(B,null,null):u(i.state.iconIndex===2)])])])}}}),be=y({name:"ShowfloorIndex",setup(){return()=>e(v,null,[e(z,null,null)])}});export{be as default};
