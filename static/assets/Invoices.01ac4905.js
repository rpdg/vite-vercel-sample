import{d as B,l as _,c as k,o as z,k as a,t as d,i as F,z as c,F as L}from"./@vue.ca0c2fb5.js";import{s as R}from"./index.module.a0f7a9e1.js";import{u as S}from"./vue-i18n.1e3f796f.js";import{F as n,l as N,o as i,b as s,p as m,E as P,q as j,f as D,G as O}from"./ant-design-vue.fcf1ac88.js";import{h as p}from"./moment.29305b8e.js";import{p as A}from"./index.fb345625.js";import"./nprogress.35503c85.js";import"./@intlify.19fb0a11.js";import"./source-map.e9534891.js";import"./vue.08638ec1.js";import"./@babel.a04268fa.js";import"./regenerator-runtime.8463e994.js";import"./omit.js.0925d6dc.js";import"./@ant-design.45c2fd2e.js";import"./@ctrl.2e36ce53.js";import"./lodash-es.647f38fa.js";import"./warning.ca82f8e0.js";import"./resize-observer-polyfill.8deb1e21.js";import"./async-validator.1fa0d626.js";import"./scroll-into-view-if-needed.c68eec67.js";import"./compute-scroll-into-view.6058b3be.js";import"./vue-types.6e6d84ba.js";import"./dom-align.f1b5d360.js";import"./@rpdg.9741c2f9.js";import"./vue-router.b7316d96.js";import"./axios.7aed06b8.js";var G="/assets/invoices.5e5bb9c3.jpeg";function v(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!F(t)}var ye=B({name:"Invoices",setup(){const{t}=S(),I=_(),e=k({wayD:"",dCity:"",dNumber:"",dDate:"",arrivalTime:"",wayL:"",arrivalCity:"",lNumber:"",lDate:"",lTime:""});let h=async(o,u)=>{if(e.payment==="\u652F\u4ED8\u5B9D")return u?Promise.resolve():Promise.reject(t("invoices.filled"))},y=async(o,u)=>{if(e.payment==="\u94F6\u884C\u8F6C\u8D26")return u?Promise.resolve():Promise.reject(t("invoices.filled"))};const x=k({payment:[{required:!0,message:""}],alipayName:[{validator:h}],alipayAccount:[{validator:h}],bankName:[{validator:y}],bankAccount:[{validator:y}],openingBank:[{validator:y}]}),C=n.useForm,{resetFields:T}=C(e,x),w=()=>{T(),e.alipayName="",e.alipayAccount="",e.bankName="",e.bankAccount="",e.openingBank="",e.payment=""},U=async()=>{await A("Operation/Addtripbyuser",{comemethod:e.wayD,comecity:e.dCity,comedate:e.dDate?p(e.dDate).format("YYYY-MM-DD"):"",comemethodinfo:e.dNumber,comearrivedate:e.arrivalTime?p(e.arrivalTime).format("YYYY-MM-DD"):"",leavemethod:e.wayL,leavecity:e.arrivalCity,leavedate:e.lDate?p(e.lDate).format("YYYY-MM-DD"):"",leavemethodinfo:e.lNumber,leavearrivedate:e.lTime?p(e.lTime).format("YYYY-MM-DD"):"",paymethod:e.payment,zhifubaoname:e.alipayName,zhifubaoaccount:e.alipayAccount,bankaccountname:e.bankName,bankaccount:e.bankAccount,bankname:e.openingBank}),f(),w()};async function Y(){try{let o=await I.value.validateFields();U()}catch(o){}}const r=k({loading:!0,list:[],current:1,total:0}),M=[{title:t("invoices.wayD"),dataIndex:"comemethod",width:100,align:"center"},{title:t("invoices.dCity"),dataIndex:"comecity",align:"center"},{title:t("invoices.dDate"),dataIndex:"comedate",width:120,align:"center"},{title:t("invoices.dNumber"),dataIndex:"comemethodinfo",align:"center"},{title:t("invoices.wayL"),dataIndex:"leavemethod",width:100,align:"center"},{title:t("invoices.arrivalCity"),dataIndex:"leavecity",align:"center"},{title:t("invoices.lNumber"),dataIndex:"leavemethodinfo",align:"center"},{title:t("invoices.lTime"),dataIndex:"leavearrivedate",width:120,align:"center"},{title:t("invoices.payment"),dataIndex:"paymethod",width:100,align:"center"},{title:t("invoices.alipayName"),dataIndex:"zhifubaoname",align:"center"},{title:t("invoices.alipayAccount"),dataIndex:"zhifubaoaccount",align:"center"},,{title:t("invoices.bankName"),dataIndex:"bankaccountname",align:"center"},{title:t("invoices.bankAccount"),dataIndex:"bankaccount",align:"center"},{title:t("invoices.openingBank"),dataIndex:"bankname",align:"center"},{title:t("invoices.status"),dataIndex:"status",width:100,align:"center",customRender:({record:o})=>{switch(o.status){case"0":return t("invoices.apply");case"1":return t("invoices.pass");case"2":return t("invoices.refuse")}}}],f=async()=>{let o=await A("Operation/Gettriplistbyuser",{pageSize:10});r.list=o.results,r.total=o.totalRecord,r.loading=!1};return z(()=>{f()}),()=>{let o,u,b,g;return a(L,null,[a("div",{class:R.formInfoSection},[a("img",{src:G},null),a("div",null,[a("h3",{class:"text_red"},[t("planMyTrip.submenu3")]),a("span",null,[t("invoices.title")])])]),a(n,{ref:I,model:e,rules:x},{default:()=>[a(N,{gutter:20},{default:()=>[a(i,{span:12},{default:()=>[a(n.Item,{name:"wayD",label:t("invoices.wayD")},{default:()=>[a(s,{type:"text",value:e.wayD,"onUpdate:value":l=>e.wayD=l},null)]})]}),a(i,{span:12},{default:()=>[a(n.Item,{name:"dCity",label:t("invoices.dCity")},{default:()=>[a(s,{type:"text",value:e.dCity,"onUpdate:value":l=>e.dCity=l},null)]})]}),a(i,{span:24},{default:()=>[a(n.Item,{name:"dNumber",label:t("invoices.dNumber")},{default:()=>[a(s,{type:"text",value:e.dNumber,"onUpdate:value":l=>e.dNumber=l},null)]})]}),a(i,{span:12},{default:()=>[a(n.Item,{name:"dDate",label:t("invoices.dDate")},{default:()=>[a(m,{style:{width:"100%"},value:e.dDate,"onUpdate:value":l=>e.dDate=l},null)]})]}),a(i,{span:12},{default:()=>[d(a(n.Item,{name:"arrivalTime",label:t("invoices.arrivalTime")},{default:()=>[a(m,{style:{width:"100%"},value:e.arrivalTime,"onUpdate:value":l=>e.arrivalTime=l},null)]}),[[c,!1]])]}),a(i,{span:12},{default:()=>[a(n.Item,{name:"wayL",label:t("invoices.wayL")},{default:()=>[a(s,{type:"text",value:e.wayL,"onUpdate:value":l=>e.wayL=l},null)]})]}),a(i,{span:12},{default:()=>[a(n.Item,{name:"arrivalCity",label:t("invoices.arrivalCity")},{default:()=>[a(s,{type:"text",value:e.arrivalCity,"onUpdate:value":l=>e.arrivalCity=l},null)]})]}),a(i,{span:24},{default:()=>[a(n.Item,{name:"lNumber",label:t("invoices.lNumber")},{default:()=>[a(s,{type:"text",value:e.lNumber,"onUpdate:value":l=>e.lNumber=l},null)]})]}),a(i,{span:12},{default:()=>[a(n.Item,{name:"lTime",label:t("invoices.lTime")},{default:()=>[a(m,{style:{width:"100%"},value:e.lTime,"onUpdate:value":l=>e.lTime=l},null)]})]}),a(i,{span:12},{default:()=>[d(a(n.Item,{name:"lDate",label:t("invoices.lDate")},{default:()=>[a(m,{style:{width:"100%"},value:e.lDate,"onUpdate:value":l=>e.lDate=l},null)]}),[[c,!1]])]}),a(i,{span:24},{default:()=>[a(n.Item,{name:"payment",label:t("invoices.payment")},{default:()=>[a(P,{value:e.payment,"onUpdate:value":l=>e.payment=l},{default:()=>[a(j,{value:"\u652F\u4ED8\u5B9D"},v(o=t("invoices.Alipay"))?o:{default:()=>[o]}),a(j,{value:"\u94F6\u884C\u8F6C\u8D26"},v(u=t("invoices.bank"))?u:{default:()=>[u]})]})]})]}),d(a(i,{span:12},{default:()=>[a(n.Item,{name:"alipayName",label:t("invoices.alipayName")},{default:()=>[a(s,{type:"text",value:e.alipayName,"onUpdate:value":l=>e.alipayName=l},null)]})]}),[[c,e.payment==="\u652F\u4ED8\u5B9D"]]),d(a(i,{span:12},{default:()=>[a(n.Item,{name:"alipayAccount",label:t("invoices.alipayAccount")},{default:()=>[a(s,{type:"text",value:e.alipayAccount,"onUpdate:value":l=>e.alipayAccount=l},null)]})]}),[[c,e.payment==="\u652F\u4ED8\u5B9D"]]),d(a(i,{span:12},{default:()=>[a(n.Item,{name:"bankName",label:t("invoices.bankName")},{default:()=>[a(s,{type:"text",value:e.bankName,"onUpdate:value":l=>e.bankName=l},null)]})]}),[[c,e.payment==="\u94F6\u884C\u8F6C\u8D26"]]),d(a(i,{span:12},{default:()=>[a(n.Item,{name:"bankAccount",label:t("invoices.bankAccount")},{default:()=>[a(s,{type:"text",value:e.bankAccount,"onUpdate:value":l=>e.bankAccount=l},null)]})]}),[[c,e.payment==="\u94F6\u884C\u8F6C\u8D26"]]),d(a(i,{span:12},{default:()=>[a(n.Item,{name:"openingBank",label:t("invoices.openingBank")},{default:()=>[a(s,{type:"text",value:e.openingBank,"onUpdate:value":l=>e.openingBank=l},null)]})]}),[[c,e.payment==="\u94F6\u884C\u8F6C\u8D26"]])]}),a(N,{type:"flex",gutter:20},{default:()=>[a(i,{flex:1,style:{textAlign:"right"}},{default:()=>[a(D,{type:"primary",onClick:()=>Y()},v(b=t("planMyTrip.sendApply"))?b:{default:()=>[b]})]}),a(i,{flex:1},{default:()=>[a(D,{onClick:w},v(g=t("planMyTrip.reset"))?g:{default:()=>[g]})]})]})]}),a("div",{class:"pd_tb_20"},[a(O,{size:"small",bordered:!0,rowKey:"buyertripid",dataSource:r.list,columns:M,loading:r.loading,scroll:{x:2300,y:500},pagination:{current:r.current,total:r.total,onChange:l=>{r.current=l,f()}}},null)])])}}});export{ye as default};
