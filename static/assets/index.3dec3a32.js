import{s as r,L as T,a as x}from"./index.eb617dde.js";import{F as d,I as g,t as L,B as _,f as P,S as F,u as I}from"./ant-design-vue.a90d8269.js";import{u as f}from"./vue-i18n.95ef2b18.js";import{a as R,u as O,d as b}from"./vue-router.5ade7376.js";import{u as U,a as W}from"./index.6838ff5f.js";import{A as C,G as B}from"./@ant-design.b68099c7.js";import{d as j,l as q,c,k as e,i as h,B as A,F as N,u as V}from"./@vue.c37eb56a.js";import{S as z}from"./index.10ecb316.js";import"./@babel.288dabcc.js";import"./regenerator-runtime.8463e994.js";import"./omit.js.0925d6dc.js";import"./lodash-es.e58a7599.js";import"./moment.29305b8e.js";import"./warning.ca82f8e0.js";import"./resize-observer-polyfill.8deb1e21.js";import"./async-validator.1fa0d626.js";import"./scroll-into-view-if-needed.c68eec67.js";import"./compute-scroll-into-view.6058b3be.js";import"./vue-types.6e6d84ba.js";import"./dom-align.f1b5d360.js";import"./@intlify.19fb0a11.js";import"./nprogress.35503c85.js";import"./source-map.e9534891.js";import"./vue.9582b89e.js";import"./@rpdg.c2e06738.js";import"./axios.7aed06b8.js";import"./@ctrl.2e36ce53.js";import"./BlankGif.8ca146ab.js";function v(o){return typeof o=="function"||Object.prototype.toString.call(o)==="[object Object]"&&!h(o)}var E=j({name:"Login_PasswordForm",setup(){const{authenStore:o}=U(),{appStore:i}=W(),p=R(),a=O(),{t}=f({useScope:"global"}),m=q(),s=c({username:"",password:"",agreed:!0}),y=c({username:[{required:!0,message:t("login.usernameTip"),trigger:"change"}],password:[{required:!0,message:t("login.passwordTip"),trigger:"change"}]});async function S(){var l,u;try{await m.value.validate(),await o.loginWithPassword(A(s)),a.push((u=(l=p.query)==null?void 0:l.redirect)!=null?u:"/home")}catch(n){let k=n.message;P.error({content:t(k==="Username or password error"?"login.login_error1":"login.login_error2"),okText:t("login.okbtn")})}}return()=>{let l,u;return e(d,{ref:m,model:s,rules:y},{default:()=>[e(d.Item,{name:"username"},{default:()=>[e(g,{value:s.username,"onUpdate:value":n=>s.username=n,placeholder:t("login.username")},{prefix:()=>e(C,{style:"color: rgba(0, 0, 0, 0.25)"},null)})]}),e(d.Item,{name:"password"},{default:()=>[e(g,{type:"password",value:s.password,"onUpdate:value":n=>s.password=n,placeholder:t("login.password")},{prefix:()=>e(B,{style:"color: rgba(0, 0, 0, 0.25)"},null)})]}),e(d.Item,{name:"agreed"},{default:()=>[e(L,{checked:s.agreed,"onUpdate:checked":n=>s.agreed=n},{default:()=>[e(b,{to:i.isEn?"/agreementEn":"/agreement"},v(l=t("login.agreeTip"))?l:{default:()=>[l]})]})]}),e(d.Item,null,{default:()=>[e(_,{type:"primary",block:!0,disabled:!s.agreed,loading:o.loading,onClick:S},v(u=t("login.login"))?u:{default:()=>[u]})]})]})}}});function w(o){return typeof o=="function"||Object.prototype.toString.call(o)==="[object Object]"&&!h(o)}var je=j({name:"Login",setup(){const{t:o}=f({useScope:"global"}),i=c({loginWithPassword:!0});function p(a){i.loginWithPassword=a}return()=>{let a,t;return e(x,null,{default:()=>[e("div",{class:r.outer},[e("div",{class:r.padding},[e(T,null,null)]),e("div",{class:r.form},[e("h1",null,[o("login.loginForm")]),e("div",{class:r.tabs},[e("div",{class:i.loginWithPassword?r.curTab:"",onClick:()=>{p(!0)}},[e("span",null,[o("login.passwordLogin")])]),e("div",{class:i.loginWithPassword?"":r.curTab,onClick:()=>{p(!1)}},[e("span",null,[o("login.smsLogin")])])]),i.loginWithPassword?e(E,null,null):e(z,null,null)]),e("div",{class:r.padding},[e(F,{size:10},{default:()=>[e("p",{class:r.registTip},[e(b,{to:"/signUp"},w(a=o("login.registTip"))?a:{default:()=>[a]})]),e("p",{class:r.registTip},[e(I,{title:e(N,null,[e("span",null,[o("login.forgotTips")]),e("a",{href:"http://reg.itb-china.com",style:"color:white",target:"_blank"},[V("http://reg.itb-china.com")]),e("span",null,[o("login.forgotTips2")])])},w(t=o("login.forgotPassword"))?t:{default:()=>[t]})])]})])])]})}}});export{je as default};
