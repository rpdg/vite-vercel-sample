var e=Object.defineProperty,t=(t,a,o)=>(((t,a,o)=>{a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[a]=o})(t,"symbol"!=typeof a?a+"":a,o),o);import{B as a,p as o,l as r,L as s,I as i,u as l}from"./index.dada860a.js";import{P as c}from"./index.fee4b973.js";import{M as d}from"./MainSectionHead.8a2a8185.js";import{u as n}from"./FavouriteStore.e87de473.js";import{aq as p,az as m,a7 as u,k as f,a5 as b,al as j,M as v}from"./@vue.545e4a02.js";import{C as y}from"./ContactToolbar.4b83c101.js";import{s as _}from"./index.module.896cc485.js";import{h as g,n as h}from"./ant-design-vue.ed23f4fc.js";import{_ as w}from"./vue-clipboard3.e3c4c0a4.js";import{u as x}from"./vue-i18n.4205327f.js";import{d as L}from"./vue-router.d53e7fc8.js";import{u as S,v as C,w as I}from"./@ant-design.5ba6d8e8.js";import"./nprogress.3e43c680.js";import"./moment.fe945fe1.js";import"./@babel.c1abb07f.js";import"./regenerator-runtime.df0ff768.js";import"./omit.js.0925d6dc.js";import"./lodash-es.4607ccff.js";import"./warning.ca82f8e0.js";import"./resize-observer-polyfill.8deb1e21.js";import"./async-validator.1fa0d626.js";import"./scroll-into-view-if-needed.c68eec67.js";import"./compute-scroll-into-view.6058b3be.js";import"./vue-types.6e6d84ba.js";import"./dom-align.f1b5d360.js";import"./@intlify.c2b61631.js";import"./source-map.3671d69c.js";import"./vue.e5ab7692.js";import"./@ctrl.2e36ce53.js";import"./xgplayer.7ff2548f.js";import"./clipboard.4b9ff286.js";var D=Object.defineProperty,O=Object.getOwnPropertyDescriptor;class k extends a{constructor(){super(),t(this,"detail")}async getDetail(e){this.detail=await o("/newproduct/detail",{productId:e})}}((e,t,a,o)=>{for(var r,s=o>1?void 0:o?O(t,a):t,i=e.length-1;i>=0;i--)(r=e[i])&&(s=(o?r(t,a,s):r(s))||s);o&&s&&D(t,a,s)})([r],k.prototype,"getDetail",1);const F=new k;function P(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!j(e)}var $=u({name:"ProductDetail",props:{productId:{type:Number,required:!0}},setup(e){let{productStore:t}=(a=e.productId,p((()=>{F.getDetail(a)})),m((()=>{F.detail=void 0})),{productStore:F});var a;let{appStore:o}=l(),{favoriteStore:r}=n(),{toClipboard:u}=w();const{t:j}=x(),D=async()=>{try{await u(window.location.href),h.success({message:j("common.copied")})}catch(e){console.error(e)}};let O=f(!1);return()=>{if(t.loading)return b(s,null,null);{let e=t.detail,a=e.info[0],s=e.companyList[0],l=e.resourceList,n=e.contactList;if(O.value=r.checkAdded({type:1,foreignKey:s.barcode}),e){let e,t,p,m;return b(v,null,[b(d,{redLead:!1},P(e=j("showFloor.productDetail"))?e:{default:()=>[e]}),b(g,{autoplay:!0},P(t=l.filter((e=>"1"===e.type)).map((e=>b("img",{class:"fullWidthImage cursor_normal",src:e.pic_path},null))))?t:{default:()=>[t]}),b("div",{class:"bg_white mg_t_20 pd_20"},[b("div",{class:"fl_right"},[b(S,{class:"pd_r_10 cursor_hand",onClick:D},null),O.value?b(C,{class:"cursor_hand",style:{color:"#FFB329"},onClick:async()=>{await r.delete({type:1,foreignKey:s.barcode}),O.value=!1}},null):b(I,{class:"cursor_hand",onClick:async()=>{await r.add({type:1,foreignKey:s.barcode}),O.value=!0}},null)]),b("h3",null,[o.isEn?a.product_name_en:a.product_name]),b("div",{class:"text_gray mg_b_20"},[o.isEn?a.product_detail_en:a.product_detail]),b("h4",null,[b(i,{type:"icon-company",style:{fontSize:"20px"}},null)," ",b(L,{to:`/exhibitors/${s.barcode}`},{default:()=>[o.isEn?s.companyname_en:s.companyname_cn]})])]),b(d,{redLead:!0},P(p=j("showFloor.productVideo"))?p:{default:()=>[p]}),b("div",{class:"pd_20 gridCols2"},[l.filter((e=>"2"===e.type)).map((e=>b(c,{video:e.vedio_path,poster:e.vedio_welcome_pic_path},null)))]),b(d,{redLead:!0},P(m=j("exhibitor.contact"))?m:{default:()=>[m]}),b("div",{class:_.contactList},[n.map((e=>b("div",{class:_.contactListItem},[b("img",{class:_.avatar,src:e.HeadImageUrl},null),b("div",{class:_.profile},[b(L,{to:`/exhibitors/${s.barcode}/contact/${e.employee_id}`},{default:()=>[b("h4",null,[o.isEn?`${e.firstname}  ${e.lastname}`:e.lastname_cn+e.firstname_cn])]}),b("div",{class:"text_gray"},[e.job_title]),b("div",{class:_.iconBar},[b(y,{barcode:e.employee_id},null)])])])))])])}}}}});export{$ as default};
