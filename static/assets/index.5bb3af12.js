var e=Object.defineProperty,t=(t,s,a)=>(((t,s,a)=>{s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a})(t,"symbol"!=typeof s?s+"":s,a),a);import{B as s,a,g as i,R as r,l as n,u as o}from"./index.c4c24068.js";import{g as m,G as l,y as d,C as u}from"./ant-design-vue.b2a91f0d.js";import{u as p}from"./vue-i18n.bbad715b.js";import{s as c}from"./index.module.8ccc273a.js";import{m as g}from"./@ant-design.a9421c3d.js";import{a2 as b,a0 as y,I as v,$ as f}from"./@vue.5723de44.js";import"./vue-router.0532eeed.js";import"./moment.29305b8e.js";import"./nprogress.3e43c680.js";import"./axios.a57df465.js";import"./@babel.288dabcc.js";import"./regenerator-runtime.8463e994.js";import"./omit.js.0925d6dc.js";import"./lodash-es.bcdd4346.js";import"./warning.4abaefa0.js";import"./resize-observer-polyfill.8deb1e21.js";import"./async-validator.1fa0d626.js";import"./scroll-into-view-if-needed.c68eec67.js";import"./compute-scroll-into-view.6058b3be.js";import"./vue-types.6e6d84ba.js";import"./dom-align.f1b5d360.js";import"./@intlify.c2b61631.js";import"./source-map.3671d69c.js";import"./vue.3a1030aa.js";import"./@ctrl.2e36ce53.js";var j=Object.defineProperty,_=Object.getOwnPropertyDescriptor;class h extends s{constructor(){super(),t(this,"reuqestsVir"),t(this,"reuqestsPhy"),t(this,"roleName"),this.roleName=a.role,this.init()}async init(){this.reuqestsVir=await this.getMeetingRequests(1),this.reuqestsPhy=await this.getMeetingRequests(0)}async getMeetingRequests(e){return(await i("/NewSchedule/InviteScheduleList",{isOnline:e})).map((e=>{let t=e.begin_datetime.split(" ")[0],s=`${e.begin_datetime.split(" ")[1]} - ${e.end_datetime.split(" ")[1]}`;return this.roleName===r.buyer?{id:e.id,approved:e.approved,companyLogo:e.e_logoUrl,avatar:e.e_headimageurl,date:t,time:s,name_cn:`${e.e_lastname_cn}${e.e_firstname_cn}`,name_en:`${e.e_firstname} ${e.e_lastname}`}:{id:e.id,approved:e.approved,companyLogo:e.b_company_logo,avatar:e.b_headimageurl,date:t,time:s,name_cn:`${e.b_lastname_cn}${e.b_firstname_cn}`,name_en:`${e.b_firstname} ${e.b_lastname}`}}))}}((e,t,s,a)=>{for(var i,r=a>1?void 0:a?_(t,s):t,n=e.length-1;n>=0;n--)(i=e[n])&&(r=(a?i(t,s,r):i(r))||r);a&&r&&j(t,s,r)})([n],h.prototype,"getMeetingRequests",1);const q=new h;var $=b({name:"MeetingRequestsItem",props:{item:{type:Object,required:!0}},setup(e){const{t:t}=p(),{item:s}=e,{appStore:a}=o();return()=>y(m.Item,{class:c.listItem,key:s.id},{default:()=>[y(m.Item.Meta,null,{description:()=>y(v,null,[y(l,{color:"#F0AE1C",style:{float:"right",marginRight:0}},{default:()=>[t(`myItb.meetingRequests.status_short[${s.approved}]`)],icon:()=>y(g,null,null)}),y("div",null,[y("div",{class:c.short},[s.date]),y("div",{class:c.short},[s.time]),y("div",{class:c.short},[t(`myItb.meetingRequests.status_long[${s.approved}]`)])])]),avatar:()=>[y("img",{class:`${c.avatar} ${c.round}`,src:s.companyLogo},null),y("img",{class:`${c.avatar} ${c.round}`,src:s.avatar},null)]}),y("span",{class:c.text_gray},[a.isEn?s.name_en:s.name_cn,f(" "),t("myItb.meetingRequests.invited_surfix")])]})}}),I=b({name:"MeetingRequests",setup(){const{t:e}=p(),{meetingStore:t}={meetingStore:q};return()=>y(u,{title:e("myItb.dockIcons.requests"),style:{marginTop:"28px"}},{default:()=>[y(d,{defaultActiveKey:1,style:{marginTop:"-24px"}},{default:()=>[y(d.TabPane,{key:1,tab:e("myItb.meetingRequests.online")},{default:()=>[y(m,{itemLayout:"vertical",dataSource:t.reuqestsVir},{renderItem:({item:e})=>y($,{item:e},null)})]}),y(d.TabPane,{key:2,tab:e("myItb.meetingRequests.offline")},{default:()=>[y(m,{itemLayout:"vertical",dataSource:t.reuqestsPhy},{renderItem:({item:e})=>y($,{item:e},null)})]})]})]})}});export default I;
