import{M as f}from"./MainSectionHead.8ce27b3b.js";import{u as D}from"./index.72e81481.js";import{C as i,u as S}from"./CalendarStore.d195c0ac.js";import{B as d,c as _,e as c,f as M}from"./ant-design-vue.45bb77f4.js";import{h as n}from"./moment.29305b8e.js";import{u as g}from"./vue-i18n.8989ea2a.js";import{u as B}from"./vue-router.65bc85cf.js";import{d as y,k as t,c as H,o as R,i as k,F as P}from"./@vue.f0f90a02.js";import"./@ant-design.b29a0759.js";import"./@ctrl.2e36ce53.js";import"./nprogress.8b9ed5b7.js";import"./axios.a57df465.js";import"./@babel.288dabcc.js";import"./regenerator-runtime.8463e994.js";import"./omit.js.0925d6dc.js";import"./lodash-es.e58a7599.js";import"./warning.ca82f8e0.js";import"./resize-observer-polyfill.8deb1e21.js";import"./async-validator.1fa0d626.js";import"./scroll-into-view-if-needed.c68eec67.js";import"./compute-scroll-into-view.6058b3be.js";import"./vue-types.6e6d84ba.js";import"./dom-align.f1b5d360.js";import"./@intlify.35d5f340.js";import"./source-map.3671d69c.js";import"./vue.8bc7d658.js";var Y=y({name:"CalendarBadgeTips",props:{online:{type:Boolean,required:!0}},setup(r){const{t:o}=g();return()=>t("div",{class:"pd_20 gridCols2 text_left"},[t(d,{color:i.Red,text:o("calendar.tips.1")},null),t(d,{color:i.Blue,text:o("calendar.tips.7")},null),t(d,{color:i.Yellow,text:o("calendar.tips.3")},null),t(d,{color:i.Black,text:o("calendar.tips.2")},null),t(d,{color:i.Gray,text:o("calendar.tips.4")},null)])}});function j(r){return typeof r=="function"||Object.prototype.toString.call(r)==="[object Object]"&&!k(r)}var oe=y({setup(){const{t:r}=g(),{appStore:o}=D(),x=B(),{calendarStore:s}=S();let p=n("2021-11-01"),l=H({tip:"",month:n(p),virtualMap:s.virtualMap,physicalMap:s.physicalMap});R(()=>{if(!s.inited){const a={beginDate:n(p).startOf("year").format("YYYY-MM-DD HH:mm:ss"),endDate:n(p).endOf("year").format("YYYY-MM-DD HH:mm:ss")};s.getVirtualCalendar(a),s.getPhysicalCalendar(a)}s.getTextTip(o.isEn).then(a=>{l.tip=a})});function v(a,{current:e}){var h;let u=e.format("YYYY-MM-DD"),m=a?l.virtualMap:l.physicalMap;if(m.has(u))return(h=m.get(u))==null?void 0:h.map(C=>t(d,{color:`${i[C]}`},null))}function b(a,e){let u=n(e).format("YYYY-MM-DD");(a?l.virtualMap:l.physicalMap).has(u)&&x.push(`/calendar/${a?"virtual":"physical"}/${e.format("YYYY-MM-DD")}`)}return()=>{let a;return t(P,null,[t(f,{redLead:!1},j(a=r("menu.calendar"))?a:{default:()=>[a]}),t(_,{message:l.tip,type:"error"},null),t(c,{expandIconPosition:"right",style:{margin:"20px 0"},activeKey:"1"},{default:()=>[t(c.Panel,{key:"1"},{default:()=>[t(M,{fullscreen:!0,value:l.month,"onUpdate:value":e=>l.month=e,onSelect:e=>{b(!0,e)}},{dateCellRender:e=>v(!0,e)}),t(Y,{online:!0},null)],header:()=>{let e;return t(f,{redLead:!0,inner:!0},j(e=r("calendar.virtual_platform_calendar"))?e:{default:()=>[e]})}})]}),t(c,{expandIconPosition:"right"},{default:()=>[t(c.Panel,{key:"2"},{default:()=>[t(M,{fullscreen:!0,value:p,"onUpdate:value":e=>p=e,validRange:[n("2021/11/24 00:00:00"),n("2021/11/26 23:59:59")],onSelect:e=>{b(!1,e)}},{headerRender:()=>t("div",null,null),dateCellRender:e=>v(!1,e)}),t(Y,{online:!1},null)],header:()=>{let e;return t(f,{redLead:!0,inner:!0},j(e=r("calendar.physical_exhibition_calendar"))?e:{default:()=>[e]})}})]})])}}});export{oe as default};
