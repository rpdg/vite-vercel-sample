import{M as h}from"./MainSectionHead.b9e7274a.js";import{u as C}from"./index.33d032b7.js";import{C as u,u as _}from"./CalendarStore.d01892e4.js";import{B as c,c as S,e as f,f as b}from"./ant-design-vue.0721aa65.js";import{h as l}from"./moment.29305b8e.js";import{u as g}from"./vue-i18n.0711e616.js";import{u as O}from"./vue-router.8ec3c3d8.js";import{d as M,k as e,c as R,o as k,i as B,F as H}from"./@vue.fa05379c.js";import{k as T,R as P}from"./@ant-design.8f5596ac.js";import"./nprogress.35503c85.js";import"./axios.a57df465.js";import"./@babel.288dabcc.js";import"./regenerator-runtime.8463e994.js";import"./omit.js.0925d6dc.js";import"./lodash-es.e58a7599.js";import"./warning.ca82f8e0.js";import"./resize-observer-polyfill.8deb1e21.js";import"./async-validator.1fa0d626.js";import"./scroll-into-view-if-needed.c68eec67.js";import"./compute-scroll-into-view.6058b3be.js";import"./vue-types.6e6d84ba.js";import"./dom-align.f1b5d360.js";import"./@intlify.0eca950e.js";import"./source-map.3671d69c.js";import"./vue.d22487d2.js";import"./@ctrl.2e36ce53.js";var x=M({name:"CalendarBadgeTips",props:{online:{type:Boolean,required:!0}},setup(s){const{t:n}=g();return()=>e("div",{class:"pd_20 gridCols2 text_left"},[e(c,{color:u.Red,text:n("calendar.tips.1")},null),e(c,{color:u.Blue,text:n("calendar.tips.7")},null),e(c,{color:u.Yellow,text:n("calendar.tips.3")},null),e(c,{color:u.Black,text:n("calendar.tips.2")},null),e(c,{color:u.Gray,text:n("calendar.tips.4")},null)])}});function v(s){return typeof s=="function"||Object.prototype.toString.call(s)==="[object Object]"&&!B(s)}var ie=M({setup(){const{t:s}=g(),{appStore:n}=C(),D=O(),{calendarStore:d}=_();let p=l("2021-11-01"),i=R({tip:"",virtualMoment:l(p),virtualMap:d.virtualMap,physicalMap:d.physicalMap});k(()=>{if(!d.inited){const r={beginDate:l(p).startOf("year").format("YYYY-MM-DD HH:mm:ss"),endDate:l(p).endOf("year").format("YYYY-MM-DD HH:mm:ss")};d.getVirtualCalendar(r),d.getPhysicalCalendar(r)}d.getTextTip(n.isEn).then(r=>{i.tip=r})});function j(r,{current:t}){var m;let o=t.format("YYYY-MM-DD"),a=r?i.virtualMap:i.physicalMap;if(a.has(o))return(m=a.get(o))==null?void 0:m.map(Y=>e(c,{color:`${u[Y]}`},null))}function y(r,t){let o=l(t).format("YYYY-MM-DD");D.push(`/calendar/${r?"virtual":"physical"}/${o}`)}return()=>{let r;return e(H,null,[e(h,{redLead:!1},v(r=s("menu.calendar"))?r:{default:()=>[r]}),e(S,{message:i.tip,type:"error"},null),e(f,{expandIconPosition:"right",style:{margin:"20px 0"}},{default:()=>[e(f.Panel,{key:"1"},{default:()=>{var t,o;return[e(b,{fullscreen:!0,value:i.virtualMoment,"onUpdate:value":a=>i.virtualMoment=a,validRange:[l((t=n.exhibitionDate)==null?void 0:t.onlineBeginDateTime).startOf("day"),l((o=n.exhibitionDate)==null?void 0:o.onlineEndDateTime).endOf("day")],onSelect:a=>{y(!0,a)}},{headerRender:({value:a,onChange:m})=>e("h3",{class:"text_center"},[e(T,{class:"cursor_hand",style:{visibility:i.virtualMoment.month()===10?"hidden":"visible"},onClick:()=>{m(a.clone().month(10))}},null)," ",l.months()[i.virtualMoment.month()]," ",e(P,{class:"cursor_hand",style:{visibility:i.virtualMoment.month()===11?"hidden":"visible"},onClick:()=>{m(a.clone().month(11))}},null)]),dateCellRender:a=>j(!0,a)}),e(x,{online:!0},null)]},header:()=>{let t;return e(h,{redLead:!0,inner:!0},v(t=s("calendar.virtual_platform_calendar"))?t:{default:()=>[t]})}})]}),e(f,{expandIconPosition:"right"},{default:()=>[e(f.Panel,{key:"2"},{default:()=>{var t,o;return[e(b,{fullscreen:!0,value:p,"onUpdate:value":a=>p=a,validRange:[l((t=n.exhibitionDate)==null?void 0:t.beginDate).startOf("day"),l((o=n.exhibitionDate)==null?void 0:o.endDate).endOf("day")],onSelect:a=>{y(!1,a)}},{headerRender:()=>e("h3",{class:"text_center"},[l.months()[10]]),dateCellRender:a=>j(!1,a)}),e(x,{online:!1},null)]},header:()=>{let t;return e(h,{redLead:!0,inner:!0},v(t=s("calendar.physical_exhibition_calendar"))?t:{default:()=>[t]})}})]})])}}});export{ie as default};
