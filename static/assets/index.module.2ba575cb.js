import{I as r,b as i,c,M as y,r as O,d as S}from"./index.920e9a46.js";import{u as M}from"./FavouriteStore.7f27287f.js";import{J as _}from"./@rpdg.e35df5be.js";import{h as b,n as f,r as g,m as p}from"./ant-design-vue.5bef4758.js";import{_ as B}from"./vue-clipboard3.ca4b4e55.js";import{u as L}from"./vue-i18n.df730e9c.js";import{d as N,l as w,c as x,I as J,k as n,i as U,F as q}from"./@vue.f0a33739.js";function v(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!U(e)}var Y=N({name:"ContactToolbar",props:{user:{type:Object,required:!0}},setup(e){const{t:a}=L();let{toClipboard:h}=B(),{favoriteStore:u}=M();const{chatStore:d}=S();async function C(){try{await h(window.location.href),g.success({message:a("common.copied")})}catch(t){console.error(t)}}const l=w(!1);function F(){b.confirm({title:a("common.confirm"),content:a("myItb.chat.request_business_card"),onOk(){const t=i.user,o=e.user;let m={FromBarcode:t.barcode,FromCompany:t.company,FromCompany_cn:t.companyCn,FromCompanyLogo:c(t.companyLogo),FromFirstname:t.firstName,FromLastname:t.lastName,FromFirstname_cn:t.firstname_cn,FromLastname_cn:t.lastname_cn,FromHeadImage:c(t.headImageUrl),FromJobTitle:"",ToBarcode:o.employee_id,ToCompany:o.company,ToCompany_cn:o.company_cn,ToCompanyLogo:c(o.logoUrl),ToFirstname:o.firstname,ToLastname:o.lastname,ToFirstname_cn:o.firstname_cn,ToLastname_cn:o.lastname_cn,ToHeadImage:c(o.HeadImageUrl),ToJobTitle:o.job_title};d.chatWith(e.user),d.sendChattingMessage(JSON.stringify(m),6).then(()=>{g.success({message:a("myItb.chat.request_business_card_successfully")})},()=>{})}})}function T(){p.info(a("calendar.offline_btn_info"))}let s=x({visibility:!1,isOnlineMeeting:1});function j(){return i.role&&(i.role==="buyer"||i.role==="exhibition")?i.role==="exhibition"&&(e.user.employee_id.substr(0,1)==="2"||e.user.employee_id.substr(0,1)==="3")?!0:i.role==="buyer"&&(e.user.employee_id.substr(0,1)==="1"||e.user.employee_id.substr(0,1)==="4"||e.user.employee_id.substr(0,1)==="7"):!1}function k(){s.visibility=!1,e.user.IsOnline===1&&(s.visibility=!0),_.set(y,e.user)}function I(){var t;e.user.employee_id.substr(0,1)==="1"||e.user.employee_id.substr(0,1)==="4"||e.user.employee_id.substr(0,1)==="7"||((t=i.user)==null?void 0:t.roleName)==="exhibition"?(_.set(y,e.user),O.push("/schedule/1")):p.info(a("calendar.offline_btn_info2"))}return J(async()=>{l.value=await u.judge({type:0,foreignKey:e.user.employee_id})}),()=>{let t,o;return n(q,null,[n(b,{visible:s.visibility,title:a("calendar.select_type"),onOk:k,onCancel:()=>{s.visibility=!1}},{default:()=>[n(f.Group,{value:s.isOnlineMeeting,"onUpdate:value":m=>s.isOnlineMeeting=m},{default:()=>[n(f.Button,{key:"1",value:1},v(t=a("calendar.online"))?t:{default:()=>[t]}),n(f.Button,{key:"0",value:0},v(o=a("calendar.offline"))?o:{default:()=>[o]})]})]}),n(r,{type:"icon-namecard",onClick:F},null),n(r,{type:"icon-icon-test",onClick:T},null),j()&&n(r,{type:"icon-icon-test2",onClick:I},null),n(r,{type:"icon-icon-test1",onClick:C},null),l.value?n(r,{type:"icon-collection-fill",onClick:async()=>{await u.delete({type:0,foreignKey:e.user.employee_id}),l.value=!1}},null):n(r,{type:"icon-collection",onClick:async()=>{await u.add({type:0,foreignKey:e.user.employee_id}),l.value=!0}},null)])}}});const E="_item_10mhg_1",G="_avatar_10mhg_6",H="_profile_10mhg_15",K="_iconBar_10mhg_19",A="_avatar_special_10mhg_36",R="_iconfontcolor_10mhg_41";var Z={item:E,avatar:G,profile:H,iconBar:K,avatar_special:A,iconfontcolor:R};export{Y as C,Z as s};
