import{I as r,b as i,c,d as M,M as y,r as O,e as B,a as L}from"./index.3c77b06c.js";import{u as N}from"./FavouriteStore.e9e86b5a.js";import{J as _}from"./@rpdg.e35df5be.js";import{h as b,o as d,n as g,m as p}from"./ant-design-vue.84ff5d3b.js";import{_ as w}from"./vue-clipboard3.ca4b4e55.js";import{u as x}from"./vue-i18n.df730e9c.js";import{d as J,l as U,c as q,I as E,k as n,i as A,F as G}from"./@vue.f0a33739.js";function v(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!A(e)}var ee=J({name:"ContactToolbar",props:{user:{type:Object,required:!0}},setup(e){const{t:a}=x();let{toClipboard:h}=w(),{favoriteStore:u}=N();const{chatStore:m}=B(),{appStore:C}=L();async function F(){try{await h(window.location.href),g.success({message:a("common.copied")})}catch(t){console.error(t)}}const l=U(!1);function T(){p.info(a("calendar.offline_btn_info")),b.confirm({title:a("common.confirm"),content:a("myItb.chat.request_business_card"),onOk(){const t=i.user,o=e.user;let f={FromBarcode:t.barcode,FromCompany:t.company,FromCompany_cn:t.companyCn,FromCompanyLogo:c(t.companyLogo),FromFirstname:t.firstName,FromLastname:t.lastName,FromFirstname_cn:t.firstname_cn,FromLastname_cn:t.lastname_cn,FromHeadImage:c(t.headImageUrl),FromJobTitle:"",ToBarcode:o.employee_id,ToCompany:o.company,ToCompany_cn:o.company_cn,ToCompanyLogo:c(o.logoUrl),ToFirstname:o.firstname,ToLastname:o.lastname,ToFirstname_cn:o.firstname_cn,ToLastname_cn:o.lastname_cn,ToHeadImage:c(o.HeadImageUrl),ToJobTitle:o.job_title};m.chatWith(e.user),m.sendChattingMessage(JSON.stringify(f),6).then(()=>{g.success({message:a("myItb.chat.request_business_card_successfully")})},()=>{})}})}function I(){C.myItbModule=M.Chat,m.chatWith(e.user)}let s=q({visibility:!1,isOnlineMeeting:1});function j(){return i.role&&(i.role==="buyer"||i.role==="exhibition")?i.role==="exhibition"&&(e.user.employee_id.substr(0,1)==="2"||e.user.employee_id.substr(0,1)==="3")?!0:i.role==="buyer"&&(e.user.employee_id.substr(0,1)==="1"||e.user.employee_id.substr(0,1)==="4"||e.user.employee_id.substr(0,1)==="7"):!1}function S(){s.visibility=!1,e.user.IsOnline===1&&(s.visibility=!0),_.set(y,e.user)}function k(){var t;e.user.employee_id.substr(0,1)==="1"||e.user.employee_id.substr(0,1)==="4"||e.user.employee_id.substr(0,1)==="7"||((t=i.user)==null?void 0:t.roleName)==="exhibition"?(_.set(y,e.user),O.push("/schedule/1")):p.info(a("calendar.offline_btn_info2"))}return E(async()=>{l.value=await u.judge({type:0,foreignKey:e.user.employee_id})}),()=>{let t,o;return n(G,null,[n(b,{visible:s.visibility,title:a("calendar.select_type"),onOk:S,onCancel:()=>{s.visibility=!1}},{default:()=>[n(d.Group,{value:s.isOnlineMeeting,"onUpdate:value":f=>s.isOnlineMeeting=f},{default:()=>[n(d.Button,{key:"1",value:1},v(t=a("calendar.online"))?t:{default:()=>[t]}),n(d.Button,{key:"0",value:0},v(o=a("calendar.offline"))?o:{default:()=>[o]})]})]}),n(r,{type:"icon-namecard",onClick:T},null),n(r,{type:"icon-icon-test",onClick:I},null),j()&&n(r,{type:"icon-icon-test2",onClick:k},null),n(r,{type:"icon-icon-test1",onClick:F},null),l.value?n(r,{type:"icon-collection-fill",onClick:async()=>{await u.delete({type:0,foreignKey:e.user.employee_id}),l.value=!1}},null):n(r,{type:"icon-collection",onClick:async()=>{await u.add({type:0,foreignKey:e.user.employee_id}),l.value=!0}},null)])}}});const H="_item_10mhg_1",K="_avatar_10mhg_6",R="_profile_10mhg_15",V="_iconBar_10mhg_19",W="_avatar_special_10mhg_36",z="_iconfontcolor_10mhg_41";var te={item:H,avatar:K,profile:R,iconBar:V,avatar_special:W,iconfontcolor:z};export{ee as C,te as s};
