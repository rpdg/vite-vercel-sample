import{u as H,L as N,I as L}from"./index.316ce18f.js";import{P as O}from"./index.0f984866.js";import{M as d}from"./MainSectionHead.b9e7274a.js";import{u as P}from"./ConferenceStore.7a4868e1.js";import{s as u}from"./index.module.6e348a91.js";import{e as m,F as i,x as z,y as B,m as F}from"./ant-design-vue.034afe85.js";import{u as U}from"./vue-i18n.0711e616.js";import{d as W}from"./vue-router.8ec3c3d8.js";import{O as $}from"./@ant-design.8f5596ac.js";import{d as q,o as E,j as G,l as k,c as R,k as e,i as J,u as _,F as K,B as Q}from"./@vue.fa05379c.js";import"./moment.29305b8e.js";import"./nprogress.35503c85.js";import"./axios.19d3e859.js";import"./@babel.288dabcc.js";import"./regenerator-runtime.8463e994.js";import"./omit.js.0925d6dc.js";import"./lodash-es.e58a7599.js";import"./warning.ca82f8e0.js";import"./resize-observer-polyfill.8deb1e21.js";import"./async-validator.1fa0d626.js";import"./scroll-into-view-if-needed.c68eec67.js";import"./compute-scroll-into-view.6058b3be.js";import"./vue-types.6e6d84ba.js";import"./dom-align.f1b5d360.js";import"./@intlify.0eca950e.js";import"./source-map.3671d69c.js";import"./vue.d22487d2.js";import"./@ctrl.2e36ce53.js";import"./xgplayer.1ae44471.js";function n(s){return typeof s=="function"||Object.prototype.toString.call(s)==="[object Object]"&&!J(s)}const X=i.useForm;var Le=q({name:"ConferenceDetail",props:{id:{type:Number,required:!0}},setup(s){var w,C;const{t:a}=U();let{conferenceStore:c}=P(),{authenStore:A}=H();E(()=>{c.getActivityContentDetail(s.id),c.checkInSchedule(s.id).then(t=>o.isAdded=t)});let l=G(()=>c.currentDetail);const h=k(),o=R({rate:3,content:"",Action:"1",barcode:(C=(w=A.user)==null?void 0:w.barcode)!=null?C:"",Type:"2",SubscribeId:"",activitycontentid:"",isAdded:void 0}),x=R({}),{resetFields:T}=X(o,x),S=k(a("conference.rateValues").split(","));async function V(){try{await h.value.validate(),console.log(Q(o))}catch(t){}}async function D(){try{await c.addToSchedule(s.id)==="ok"&&F.success(a("common.success"))}catch(t){t.message==="error_msg_02"&&F.error("")}}function M(t){return t?t.toString().indexOf("lm.enewie.com")>0?e("iframe",{src:t,class:"specialWidthVideo"},null):e(O,{video:t},null):e("p",null,null)}return()=>{var I;let t,f,p,v,j,y,g,b;return l.value?e(K,null,[e(d,{redLead:!1},n(t=a("conference.detail"))?t:{default:()=>[t]}),e("img",{src:l.value.activityCoverPicture,class:"specialWidthImage mg_b_20 cursor_normal"},null),e("div",{class:"pd_20 bg_white"},[e("h3",null,[l.value.title]),e("div",{class:"text_gray mg_tb_20",innerHTML:l.value.content},null),e("p",null,[e(L,{type:"icon-clock"},null),_(" "),l.value.begindate.split(" ")[0],_(" "),l.value.time]),e("p",null,[e(L,{type:"icon-map"},null),_(" "),l.value.location]),e("hr",null,null),o.isAdded===!0&&e(m,{type:"primary",onClick:D},n(f=a("conference.addTo"))?f:{default:()=>[f]}),o.isAdded===!1&&e(m,null,n(p=a("conference.added"))?p:{default:()=>[p]})]),e(d,{redLead:!0},n(v=a("conference.playback"))?v:{default:()=>[v]}),M(`${l.value.video}`),e(d,{redLead:!0},n(j=a("conference.speaker"))?j:{default:()=>[j]}),e("div",{class:u.contactList},[(I=l.value.speakers)==null?void 0:I.map(r=>e("div",{key:r.id,class:u.contactListItem},[e("img",{class:u.avatar,src:r.picture},null),e("div",{class:u.profile},[e(W,{to:`/speakers/${r.id}`},{default:()=>[e("h4",null,[r.name])]}),e("div",{class:"text_gray"},[r.company]),e("div",{class:"text_gray"},[r.title])])]))]),e(d,{redLead:!0},n(y=a("conference.evaluation"))?y:{default:()=>[y]}),e("div",{class:"bg_white pd_20"},[e(i,{ref:h,model:o,rules:x},{default:()=>[e(i.Item,null,{default:()=>[e(z,{value:o.rate,"onUpdate:value":r=>o.rate=r,tooltips:S.value},{character:()=>e($,null,null)}),e("span",{class:"ant-rate-text"},[S.value[o.rate-1]])]}),e(i.Item,null,{default:()=>[e(B,{value:o.content,"onUpdate:value":r=>o.content=r,placeholder:a("conference.comment"),allowClear:!0,autoSize:{minRows:3,maxRows:6}},null)]}),e(i.Item,null,{default:()=>[e(m,{type:"primary",onClick:V},n(g=a("common.submit"))?g:{default:()=>[g]}),e(m,{onClick:T,style:"margin-left: 10px"},n(b=a("common.reset"))?b:{default:()=>[b]})]})]})])]):e(N,null,null)}}});export{Le as default};
