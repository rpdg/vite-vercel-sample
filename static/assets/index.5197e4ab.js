var v=Object.defineProperty;var _=(r,s,t)=>s in r?v(r,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[s]=t;var l=(r,s,t)=>(_(r,typeof s!="symbol"?s+"":s,t),t);import{B as y,b as j,g as h,R as q,l as $,u as I}from"./index.e3c7c0e3.js";import{o as m,H as R,l as p,C as S}from"./ant-design-vue.84b208bc.js";import{u as c}from"./vue-i18n.8989ea2a.js";import{S as d}from"./Config.87ac60ee.js";import{s as o}from"./index.module.25c2564a.js";import{m as x}from"./@ant-design.b29a0759.js";import{d as g,k as a,F as w,u as M}from"./@vue.f0f90a02.js";import"./vue-router.65bc85cf.js";import"./moment.29305b8e.js";import"./nprogress.8b9ed5b7.js";import"./axios.a57df465.js";import"./@babel.288dabcc.js";import"./regenerator-runtime.8463e994.js";import"./omit.js.0925d6dc.js";import"./lodash-es.e58a7599.js";import"./warning.ca82f8e0.js";import"./resize-observer-polyfill.8deb1e21.js";import"./async-validator.1fa0d626.js";import"./scroll-into-view-if-needed.c68eec67.js";import"./compute-scroll-into-view.6058b3be.js";import"./vue-types.6e6d84ba.js";import"./dom-align.f1b5d360.js";import"./@intlify.35d5f340.js";import"./source-map.3671d69c.js";import"./vue.8bc7d658.js";import"./@ctrl.2e36ce53.js";var P=Object.defineProperty,C=Object.getOwnPropertyDescriptor,L=(r,s,t,e)=>{for(var i=e>1?void 0:e?C(s,t):s,n=r.length-1,u;n>=0;n--)(u=r[n])&&(i=(e?u(s,t,i):u(i))||i);return e&&i&&P(s,t,i),i};class f extends y{constructor(){super();l(this,"reuqestsVir");l(this,"reuqestsPhy");l(this,"roleName");this.roleName=j.role,this.init()}async init(){this.reuqestsVir=await this.getMeetingRequests(1),this.reuqestsPhy=await this.getMeetingRequests(0)}async getMeetingRequests(s){return(await h("/NewSchedule/InviteScheduleList",{isOnline:s})).map(e=>{let i=e.begin_datetime.split(" ")[0],n=`${e.begin_datetime.split(" ")[1]} - ${e.end_datetime.split(" ")[1]}`;return this.roleName===q.buyer?{id:e.id,approved:e.approved,companyLogo:e.e_logoUrl,avatar:e.e_headimageurl,date:i,time:n,name_cn:`${e.e_lastname_cn}${e.e_firstname_cn}`,name_en:`${e.e_firstname} ${e.e_lastname}`}:{id:e.id,approved:e.approved,companyLogo:e.b_company_logo,avatar:e.b_headimageurl,date:i,time:n,name_cn:`${e.b_lastname_cn}${e.b_firstname_cn}`,name_en:`${e.b_firstname} ${e.b_lastname}`}})}}L([$],f.prototype,"getMeetingRequests",1);const T=new f,N=function(){return{meetingStore:T}};var b=g({name:"MeetingRequestsItem",props:{item:{type:Object,required:!0}},setup(r){const{t:s}=c(),{item:t}=r,{appStore:e}=I();return()=>a(m.Item,{class:o.listItem,key:t.id},{default:()=>[a(m.Item.Meta,null,{description:()=>a(w,null,[a(R,{color:"#F0AE1C",style:{float:"right",marginRight:0}},{default:()=>[s(`myItb.meetingRequests.status_short[${t.approved}]`)],icon:()=>a(x,null,null)}),a("div",null,[a("div",{class:o.short},[t.date]),a("div",{class:o.short},[t.time]),a("div",{class:o.short},[s(`myItb.meetingRequests.status_long[${t.approved}]`)])])]),avatar:()=>[a("img",{class:`${o.avatar} ${o.round}`,src:`${d}${t.companyLogo}`},null),a("img",{class:`${o.avatar} ${o.round}`,src:`${d}${t.avatar}`},null)]}),a("span",{class:o.text_gray},[e.isEn?t.name_en:t.name_cn,M(" "),s("myItb.meetingRequests.invited_surfix")])]})}}),le=g({name:"MeetingRequests",setup(){const{t:r}=c(),{meetingStore:s}=N();return()=>a(S,{title:r("myItb.dockIcons.requests"),style:{marginTop:"28px"}},{default:()=>[a(p,{defaultActiveKey:1,style:{marginTop:"-24px"}},{default:()=>[a(p.TabPane,{key:1,tab:r("myItb.meetingRequests.online")},{default:()=>[a(m,{itemLayout:"vertical",dataSource:s.reuqestsVir},{renderItem:({item:t})=>a(b,{item:t},null)})]}),a(p.TabPane,{key:2,tab:r("myItb.meetingRequests.offline")},{default:()=>[a(m,{itemLayout:"vertical",dataSource:s.reuqestsPhy},{renderItem:({item:t})=>a(b,{item:t},null)})]})]})]})}});export{le as default};
